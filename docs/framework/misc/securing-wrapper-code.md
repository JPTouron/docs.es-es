---
title: Insertar en el repositorio código de contenedor
description: Revise cómo proteger el código de contenedor, que puede abrir un conjunto único de puntos débiles de seguridad, especialmente si el contenedor tiene una mayor confianza que el código que lo usa.
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
ms.openlocfilehash: 64c5b2455882ca121a6eeb0c0bbcbc4d04ed88cd
ms.sourcegitcommit: 97ce5363efa88179dd76e09de0103a500ca9b659
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/13/2020
ms.locfileid: "86281451"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="16af8-103">Insertar en el repositorio código de contenedor</span><span class="sxs-lookup"><span data-stu-id="16af8-103">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="16af8-104">El código de contenedor, especialmente cuando el contenedor tiene mayor confianza que el código que lo usa, puede descubrir un conjunto único de vulnerabilidades de seguridad.</span><span class="sxs-lookup"><span data-stu-id="16af8-104">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="16af8-105">Todo lo hecho en nombre de un llamador, cuyos permisos limitados no se incluyen en la comprobación de seguridad adecuada, es una vulnerabilidad potencial que puede ser aprovechada.</span><span class="sxs-lookup"><span data-stu-id="16af8-105">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="16af8-106">No habilite nunca nada a través del contenedor que el llamador no pueda hacer él mismo.</span><span class="sxs-lookup"><span data-stu-id="16af8-106">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="16af8-107">Esto es especialmente peligroso cuando se realiza una acción que implica una comprobación de seguridad limitada, en lugar de una petición de recorrido de pila completo.</span><span class="sxs-lookup"><span data-stu-id="16af8-107">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="16af8-108">Si hay comprobaciones de nivel único implicadas, la interposición de código de contenedor entre el llamador real y el elemento de la API en cuestión puede hacer fácilmente que la comprobación de seguridad tenga éxito cuando no debería tenerlo, con el consiguiente debilitamiento de la seguridad.</span><span class="sxs-lookup"><span data-stu-id="16af8-108">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="16af8-109">Delegados</span><span class="sxs-lookup"><span data-stu-id="16af8-109">Delegates</span></span>  
 <span data-ttu-id="16af8-110">La seguridad de los delegados difiere entre las versiones de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="16af8-110">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="16af8-111">En esta sección se describe el comportamiento de los distintos delegados y las consideraciones de seguridad asociadas.</span><span class="sxs-lookup"><span data-stu-id="16af8-111">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="16af8-112">En las versiones 1.0 y 1.1 de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="16af8-112">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="16af8-113">Las versiones 1.0 y 1.1 de .NET Framework llevan a cabo las siguientes acciones de seguridad frente a un creador de delegado y un llamador de delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-113">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
- <span data-ttu-id="16af8-114">Cuando se crea un delegado, las peticiones de vínculo de seguridad en el método de destino del delegado se realizan en el conjunto de permisos del creador del delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-114">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="16af8-115">El incumplimiento de la acción de seguridad produce un <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="16af8-115">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="16af8-116">Cuando se invoca el delegado, se realiza cualquier petición de seguridad existente en el llamador del delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-116">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="16af8-117">Siempre que su código tome un <xref:System.Delegate> de un código de menor confianza que pueda llamarlo, asegúrese de que no habilita al código de menor confianza para que aumente sus permisos.</span><span class="sxs-lookup"><span data-stu-id="16af8-117">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="16af8-118">Si toma un delegado y lo usa más adelante, el código que creó el delegado no está en la pila de llamadas y sus permisos no se probarán si el código que está en el delegado o bajo el delegado intenta una operación protegida.</span><span class="sxs-lookup"><span data-stu-id="16af8-118">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="16af8-119">Si su código y el código del llamador tienen privilegios más elevados que el creador, el creador puede organizar la ruta de la llamada sin formar parte de la pila de llamadas.</span><span class="sxs-lookup"><span data-stu-id="16af8-119">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="16af8-120">En la versión 2,0 y versiones posteriores del .NET Framework</span><span class="sxs-lookup"><span data-stu-id="16af8-120">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="16af8-121">A diferencia de las versiones anteriores, la versión 2,0 y las versiones posteriores del .NET Framework realiza una acción de seguridad en el creador del delegado cuando se crea y se llama al delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-121">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
- <span data-ttu-id="16af8-122">Cuando se crea un delegado, las peticiones de vínculo de seguridad en el método de destino del delegado se realizan en el conjunto de permisos del creador del delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-122">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="16af8-123">El incumplimiento de la acción de seguridad produce un <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="16af8-123">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
- <span data-ttu-id="16af8-124">El conjunto de permisos del creador del delegado también se captura durante la creación del delegado y se almacena con dicho delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-124">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
- <span data-ttu-id="16af8-125">Cuando se invoca el delegado, el conjunto de permisos capturado del creador del delegado se evalúa en primer lugar frente a las peticiones en el contexto actual si el creador del delegado y el llamador pertenecen a distintos ensamblados.</span><span class="sxs-lookup"><span data-stu-id="16af8-125">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="16af8-126">A continuación, se realizan todas las peticiones de seguridad existentes en el llamador del delegado.</span><span class="sxs-lookup"><span data-stu-id="16af8-126">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="16af8-127">Peticiones de vínculo y contenedores</span><span class="sxs-lookup"><span data-stu-id="16af8-127">Link demands and wrappers</span></span>  
 <span data-ttu-id="16af8-128">Se ha reforzado un caso especial de protección con peticiones de vínculo en la infraestructura de seguridad, pero sigue siendo una fuente de posibles vulnerabilidades en el código.</span><span class="sxs-lookup"><span data-stu-id="16af8-128">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="16af8-129">Si el código de plena confianza llama a una propiedad, un evento o un método protegido por [LinkDemand](link-demands.md), la llamada se realiza correctamente si se cumple la comprobación del permiso **LinkDemand** para el llamador.</span><span class="sxs-lookup"><span data-stu-id="16af8-129">If fully trusted code calls a property, event, or method protected by a [LinkDemand](link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="16af8-130">Además, si el código de plena confianza expone una clase que toma el nombre de una propiedad y llama a su descriptor de acceso **Get** mediante reflexión, esa llamada al descriptor de acceso **Get** se realiza correctamente aunque el código de usuario no tenga el derecho a obtener acceso a esta propiedad.</span><span class="sxs-lookup"><span data-stu-id="16af8-130">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="16af8-131">Esto se debe a que **LinkDemand** comprueba solo el llamador inmediato, que es el código de plena confianza.</span><span class="sxs-lookup"><span data-stu-id="16af8-131">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="16af8-132">Básicamente, el código de plena confianza realiza una llamada privilegiada en nombre del código de usuario sin comprobar si el código de usuario tiene derecho a hacer esa llamada.</span><span class="sxs-lookup"><span data-stu-id="16af8-132">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="16af8-133">Para ayudar a evitar este tipo de carencias de seguridad, el Common Language Runtime extiende la comprobación a una demanda completa de recorrido de pila en cualquier llamada indirecta a un método, constructor, propiedad o evento protegido por una **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="16af8-133">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="16af8-134">Esta protección conlleva algunos costos de rendimiento y cambia la semántica de la comprobación de seguridad; la petición de recorrido de pila completo puede provocar errores que no se producirían en la comprobación rápida de un nivel.</span><span class="sxs-lookup"><span data-stu-id="16af8-134">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="16af8-135">Contenedores de carga de ensamblados</span><span class="sxs-lookup"><span data-stu-id="16af8-135">Assembly loading wrappers</span></span>  
 <span data-ttu-id="16af8-136">Varios de los métodos usados para cargar código administrado, incluido <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, cargan ensamblados con la evidencia del llamador.</span><span class="sxs-lookup"><span data-stu-id="16af8-136">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="16af8-137">Si encapsula cualquiera de estos métodos, el sistema de seguridad podría usar, para cargar los ensamblados, el permiso concedido al código en lugar de los permisos del llamador para el contenedor.</span><span class="sxs-lookup"><span data-stu-id="16af8-137">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="16af8-138">No permita que un código de menor confianza cargue código que tenga permisos superiores a los del llamador en el contenedor.</span><span class="sxs-lookup"><span data-stu-id="16af8-138">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="16af8-139">Cualquier código que tenga plena confianza o una confianza significativamente mayor que la de un posible llamador (incluido un llamador con nivel de permisos de Internet) podría debilitar la seguridad de esta manera.</span><span class="sxs-lookup"><span data-stu-id="16af8-139">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="16af8-140">Si el código tiene un método público que toma una matriz de bytes y la pasa a **Assembly. Load**, con lo que se crea un ensamblado en nombre del llamador, se podría interrumpir la seguridad.</span><span class="sxs-lookup"><span data-stu-id="16af8-140">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="16af8-141">Este problema se aplica a los siguientes elementos de la API:</span><span class="sxs-lookup"><span data-stu-id="16af8-141">This issue applies to the following API elements:</span></span>  
  
- <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
- <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
- <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="16af8-142">Demand versus LinkDemand</span><span class="sxs-lookup"><span data-stu-id="16af8-142">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="16af8-143">La seguridad declarativa ofrece dos tipos de comprobaciones de seguridad que son similares, pero que realizan comprobaciones muy diferentes.</span><span class="sxs-lookup"><span data-stu-id="16af8-143">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="16af8-144">Debe entender ambas formas porque la opción incorrecta puede producir la pérdida de rendimiento o una seguridad débil.</span><span class="sxs-lookup"><span data-stu-id="16af8-144">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="16af8-145">La seguridad declarativa ofrece las siguientes comprobaciones de seguridad:</span><span class="sxs-lookup"><span data-stu-id="16af8-145">Declarative security offers the following security checks:</span></span>  
  
- <span data-ttu-id="16af8-146"><xref:System.Security.Permissions.SecurityAction.Demand> especifica el recorrido de pila de seguridad de acceso del código.</span><span class="sxs-lookup"><span data-stu-id="16af8-146"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="16af8-147">Todos los llamadores de la pila deben tener el permiso o la identidad especificados para pasar.</span><span class="sxs-lookup"><span data-stu-id="16af8-147">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="16af8-148">La **demanda** se produce en cada llamada porque la pila puede contener diferentes llamadores.</span><span class="sxs-lookup"><span data-stu-id="16af8-148">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="16af8-149">Si llama a un método repetidas veces, esta comprobación de seguridad se realiza cada vez.</span><span class="sxs-lookup"><span data-stu-id="16af8-149">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="16af8-150">La **demanda** es una buena protección contra los ataques por Señuelos; se detectará un código no autorizado que intente obtener acceso a través de él.</span><span class="sxs-lookup"><span data-stu-id="16af8-150">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
- <span data-ttu-id="16af8-151">[LinkDemand](link-demands.md) se produce en el momento de la compilación Just-in-Time (JIT) y comprueba solo el llamador inmediato.</span><span class="sxs-lookup"><span data-stu-id="16af8-151">[LinkDemand](link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="16af8-152">Esta comprobación de seguridad no comprueba el llamador del llamador.</span><span class="sxs-lookup"><span data-stu-id="16af8-152">This security check does not check the caller's caller.</span></span> <span data-ttu-id="16af8-153">Una vez que se supera esta comprobación, no hay ninguna seguridad adicional posterior independientemente de las veces que el llamador pueda llamar.</span><span class="sxs-lookup"><span data-stu-id="16af8-153">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="16af8-154">Sin embargo, tampoco hay protección contra los ataques por señuelo.</span><span class="sxs-lookup"><span data-stu-id="16af8-154">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="16af8-155">Con **LinkDemand**, cualquier código que pase la prueba y puede hacer referencia a su código podría interrumpir la seguridad permitiendo que el código malintencionado llame a mediante el código autorizado.</span><span class="sxs-lookup"><span data-stu-id="16af8-155">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="16af8-156">Por lo tanto, no use **LinkDemand** a menos que todos los puntos débiles posibles se puedan evitar con detalle.</span><span class="sxs-lookup"><span data-stu-id="16af8-156">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    > <span data-ttu-id="16af8-157">En el .NET Framework 4, las peticiones de vínculo se han reemplazado por el <xref:System.Security.SecurityCriticalAttribute> atributo de los <xref:System.Security.SecurityRuleSet.Level2> ensamblados.</span><span class="sxs-lookup"><span data-stu-id="16af8-157">In the .NET Framework 4, link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="16af8-158"><xref:System.Security.SecurityCriticalAttribute>Es equivalente a una petición de vínculo para la plena confianza; sin embargo, también afecta a las reglas de herencia.</span><span class="sxs-lookup"><span data-stu-id="16af8-158">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="16af8-159">Para obtener más información sobre este cambio, vea [código transparente en seguridad, nivel 2](security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="16af8-159">For more information about this change, see [Security-Transparent Code, Level 2](security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="16af8-160">Las precauciones adicionales necesarias cuando se usa **LinkDemand** deben programarse individualmente. el sistema de seguridad puede ayudar en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="16af8-160">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="16af8-161">Cualquier error abre una vulnerabilidad en la seguridad.</span><span class="sxs-lookup"><span data-stu-id="16af8-161">Any mistake opens a security weakness.</span></span> <span data-ttu-id="16af8-162">Todo código autorizado que use su código debe hacerse responsable de implementar seguridad adicional mediante lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="16af8-162">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
- <span data-ttu-id="16af8-163">Restringir el acceso del código de llamada a la clase o al ensamblado.</span><span class="sxs-lookup"><span data-stu-id="16af8-163">Restricting the calling code's access to the class or assembly.</span></span>  
  
- <span data-ttu-id="16af8-164">Colocar en el código de llamada las mismas comprobaciones de seguridad que aparecen en el código al que se llama y obligar a sus llamadores a hacer lo mismo.</span><span class="sxs-lookup"><span data-stu-id="16af8-164">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="16af8-165">Por ejemplo, si escribe código que llama a un método que está protegido con una **LinkDemand** para el <xref:System.Security.Permissions.SecurityPermission> con la <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> marca especificada, el método debe realizar también una **LinkDemand** (o **Demand**, que es más seguro) para este permiso.</span><span class="sxs-lookup"><span data-stu-id="16af8-165">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="16af8-166">La excepción es si el código usa el método protegido con **LinkDemand**de una forma limitada que decida que es seguro, dados otros mecanismos de protección de seguridad (como las demandas) en el código.</span><span class="sxs-lookup"><span data-stu-id="16af8-166">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="16af8-167">En este caso excepcional, el llamador es el responsable de debilitar la protección de seguridad en el código subyacente.</span><span class="sxs-lookup"><span data-stu-id="16af8-167">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
- <span data-ttu-id="16af8-168">Garantizar que los llamadores de su código no pueden engañar al código para que llame al código protegido en su nombre.</span><span class="sxs-lookup"><span data-stu-id="16af8-168">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="16af8-169">En otras palabras, los llamadores no pueden forzar al código autorizado para pasar parámetros específicos al código protegido o para obtener resultados de él.</span><span class="sxs-lookup"><span data-stu-id="16af8-169">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="16af8-170">Interfaces y peticiones de vínculo</span><span class="sxs-lookup"><span data-stu-id="16af8-170">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="16af8-171">Si un método virtual, propiedad o evento con **LinkDemand** invalida un método de clase base, el método de clase base también debe tener el mismo **LinkDemand** para el método invalidado para que sea efectivo.</span><span class="sxs-lookup"><span data-stu-id="16af8-171">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="16af8-172">Es posible que el código malintencionado pueda convertirse al tipo base y llamar al método de clase base.</span><span class="sxs-lookup"><span data-stu-id="16af8-172">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="16af8-173">También tenga en cuenta que las peticiones de vínculo puede agregarse implícitamente a los ensamblados que no tienen el atributo de nivel de ensamblado <xref:System.Security.AllowPartiallyTrustedCallersAttribute>.</span><span class="sxs-lookup"><span data-stu-id="16af8-173">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="16af8-174">Es conveniente proteger las implementaciones de método con peticiones de vínculo cuando los métodos de interfaz también tienen peticiones de vínculo.</span><span class="sxs-lookup"><span data-stu-id="16af8-174">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="16af8-175">Tenga en cuenta los siguientes aspectos sobre el uso de las peticiones de vínculo con interfaces:</span><span class="sxs-lookup"><span data-stu-id="16af8-175">Note the following about using link demands with interfaces:</span></span>  
  
- <span data-ttu-id="16af8-176">Si coloca una **LinkDemand** en un método público de una clase que implementa un método de interfaz, **LinkDemand** no se aplicará si después convierte en la interfaz y llama al método.</span><span class="sxs-lookup"><span data-stu-id="16af8-176">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="16af8-177">En este caso, dado que se ha vinculado a la interfaz, solo se respeta el **LinkDemand** de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="16af8-177">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="16af8-178">Revise los elementos siguientes para comprobar si hay problemas de seguridad:</span><span class="sxs-lookup"><span data-stu-id="16af8-178">Review the following items for security issues:</span></span>  
  
- <span data-ttu-id="16af8-179">Peticiones de vínculo explícitas en métodos de interfaz.</span><span class="sxs-lookup"><span data-stu-id="16af8-179">Explicit link demands on interface methods.</span></span> <span data-ttu-id="16af8-180">Asegúrese de que estas peticiones de vínculo ofrecen la protección esperada.</span><span class="sxs-lookup"><span data-stu-id="16af8-180">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="16af8-181">Determine si el código malintencionado puede usar una conversión para evitar las peticiones de vínculo, como se describió anteriormente.</span><span class="sxs-lookup"><span data-stu-id="16af8-181">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
- <span data-ttu-id="16af8-182">Métodos virtuales con peticiones de vínculo aplicadas.</span><span class="sxs-lookup"><span data-stu-id="16af8-182">Virtual methods with link demands applied.</span></span>  
  
- <span data-ttu-id="16af8-183">Tipos y las interfaces que implementan.</span><span class="sxs-lookup"><span data-stu-id="16af8-183">Types and the interfaces they implement.</span></span> <span data-ttu-id="16af8-184">Deben usar las peticiones de vínculo de manera coherente.</span><span class="sxs-lookup"><span data-stu-id="16af8-184">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="16af8-185">Consulte también</span><span class="sxs-lookup"><span data-stu-id="16af8-185">See also</span></span>

- [<span data-ttu-id="16af8-186">Instrucciones de codificación segura</span><span class="sxs-lookup"><span data-stu-id="16af8-186">Secure Coding Guidelines</span></span>](../../standard/security/secure-coding-guidelines.md)
