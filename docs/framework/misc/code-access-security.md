---
title: Seguridad de acceso del código
description: Obtenga información sobre el mecanismo de seguridad de acceso del código en .NET, que ayuda a proteger los sistemas informáticos del código móvil malintencionado.
ms.date: 03/30/2017
helpviewer_keywords:
- named permission sets, code access security
- call stacks
- malicious code
- stack walk
- security [.NET Framework], code access security
- permissions [.NET Framework], code access security
- trusted code
- mobile code security
- unmanaged code, code access security
- granting permissions, code access security
- user authentication, code access security
- code access security
ms.assetid: 859af632-c80d-4736-8d6f-1e01b09ce127
ms.openlocfilehash: 6fa7983d0355a9e11728f8dbd0f4e06bbb0f8e5b
ms.sourcegitcommit: 97ce5363efa88179dd76e09de0103a500ca9b659
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/13/2020
ms.locfileid: "86281646"
---
# <a name="code-access-security"></a><span data-ttu-id="f1e57-103">Seguridad de acceso del código</span><span class="sxs-lookup"><span data-stu-id="f1e57-103">Code Access Security</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="f1e57-104">Los equipos conectados de hoy en día suelen estar expuestos a código procedente de varios orígenes, posiblemente desconocidos.</span><span class="sxs-lookup"><span data-stu-id="f1e57-104">Today's highly connected computer systems are frequently exposed to code originating from various, possibly unknown sources.</span></span> <span data-ttu-id="f1e57-105">El código puede adjuntarse al correo electrónico, incluirse en documentos o descargarse a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="f1e57-105">Code can be attached to email, contained in documents, or downloaded over the Internet.</span></span> <span data-ttu-id="f1e57-106">Por desgracia, muchos usuarios de equipos han experimentado personalmente las consecuencias del código móvil malintencionado, como virus y gusanos, que pueden dañar o destruir datos y costar tiempo y dinero.</span><span class="sxs-lookup"><span data-stu-id="f1e57-106">Unfortunately, many computer users have experienced firsthand the effects of malicious mobile code, including viruses and worms, which can damage or destroy data and cost time and money.</span></span>  
  
 <span data-ttu-id="f1e57-107">Los mecanismos de seguridad más comunes conceden derechos a los usuarios según sus credenciales de inicio de sesión (normalmente, una contraseña) y limitan los recursos (a menudo, directorios y archivos) a los que puede acceder el usuario.</span><span class="sxs-lookup"><span data-stu-id="f1e57-107">Most common security mechanisms give rights to users based on their logon credentials (usually a password) and restrict resources (often directories and files) that the user is allowed to access.</span></span> <span data-ttu-id="f1e57-108">Sin embargo, este enfoque no soluciona algunos problemas: los usuarios obtienen el código de muchos orígenes, algunos de los cuales pueden ser confiables. Además, el código puede contener errores o vulnerabilidades que permitan que lo explote el código malintencionado y el usuario, a veces, no sabe cómo actuará el código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-108">However, this approach fails to address several issues: users obtain code from many sources, some of which might be unreliable; code can contain bugs or vulnerabilities that enable it to be exploited by malicious code; and code sometimes does things that the user does not know it will do.</span></span> <span data-ttu-id="f1e57-109">En consecuencia, los equipos pueden resultar dañados y se pueden perder datos privados si un usuario precavido y de confianza ejecuta software malintencionado o que contenga errores.</span><span class="sxs-lookup"><span data-stu-id="f1e57-109">As a result, computer systems can be damaged and private data can be leaked when cautious and trustworthy users run malicious or error-filled software.</span></span> <span data-ttu-id="f1e57-110">La mayoría de los mecanismos de seguridad de los sistemas operativos requiere que cada fragmento de código sea de plena confianza para ejecutarse, con la excepción, quizás, de los scripts de una página web.</span><span class="sxs-lookup"><span data-stu-id="f1e57-110">Most operating system security mechanisms require that every piece of code must be completely trusted in order to run, except perhaps for scripts on a Web page.</span></span> <span data-ttu-id="f1e57-111">Por lo tanto, sigue siendo necesario un mecanismo de seguridad de amplia aplicación que permita que el código que se origina en un equipo se ejecute con protección en otro sistema, aunque no haya ninguna relación de confianza entre los sistemas.</span><span class="sxs-lookup"><span data-stu-id="f1e57-111">Therefore, there is still a need for a widely applicable security mechanism that allows code originating from one computer system to execute with protection on another system, even when there is no trust relationship between the systems.</span></span>  
  
 <span data-ttu-id="f1e57-112">.NET Framework proporciona un mecanismo de seguridad denominado “seguridad de acceso del código” para contribuir a proteger los sistemas informáticos del código móvil malintencionado, permitir que el código de origen desconocido se ejecute con protección y evitar que el código de confianza ponga en riesgo la seguridad, ya sea de manera intencionada o accidental.</span><span class="sxs-lookup"><span data-stu-id="f1e57-112">The .NET Framework provides a security mechanism called code access security to help protect computer systems from malicious mobile code, to allow code from unknown origins to run with protection, and to help prevent trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="f1e57-113">La seguridad de acceso del código proporciona al código varios grados de confianza, dependiendo de su procedencia y de otros aspectos de la identidad del código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-113">Code access security enables code to be trusted to varying degrees depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="f1e57-114">La seguridad de acceso del código también exige al código los distintos niveles de confianza, lo que reduce la cantidad de código que debe ser de plena confianza para ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="f1e57-114">Code access security also enforces the varying levels of trust on code, which minimizes the amount of code that must be fully trusted in order to run.</span></span> <span data-ttu-id="f1e57-115">Al utilizar la seguridad de acceso del código, se puede reducir la probabilidad de que un código malintencionado o con errores use el código de la forma que no debe.</span><span class="sxs-lookup"><span data-stu-id="f1e57-115">Using code access security can reduce the likelihood that your code will be misused by malicious or error-filled code.</span></span> <span data-ttu-id="f1e57-116">Puede reducir su responsabilidad, ya que usted puede especificar el conjunto de operaciones que debe poder realizar el código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-116">It can reduce your liability, because you can specify the set of operations your code should be allowed to perform.</span></span> <span data-ttu-id="f1e57-117">La seguridad de acceso del código también puede contribuir a minimizar el daño que puede derivarse de las vulnerabilidades de seguridad en el código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-117">Code access security can also help minimize the damage that can result from security vulnerabilities in your code.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="f1e57-118">Se han realizado cambios importantes en la seguridad de acceso del código en el .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="f1e57-118">Major changes have been made to code access security in the .NET Framework 4.</span></span> <span data-ttu-id="f1e57-119">El cambio más notable ha sido la [transparencia de seguridad](security-transparent-code.md), pero también hay otros cambios importantes que afectan a la seguridad de acceso del código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-119">The most notable change has been [security transparency](security-transparent-code.md), but there are also other significant changes that affect code access security.</span></span> <span data-ttu-id="f1e57-120">Para obtener información acerca de estos cambios, consulte [cambios de seguridad](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="f1e57-120">For information about these changes, see [Security Changes](https://docs.microsoft.com/previous-versions/dotnet/framework/security/security-changes).</span></span>  
  
 <span data-ttu-id="f1e57-121">La seguridad de acceso del código afecta, principalmente, al código de las bibliotecas y a las aplicaciones de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="f1e57-121">Code access security primarily affects library code and partially trusted applications.</span></span> <span data-ttu-id="f1e57-122">Los desarrolladores de bibliotecas deben proteger sus códigos del acceso no autorizado desde las aplicaciones de confianza parcial.</span><span class="sxs-lookup"><span data-stu-id="f1e57-122">Library developers must protect their code from unauthorized access from partially trusted applications.</span></span> <span data-ttu-id="f1e57-123">Las aplicaciones de confianza parcial son aplicaciones que se cargan desde orígenes externos, como Internet.</span><span class="sxs-lookup"><span data-stu-id="f1e57-123">Partially trusted applications are applications that are loaded from external sources such as the Internet.</span></span> <span data-ttu-id="f1e57-124">Las aplicaciones que se instalan en el escritorio o en la intranet local se ejecutan con plena confianza.</span><span class="sxs-lookup"><span data-stu-id="f1e57-124">Applications that are installed on your desktop or on the local intranet run in full trust.</span></span> <span data-ttu-id="f1e57-125">Las aplicaciones de plena confianza no se ven afectadas por la seguridad de acceso del código, a menos que estén marcadas como [transparentes en seguridad](security-transparent-code.md), ya que son de plena confianza.</span><span class="sxs-lookup"><span data-stu-id="f1e57-125">Full-trust applications are not affected by code access security unless they are marked as [security-transparent](security-transparent-code.md), because they are fully trusted.</span></span> <span data-ttu-id="f1e57-126">La única limitación de las aplicaciones de plena confianza es que las aplicaciones marcadas con el atributo <xref:System.Security.SecurityTransparentAttribute> no pueden llamar al código marcado con el atributo <xref:System.Security.SecurityCriticalAttribute>.</span><span class="sxs-lookup"><span data-stu-id="f1e57-126">The only limitation for full-trust applications is that applications that are marked with the <xref:System.Security.SecurityTransparentAttribute> attribute cannot call code that is marked with the <xref:System.Security.SecurityCriticalAttribute> attribute.</span></span> <span data-ttu-id="f1e57-127">Las aplicaciones de confianza parcial se deben ejecutar en un espacio aislado (por ejemplo, en Internet Explorer) para que se pueda aplicar la seguridad de acceso del código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-127">Partially trusted applications must be run in a sandbox (for example, in Internet Explorer) so that code access security can be applied.</span></span> <span data-ttu-id="f1e57-128">Si descarga una aplicación de Internet y trata de ejecutarla desde el escritorio, obtendrá un <xref:System.NotSupportedException> con el mensaje: “Se intentó cargar un ensamblado desde una ubicación de red, por lo que el ensamblado habría sido incluido en un espacio aislado de versiones anteriores de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f1e57-128">If you download an application from the Internet and try to run it from your desktop, you will get a <xref:System.NotSupportedException> with the message: "An attempt was made to load an assembly from a network location which would have caused the assembly to be sandboxed in previous versions of the .NET Framework.</span></span> <span data-ttu-id="f1e57-129">Esta versión de .NET Framework no habilita la directiva CAS de forma predeterminada, por lo que esta carga puede ser peligrosa”.</span><span class="sxs-lookup"><span data-stu-id="f1e57-129">This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous."</span></span> <span data-ttu-id="f1e57-130">Si está seguro de que la aplicación puede ser de confianza, puede habilitarla para que se ejecute como de plena confianza mediante el [ \<loadFromRemoteSources> elemento](../configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span><span class="sxs-lookup"><span data-stu-id="f1e57-130">If you are sure that the application can be trusted, you can enable it to be run as full trust by using the [\<loadFromRemoteSources> element](../configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span></span> <span data-ttu-id="f1e57-131">Para obtener información sobre la ejecución de una aplicación en un espacio aislado, consulte [Cómo: ejecutar código de confianza parcial en un espacio aislado](how-to-run-partially-trusted-code-in-a-sandbox.md).</span><span class="sxs-lookup"><span data-stu-id="f1e57-131">For information about running an application in a sandbox, see [How to: Run Partially Trusted Code in a Sandbox](how-to-run-partially-trusted-code-in-a-sandbox.md).</span></span>  
  
 <span data-ttu-id="f1e57-132">Todo el código administrado que tiene como destino el Common Language Runtime se beneficia de la seguridad de acceso del código, aunque ese código no haga ni una sola llamada de seguridad de acceso del código.</span><span class="sxs-lookup"><span data-stu-id="f1e57-132">All managed code that targets the common language runtime receives the benefits of code access security, even if that code does not make a single code access security call.</span></span> <span data-ttu-id="f1e57-133">Para obtener más información, vea [Conceptos básicos sobre la seguridad de acceso del código](code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="f1e57-133">For more information, see [Code Access Security Basics](code-access-security-basics.md).</span></span>  
  
<a name="key_functions"></a>
## <a name="key-functions-of-code-access-security"></a><span data-ttu-id="f1e57-134">Funciones clave de la seguridad de acceso del código</span><span class="sxs-lookup"><span data-stu-id="f1e57-134">Key Functions of Code Access Security</span></span>  
 <span data-ttu-id="f1e57-135">La seguridad de acceso del código contribuye a limitar el acceso que tiene el código a operaciones y recursos protegidos.</span><span class="sxs-lookup"><span data-stu-id="f1e57-135">Code access security helps limit the access that code has to protected resources and operations.</span></span> <span data-ttu-id="f1e57-136">En .NET Framework, la seguridad de acceso del código realiza las funciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="f1e57-136">In the .NET Framework, code access security performs the following functions:</span></span>  
  
- <span data-ttu-id="f1e57-137">Define permisos y conjuntos de permisos que representan el derecho de acceso a varios recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="f1e57-137">Defines permissions and permission sets that represent the right to access various system resources.</span></span>  
  
- <span data-ttu-id="f1e57-138">Permite que el código exija que sus llamadores tengan permisos específicos.</span><span class="sxs-lookup"><span data-stu-id="f1e57-138">Enables code to demand that its callers have specific permissions.</span></span>  
  
- <span data-ttu-id="f1e57-139">Permite que el código exija que sus llamadores posean una firma digital, por lo que solo los llamadores de una organización o un sitio concretos pueden llamar al código protegido.</span><span class="sxs-lookup"><span data-stu-id="f1e57-139">Enables code to demand that its callers possess a digital signature, thus allowing only callers from a particular organization or site to call the protected code.</span></span>  
  
- <span data-ttu-id="f1e57-140">Impone restricciones en el código en tiempo de ejecución mediante la comparación de los permisos concedidos a cada llamador en la pila de llamadas con los permisos que deben poseer.</span><span class="sxs-lookup"><span data-stu-id="f1e57-140">Enforces restrictions on code at run time by comparing the granted permissions of every caller on the call stack to the permissions that callers must have.</span></span>  
  
<a name="walking_the_call_stack"></a>
## <a name="walking-the-call-stack"></a><span data-ttu-id="f1e57-141">Recorrido de la pila de llamadas</span><span class="sxs-lookup"><span data-stu-id="f1e57-141">Walking the Call Stack</span></span>  
 <span data-ttu-id="f1e57-142">Para averiguar si el código tiene autorización para acceder a un recurso o para ejecutar una operación, el sistema de seguridad en tiempo de ejecución recorre la pila de llamadas y compara los permisos concedidos a cada llamador con el permiso que se pide.</span><span class="sxs-lookup"><span data-stu-id="f1e57-142">To determine whether code is authorized to access a resource or perform an operation, the runtime's security system walks the call stack, comparing the granted permissions of each caller to the permission being demanded.</span></span> <span data-ttu-id="f1e57-143">Si algún llamador de la pila de llamadas no tiene el permiso solicitado, se iniciará una excepción de seguridad y se rechazará el acceso.</span><span class="sxs-lookup"><span data-stu-id="f1e57-143">If any caller in the call stack does not have the demanded permission, a security exception is thrown and access is refused.</span></span> <span data-ttu-id="f1e57-144">El recorrido de la pila está diseñado para evitar los ataques por señuelo, en los que el código de menor confianza llama a código de confianza alta y lo utiliza para realizar acciones no autorizadas.</span><span class="sxs-lookup"><span data-stu-id="f1e57-144">The stack walk is designed to help prevent luring attacks, in which less-trusted code calls highly trusted code and uses it to perform unauthorized actions.</span></span> <span data-ttu-id="f1e57-145">La solicitud de permisos a todos los llamadores en tiempo de ejecución afecta al rendimiento, pero es esencial para proteger el código de los ataques por señuelo del código de menor confianza.</span><span class="sxs-lookup"><span data-stu-id="f1e57-145">Demanding permissions of all callers at run time affects performance, but it is essential to help protect code from luring attacks by less-trusted code.</span></span> <span data-ttu-id="f1e57-146">Para optimizar el rendimiento, puede hacer que el código realice menos recorridos de la pila. Sin embargo, debe tener la seguridad de que no está exponiendo un punto débil de la seguridad cada vez que lo hace.</span><span class="sxs-lookup"><span data-stu-id="f1e57-146">To optimize performance, you can have your code perform fewer stack walks; however, you must be sure that you do not expose a security weakness whenever you do this.</span></span>  
  
 <span data-ttu-id="f1e57-147">La siguiente ilustración muestra el recorrido de la pila que se produce cuando un método del ensamblado A4 solicita que sus llamadores tengan el permiso P.</span><span class="sxs-lookup"><span data-stu-id="f1e57-147">The following illustration shows the stack walk that results when a method in Assembly A4 demands that its callers have permission P.</span></span>  
  
 <span data-ttu-id="f1e57-148">![Seguridad de acceso del código](media/slide-10a.gif "slide_10a")</span><span class="sxs-lookup"><span data-stu-id="f1e57-148">![Code access security](media/slide-10a.gif "slide_10a")</span></span>  
<span data-ttu-id="f1e57-149">Recorrido de la pila de seguridad</span><span class="sxs-lookup"><span data-stu-id="f1e57-149">Security stack walk</span></span>  
  
<a name="related_topics"></a>
## <a name="related-topics"></a><span data-ttu-id="f1e57-150">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f1e57-150">Related Topics</span></span>  
  
|<span data-ttu-id="f1e57-151">Title</span><span class="sxs-lookup"><span data-stu-id="f1e57-151">Title</span></span>|<span data-ttu-id="f1e57-152">Descripción</span><span class="sxs-lookup"><span data-stu-id="f1e57-152">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="f1e57-153">Conceptos básicos sobre la seguridad de acceso del código</span><span class="sxs-lookup"><span data-stu-id="f1e57-153">Code Access Security Basics</span></span>](code-access-security-basics.md)|<span data-ttu-id="f1e57-154">Describe la seguridad de acceso del código y sus usos más comunes.</span><span class="sxs-lookup"><span data-stu-id="f1e57-154">Describes code access security and its most common uses.</span></span>|  
|[<span data-ttu-id="f1e57-155">Código transparente en seguridad, nivel 2</span><span class="sxs-lookup"><span data-stu-id="f1e57-155">Security-Transparent Code, Level 2</span></span>](security-transparent-code-level-2.md)|<span data-ttu-id="f1e57-156">Describe el modelo de transparencia de seguridad en el .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="f1e57-156">Describes the security transparency model in the .NET Framework 4.</span></span>|  
|[<span data-ttu-id="f1e57-157">Utilizar bibliotecas de código que no es de plena confianza</span><span class="sxs-lookup"><span data-stu-id="f1e57-157">Using Libraries from Partially Trusted Code</span></span>](using-libraries-from-partially-trusted-code.md)|<span data-ttu-id="f1e57-158">Describe cómo habilitar bibliotecas para usarlas con código no administrado y cómo usar las bibliotecas desde el código no administrado.</span><span class="sxs-lookup"><span data-stu-id="f1e57-158">Describes how to enable libraries for use with unmanaged code and how to use libraries from unmanaged code.</span></span>|  
|[<span data-ttu-id="f1e57-159">Conceptos clave de seguridad</span><span class="sxs-lookup"><span data-stu-id="f1e57-159">Key Security Concepts</span></span>](../../standard/security/key-security-concepts.md)|<span data-ttu-id="f1e57-160">Proporciona información general sobre muchos de los términos y conceptos clave que se usan en el sistema de seguridad de .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f1e57-160">Provides an overview of many of the key terms and concepts used in the .NET Framework security system.</span></span>|  
|[<span data-ttu-id="f1e57-161">Seguridad basada en roles</span><span class="sxs-lookup"><span data-stu-id="f1e57-161">Role-Based Security</span></span>](../../standard/security/role-based-security.md)|<span data-ttu-id="f1e57-162">Describe cómo incorporar la seguridad basada en roles.</span><span class="sxs-lookup"><span data-stu-id="f1e57-162">Describes how to incorporate security based on roles.</span></span>|  
|[<span data-ttu-id="f1e57-163">servicios criptográficos</span><span class="sxs-lookup"><span data-stu-id="f1e57-163">Cryptographic Services</span></span>](../../standard/security/cryptographic-services.md)|<span data-ttu-id="f1e57-164">Describe cómo incorporar la criptografía en las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f1e57-164">Describes how to incorporate cryptography into your applications.</span></span>|
