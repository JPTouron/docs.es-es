---
title: Seguridad de los mensajes en WCF
description: Obtenga información sobre TransportWithMessageCredential, un tipo de seguridad de mensajes de WCF que usa una combinación de modos de seguridad de transporte y de mensaje.
ms.date: 03/30/2017
ms.assetid: a80efb59-591a-4a37-bb3c-8fffa6ca0b7d
ms.openlocfilehash: 315a12c73929bfe71340e42f122ae542d4fddc07
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/23/2020
ms.locfileid: "85245029"
---
# <a name="message-security-in-wcf"></a><span data-ttu-id="b8339-103">Seguridad de los mensajes en WCF</span><span class="sxs-lookup"><span data-stu-id="b8339-103">Message Security in WCF</span></span>

<span data-ttu-id="b8339-104">Windows Communication Foundation (WCF) tiene dos modos principales para proporcionar seguridad ( `Transport` y `Message` ) y un tercer modo ( `TransportWithMessageCredential` ) que combina los dos.</span><span class="sxs-lookup"><span data-stu-id="b8339-104">Windows Communication Foundation (WCF) has two major modes for providing security (`Transport` and `Message`) and a third mode (`TransportWithMessageCredential`) that combines the two.</span></span> <span data-ttu-id="b8339-105">Este tema trata la seguridad del mensaje y las razones para utilizarla.</span><span class="sxs-lookup"><span data-stu-id="b8339-105">This topic discusses message security and the reasons to use it.</span></span>

## <a name="what-is-message-security"></a><span data-ttu-id="b8339-106">¿Qué es Seguridad de mensaje?</span><span class="sxs-lookup"><span data-stu-id="b8339-106">What Is Message Security?</span></span>

<span data-ttu-id="b8339-107">Seguridad de mensaje utiliza la especificación de  WS-Security para proteger los mensajes.</span><span class="sxs-lookup"><span data-stu-id="b8339-107">Message security uses the WS-Security specification to secure messages.</span></span> <span data-ttu-id="b8339-108">La especificación WS-Security describe las mejoras en la mensajería SOAP para garantizar la confidencialidad, integridad y autenticación en el nivel de mensaje SOAP (en lugar del nivel de transporte).</span><span class="sxs-lookup"><span data-stu-id="b8339-108">The WS-Security specification describes enhancements to SOAP messaging to ensure confidentiality, integrity, and authentication at the SOAP message level (instead of the transport level).</span></span>

<span data-ttu-id="b8339-109">En resumen, la seguridad de mensaje difiere de la seguridad de transporte encapsulando las credenciales de seguridad y notificaciones con cada mensaje junto con cualquier protección del mensaje (firma o cifrado).</span><span class="sxs-lookup"><span data-stu-id="b8339-109">In brief, message security differs from transport security by encapsulating the security credentials and claims with every message along with any message protection (signing or encryption).</span></span> <span data-ttu-id="b8339-110">La aplicación directa de seguridad al mensaje modificando su contenido permite que el mensaje seguro sea autónomo con respecto a los aspectos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b8339-110">Applying the security directly to the message by modifying its content allows the secured message to be self-containing with respect to the security aspects.</span></span> <span data-ttu-id="b8339-111">Esto habilita algunos escenarios que no son posibles cuando se utiliza la seguridad de transporte.</span><span class="sxs-lookup"><span data-stu-id="b8339-111">This enables some scenarios that are not possible when transport security is used.</span></span>

## <a name="reasons-to-use-message-security"></a><span data-ttu-id="b8339-112">Razones para utilizar Seguridad del mensaje</span><span class="sxs-lookup"><span data-stu-id="b8339-112">Reasons to Use Message Security</span></span>

<span data-ttu-id="b8339-113">En seguridad de nivel de mensaje, toda la información de seguridad se encapsula en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-113">In message-level security, all of the security information is encapsulated in the message.</span></span> <span data-ttu-id="b8339-114">Proteger el mensaje con seguridad de nivel de mensaje en lugar de seguridad de nivel de transporte tiene las siguientes ventajas:</span><span class="sxs-lookup"><span data-stu-id="b8339-114">Securing the message with message-level security instead of transport-level security has the following advantages:</span></span>

- <span data-ttu-id="b8339-115">Seguridad global.</span><span class="sxs-lookup"><span data-stu-id="b8339-115">End-to-end security.</span></span> <span data-ttu-id="b8339-116">La seguridad de transporte, como Capa de sockets seguros (SSL) solo protege los mensajes cuando la comunicación es de punto a punto.</span><span class="sxs-lookup"><span data-stu-id="b8339-116">Transport security, such as Secure Sockets Layer (SSL) only secures messages when the communication is point-to-point.</span></span> <span data-ttu-id="b8339-117">Si el mensaje se dirige a uno o varios intermediarios de SOAP (por ejemplo un enrutador) antes de alcanzar el receptor final, el propio mensaje no está protegido cuando un intermediario lo lee desde la conexión.</span><span class="sxs-lookup"><span data-stu-id="b8339-117">If the message is routed to one or more SOAP intermediaries (for example a router) before reaching the ultimate receiver, the message itself is not protected once an intermediary reads it from the wire.</span></span> <span data-ttu-id="b8339-118">Además, la información de autenticación del cliente está disponible solamente para el primer intermediario y debe ser transmitida al último receptor en modo fuera de banda, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="b8339-118">Additionally, the client authentication information is available only to the first intermediary and must be re-transmitted to the ultimate receiver in out-of-band fashion, if necessary.</span></span> <span data-ttu-id="b8339-119">Esto se aplica incluso en el caso de que la ruta completa utilice la seguridad de SSL entre los saltos individuales.</span><span class="sxs-lookup"><span data-stu-id="b8339-119">This applies even if the entire route uses SSL security between individual hops.</span></span> <span data-ttu-id="b8339-120">Dado que el modo de seguridad funciona directamente con el mensaje y protege el XML en él, la seguridad permanece con el mensaje sin tener en cuenta cuántos intermediarios están implicados antes de alcanzar el receptor final.</span><span class="sxs-lookup"><span data-stu-id="b8339-120">Because message security works directly with the message and secures the XML in it, the security stays with the message regardless of how many intermediaries are involved before it reaches the ultimate receiver.</span></span> <span data-ttu-id="b8339-121">Esto habilita un verdadero escenario de seguridad integral.</span><span class="sxs-lookup"><span data-stu-id="b8339-121">This enables a true end-to-end security scenario.</span></span>

- <span data-ttu-id="b8339-122">Más flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="b8339-122">Increased flexibility.</span></span> <span data-ttu-id="b8339-123">Se pueden firmar o cifrar las partes del mensaje, en lugar del mensaje completo.</span><span class="sxs-lookup"><span data-stu-id="b8339-123">Parts of the message, instead of the entire message, can be signed or encrypted.</span></span> <span data-ttu-id="b8339-124">Esto significa que los intermediarios pueden ver las partes del mensaje diseñadas para ellos.</span><span class="sxs-lookup"><span data-stu-id="b8339-124">This means that intermediaries can view the parts of the message that are intended for them.</span></span> <span data-ttu-id="b8339-125">Si el remitente necesita que parte de la información en el mensaje sea visible a los intermediarios, pero desea asegurarse que no se manipula, simplemente puede firmarlo sin cifrarlo.</span><span class="sxs-lookup"><span data-stu-id="b8339-125">If the sender needs to make part of the information in the message visible to the intermediaries but wants to ensure that it is not tampered with, it can just sign it but leave it unencrypted.</span></span> <span data-ttu-id="b8339-126">Puesto que la firma forma parte del mensaje, el receptor final puede comprobar que ha recibido la información del mensaje intacta.</span><span class="sxs-lookup"><span data-stu-id="b8339-126">Since the signature is part of the message, the ultimate receiver can verify that the information in the message was received intact.</span></span> <span data-ttu-id="b8339-127">Un escenario podría tener un servicio intermediario de SOAP que dirige el mensaje según lo especificado en el valor de encabezado de Acción.</span><span class="sxs-lookup"><span data-stu-id="b8339-127">One scenario might have a SOAP intermediary service that routes message according the Action header value.</span></span> <span data-ttu-id="b8339-128">De forma predeterminada, WCF no cifra el valor de la acción, sino que lo firma si se usa la seguridad del mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-128">By default, WCF does not encrypt the Action value but signs it if message security is used.</span></span> <span data-ttu-id="b8339-129">Por consiguiente, todos los intermediarios pueden tener acceso a esta información, pero nadie puede cambiarla.</span><span class="sxs-lookup"><span data-stu-id="b8339-129">Therefore, this information is available to all intermediaries, but no one can change it.</span></span>

- <span data-ttu-id="b8339-130">Compatibilidad con varios transportes.</span><span class="sxs-lookup"><span data-stu-id="b8339-130">Support for multiple transports.</span></span> <span data-ttu-id="b8339-131">Puede enviar mensajes seguros sobre muchos transportes diferentes, como canalizaciones con nombre y TCP, sin tener que confiar en el protocolo para la seguridad.</span><span class="sxs-lookup"><span data-stu-id="b8339-131">You can send secured messages over many different transports, such as named pipes and TCP, without having to rely on the protocol for security.</span></span> <span data-ttu-id="b8339-132">Con seguridad de nivel de transporte, toda la información de seguridad es delimitada a una conexión de transporte determinada única y no está disponible desde el propio contenido del mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-132">With transport-level security, all the security information is scoped to a single particular transport connection and is not available from the message content itself.</span></span> <span data-ttu-id="b8339-133">La seguridad de mensaje protege el mensaje sin tener en cuenta el transporte que usted utiliza para transmitir el mensaje y el contexto de seguridad se incrusta directamente dentro del mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-133">Message security makes the message secure regardless of what transport you use to transmit the message, and the security context is directly embedded inside the message.</span></span>

- <span data-ttu-id="b8339-134">Compatibilidad con un amplio conjunto de credenciales y notificaciones.</span><span class="sxs-lookup"><span data-stu-id="b8339-134">Support for a wide set of credentials and claims.</span></span> <span data-ttu-id="b8339-135">La seguridad del mensaje está basada en la especificación WS-Security, que proporciona un marco extensible capaz de transmitir cualquier tipo de notificación dentro del mensaje SOAP.</span><span class="sxs-lookup"><span data-stu-id="b8339-135">The message security is based on the WS-Security specification, which provides an extensible framework capable of transmitting any type of claim inside the SOAP message.</span></span> <span data-ttu-id="b8339-136">A diferencia de la seguridad de transporte, el conjunto de mecanismos de autenticación, o notificaciones, que puede usar no está limitado por las funciones de transporte.</span><span class="sxs-lookup"><span data-stu-id="b8339-136">Unlike transport security, the set of authentication mechanisms, or claims, that you can use is not limited by the transport capabilities.</span></span> <span data-ttu-id="b8339-137">La seguridad de mensajes de WCF incluye varios tipos de autenticación y transmisión de notificaciones, y se puede extender para admitir tipos adicionales según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="b8339-137">WCF message security includes multiple types of authentication and claim transmission and can be extended to support additional types as necessary.</span></span> <span data-ttu-id="b8339-138">Por esas razones, por ejemplo, no es posible un escenario de credenciales federado sin seguridad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-138">For those reasons, for example, a federated credentials scenario is not possible without message security.</span></span> <span data-ttu-id="b8339-139">Para obtener más información sobre los escenarios de Federación que WCF admite, consulte [Federación y tokens emitidos](federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="b8339-139">For more information about federation scenarios WCF supports, see [Federation and Issued Tokens](federation-and-issued-tokens.md).</span></span>

## <a name="how-message-and-transport-security-compare"></a><span data-ttu-id="b8339-140">Comparación de seguridad de transporte y seguridad de mensajes </span><span class="sxs-lookup"><span data-stu-id="b8339-140">How Message and Transport Security Compare</span></span>

### <a name="pros-and-cons-of-transport-level-security"></a><span data-ttu-id="b8339-141">Ventajas y desventajas de Seguridad de nivel de transporte </span><span class="sxs-lookup"><span data-stu-id="b8339-141">Pros and Cons of Transport-Level Security</span></span>

<span data-ttu-id="b8339-142">La seguridad de transporte tiene las ventajas siguientes:</span><span class="sxs-lookup"><span data-stu-id="b8339-142">Transport security has the following advantages:</span></span>

- <span data-ttu-id="b8339-143">No requiere que las partes en comunicación entiendan los conceptos de seguridad del nivel de XML.</span><span class="sxs-lookup"><span data-stu-id="b8339-143">Does not require that the communicating parties understand XML-level security concepts.</span></span> <span data-ttu-id="b8339-144">Por ejemplo, esto puede mejorar la interoperabilidad cuando HTTPS se utiliza para proteger la comunicación.</span><span class="sxs-lookup"><span data-stu-id="b8339-144">This can improve the interoperability, for example, when HTTPS is used to secure the communication.</span></span>

- <span data-ttu-id="b8339-145">Rendimiento generalmente mejorado.</span><span class="sxs-lookup"><span data-stu-id="b8339-145">Generally improved performance.</span></span>

- <span data-ttu-id="b8339-146">Los aceleradores de hardware están disponibles.</span><span class="sxs-lookup"><span data-stu-id="b8339-146">Hardware accelerators are available.</span></span>

- <span data-ttu-id="b8339-147">Es posible la transmisión en secuencias.</span><span class="sxs-lookup"><span data-stu-id="b8339-147">Streaming is possible.</span></span>

 <span data-ttu-id="b8339-148">La seguridad de transporte tiene los siguientes inconvenientes:</span><span class="sxs-lookup"><span data-stu-id="b8339-148">Transport security has the following disadvantages:</span></span>

- <span data-ttu-id="b8339-149">Solo salto a salto.</span><span class="sxs-lookup"><span data-stu-id="b8339-149">Hop-to-hop only.</span></span>

- <span data-ttu-id="b8339-150">Conjunto de credenciales limitado y no extensible.</span><span class="sxs-lookup"><span data-stu-id="b8339-150">Limited and inextensible set of credentials.</span></span>

- <span data-ttu-id="b8339-151">Dependiente de transporte.</span><span class="sxs-lookup"><span data-stu-id="b8339-151">Transport-dependent.</span></span>

### <a name="disadvantages-of-message-level-security"></a><span data-ttu-id="b8339-152">Desventajas de Seguridad del nivel de mensaje</span><span class="sxs-lookup"><span data-stu-id="b8339-152">Disadvantages of Message-Level Security</span></span>

<span data-ttu-id="b8339-153">La seguridad de mensaje tiene las siguientes desventajas:</span><span class="sxs-lookup"><span data-stu-id="b8339-153">Message security has the following disadvantages:</span></span>

- <span data-ttu-id="b8339-154">Rendimiento</span><span class="sxs-lookup"><span data-stu-id="b8339-154">Performance</span></span>

- <span data-ttu-id="b8339-155">No puede utilizar transmisión de mensaje.</span><span class="sxs-lookup"><span data-stu-id="b8339-155">Cannot use message streaming.</span></span>

- <span data-ttu-id="b8339-156">Requiere implementación de mecanismos de seguridad de nivel XML y la compatibilidad con WS-Security.</span><span class="sxs-lookup"><span data-stu-id="b8339-156">Requires implementation of XML-level security mechanisms and support for WS-Security specification.</span></span> <span data-ttu-id="b8339-157">Esto podría afectar a la interoperabilidad.</span><span class="sxs-lookup"><span data-stu-id="b8339-157">This might affect the interoperability.</span></span>

## <a name="see-also"></a><span data-ttu-id="b8339-158">Vea también</span><span class="sxs-lookup"><span data-stu-id="b8339-158">See also</span></span>

- [<span data-ttu-id="b8339-159">Protección de servicios y clientes</span><span class="sxs-lookup"><span data-stu-id="b8339-159">Securing Services and Clients</span></span>](securing-services-and-clients.md)
- [<span data-ttu-id="b8339-160">Seguridad de transporte</span><span class="sxs-lookup"><span data-stu-id="b8339-160">Transport Security</span></span>](transport-security.md)
- [<span data-ttu-id="b8339-161">Procedimiento para usar seguridad de transporte y credenciales de mensajes</span><span class="sxs-lookup"><span data-stu-id="b8339-161">How to: Use Transport Security and Message Credentials</span></span>](how-to-use-transport-security-and-message-credentials.md)
- <span data-ttu-id="b8339-162">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span><span class="sxs-lookup"><span data-stu-id="b8339-162">[Microsoft Patterns and Practices, Chapter 3: Implementing Transport and Message Layer Security](https://docs.microsoft.com/previous-versions/msp-n-p/ff647370(v=pandp.10))</span></span>
