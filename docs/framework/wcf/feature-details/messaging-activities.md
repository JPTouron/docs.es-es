---
title: Actividades de mensajería
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 69a0e9a415b10d9c58d04eac27e48b1ed6a78064
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/09/2020
ms.locfileid: "84576400"
---
# <a name="messaging-activities"></a><span data-ttu-id="14983-102">Actividades de mensajería</span><span class="sxs-lookup"><span data-stu-id="14983-102">Messaging activities</span></span>

<span data-ttu-id="14983-103">Las actividades de mensajería permiten a los flujos de trabajo enviar y recibir mensajes de WCF.</span><span class="sxs-lookup"><span data-stu-id="14983-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="14983-104">Al agregar actividades de mensajería a un flujo de trabajo, puede modelar cualquier patrón de intercambio de mensajes (MEP) arbitrariamente complejo.</span><span class="sxs-lookup"><span data-stu-id="14983-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="14983-105">Patrones de intercambio de mensajes</span><span class="sxs-lookup"><span data-stu-id="14983-105">Message exchange patterns</span></span>

<span data-ttu-id="14983-106">Hay tres patrones de intercambio de mensajes básicos:</span><span class="sxs-lookup"><span data-stu-id="14983-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="14983-107">**Datagram** : cuando se usa el datagrama MEP, el cliente envía un mensaje al servicio, pero el servicio no responde.</span><span class="sxs-lookup"><span data-stu-id="14983-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="14983-108">Esto se llama a veces "fire and forget" (dispare y olvídese).</span><span class="sxs-lookup"><span data-stu-id="14983-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="14983-109">Un intercambio de este tipo es uno que exige una confirmación fuera de banda de entrega correcta.</span><span class="sxs-lookup"><span data-stu-id="14983-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="14983-110">El mensaje se podría perderse por el camino y no llegar nunca al servicio.</span><span class="sxs-lookup"><span data-stu-id="14983-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="14983-111">El hecho de que el cliente envíe un mensaje correctamente no garantiza que el servicio haya recibido el mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="14983-112">El datagrama es una unidad de creación fundamental para la mensajería, ya que puede compilar sus propios MEP sobre él.</span><span class="sxs-lookup"><span data-stu-id="14983-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="14983-113">**Solicitud-respuesta** : cuando se usa el MEP de solicitud-respuesta, el cliente envía un mensaje al servicio, el servicio realiza el procesamiento requerido y, a continuación, envía una respuesta de vuelta al cliente.</span><span class="sxs-lookup"><span data-stu-id="14983-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="14983-114">El patrón está compuesto de los pares solicitud-respuesta.</span><span class="sxs-lookup"><span data-stu-id="14983-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="14983-115">Los ejemplos de llamadas de solicitud-respuesta son llamadas a procedimientos remotos (RPC) y solicitudes GET del explorador.</span><span class="sxs-lookup"><span data-stu-id="14983-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="14983-116">Este patrón también se conoce como dúplex medio.</span><span class="sxs-lookup"><span data-stu-id="14983-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="14983-117">**Dúplex** : cuando se usa el MEP dúplex, el cliente y el servicio pueden enviar mensajes entre sí en cualquier orden.</span><span class="sxs-lookup"><span data-stu-id="14983-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="14983-118">El MEP de dúplex es como una conversación telefónica, donde cada palabra que se pronuncia es un mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="14983-119">Las actividades de mensajería le permiten implementar cualquiera de estos MEP básicos, así como cualquier MEP arbitrariamente complejo.</span><span class="sxs-lookup"><span data-stu-id="14983-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="14983-120">Actividades de mensajería</span><span class="sxs-lookup"><span data-stu-id="14983-120">Messaging activities</span></span>

<span data-ttu-id="14983-121">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] define las siguientes actividades de mensajería:</span><span class="sxs-lookup"><span data-stu-id="14983-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="14983-122"><xref:System.ServiceModel.Activities.Send>: Use la actividad <xref:System.ServiceModel.Activities.Send> para enviar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="14983-123"><xref:System.ServiceModel.Activities.SendReply>: Utilice la actividad <xref:System.ServiceModel.Activities.SendReply> para enviar una respuesta a un mensaje recibido.</span><span class="sxs-lookup"><span data-stu-id="14983-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="14983-124">Esta actividad la emplean los servicios de flujo de trabajo al implementar un MEP de solicitud/respuesta.</span><span class="sxs-lookup"><span data-stu-id="14983-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="14983-125"><xref:System.ServiceModel.Activities.Receive>: Use la actividad <xref:System.ServiceModel.Activities.Receive> para recibir un mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="14983-126"><xref:System.ServiceModel.Activities.ReceiveReply>: Use la actividad <xref:System.ServiceModel.Activities.ReceiveReply> para recibir un mensaje de respuesta.</span><span class="sxs-lookup"><span data-stu-id="14983-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="14983-127">Esta actividad la emplean los clientes de servicios de flujo de trabajo al implementar un MEP de solicitud/respuesta.</span><span class="sxs-lookup"><span data-stu-id="14983-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="14983-128">Actividades de mensajería y patrones de intercambio de mensajes</span><span class="sxs-lookup"><span data-stu-id="14983-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="14983-129">Un MEP de datagrama implica que un cliente envía un mensaje y un servicio recibe el mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="14983-130">Si el cliente es un uso del flujo de trabajo, use una actividad <xref:System.ServiceModel.Activities.Send> para enviar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="14983-131">Para recibir ese mensaje en un flujo de trabajo, use una actividad <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="14983-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="14983-132">Cada una de las actividades <xref:System.ServiceModel.Activities.Send> y <xref:System.ServiceModel.Activities.Receive> tiene una propiedad denominada `Content`.</span><span class="sxs-lookup"><span data-stu-id="14983-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="14983-133">Esta propiedad contiene los datos que se envían o se reciben.</span><span class="sxs-lookup"><span data-stu-id="14983-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="14983-134">Al implementar el MEP de solicitud-respuesta, tanto el cliente como el servicio usan pares de actividades.</span><span class="sxs-lookup"><span data-stu-id="14983-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="14983-135">El cliente usa una actividad <xref:System.ServiceModel.Activities.Send> para enviar al mensaje y a una actividad <xref:System.ServiceModel.Activities.ReceiveReply> para recibir la respuesta del servicio.</span><span class="sxs-lookup"><span data-stu-id="14983-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="14983-136">La propiedad <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> asocia entre sí estas dos actividades.</span><span class="sxs-lookup"><span data-stu-id="14983-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="14983-137">Esta propiedad está establecida en la actividad <xref:System.ServiceModel.Activities.Send> que envió el mensaje original.</span><span class="sxs-lookup"><span data-stu-id="14983-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="14983-138">El servicio también usa un par de actividades asociadas: <xref:System.ServiceModel.Activities.Receive> y <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="14983-139">La propiedad <xref:System.ServiceModel.Activities.SendReply.Request%2A> asocia estas dos actividades.</span><span class="sxs-lookup"><span data-stu-id="14983-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="14983-140">Esta propiedad está establecida en la actividad <xref:System.ServiceModel.Activities.Receive> que recibió el mensaje original.</span><span class="sxs-lookup"><span data-stu-id="14983-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="14983-141">Las actividades <xref:System.ServiceModel.Activities.ReceiveReply> y <xref:System.ServiceModel.Activities.SendReply>, como <xref:System.ServiceModel.Activities.Send> y <xref:System.ServiceModel.Activities.Receive>, le permiten enviar una instancia <xref:System.ServiceModel.Channels.Message> o un tipo de contrato de mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="14983-142">Debido a la naturaleza de ejecución prolongada de los flujos de trabajo, es importante que el patrón dúplex de comunicación también admita las conversaciones de ejecución prolongada.</span><span class="sxs-lookup"><span data-stu-id="14983-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="14983-143">Para admitir conversaciones de ejecución prolongada, los clientes que inician la conversación deben proporcionar el servicio con una oportunidad de volver a llamarlo posteriormente cuando los datos estén disponibles.</span><span class="sxs-lookup"><span data-stu-id="14983-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="14983-144">Por ejemplo, se envía una solicitud de pedido de compra para la aprobación del administrador, pero podría no procesarse durante un día, una semana, o incluso un año; el flujo de trabajo que administra la aprobación del pedido de compra debe saber reanudar una vez otorgada la aprobación.</span><span class="sxs-lookup"><span data-stu-id="14983-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="14983-145">Este patrón de comunicación dúplex se admite en flujos de trabajo que usan correlación.</span><span class="sxs-lookup"><span data-stu-id="14983-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="14983-146">Para implementar un patrón dúplex, use las actividades <xref:System.ServiceModel.Activities.Send> y <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="14983-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="14983-147">En la <xref:System.ServiceModel.Activities.Receive> actividad, inicialice una correlación mediante <xref:System.ServiceModel.Activities.CorrelationHandle> .</span><span class="sxs-lookup"><span data-stu-id="14983-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="14983-148">En la actividad <xref:System.ServiceModel.Activities.Send>, establezca ese controlador de correlación como valor de propiedad <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A>.</span><span class="sxs-lookup"><span data-stu-id="14983-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="14983-149">Para obtener más información, consulte [dúplex duradero](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="14983-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="14983-150">La implementación del flujo de trabajo de dúplex mediante una correlación de devolución de llamada ("dúplex duradero") está pensada para conversaciones de ejecución prolongada.</span><span class="sxs-lookup"><span data-stu-id="14983-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="14983-151">Esto no es igual que el dúplex de WCF con contratos de devolución de llamada, donde la conversación es de ejecución reducida (la duración del canal).</span><span class="sxs-lookup"><span data-stu-id="14983-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="14983-152">Formato de mensajes y actividades de mensajería</span><span class="sxs-lookup"><span data-stu-id="14983-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="14983-153">Las actividades <xref:System.ServiceModel.Activities.Receive> y <xref:System.ServiceModel.Activities.ReceiveReply> tienen una propiedad denominada `Content`.</span><span class="sxs-lookup"><span data-stu-id="14983-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="14983-154">Esta propiedad es del tipo <xref:System.ServiceModel.Activities.ReceiveContent> y representa los datos que recibe la actividad <xref:System.ServiceModel.Activities.Receive> o <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="14983-155">El sistema .NET Framework define dos clases relacionadas denominadas <xref:System.ServiceModel.Activities.ReceiveMessageContent> y <xref:System.ServiceModel.Activities.ReceiveParametersContent>, que se derivan de <xref:System.ServiceModel.Activities.ReceiveContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="14983-156">Establezca la propiedad <xref:System.ServiceModel.Activities.Receive> de la actividad <xref:System.ServiceModel.Activities.ReceiveReply> o `Content` en una instancia de uno de estos tipos para recibir datos en un servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="14983-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="14983-157">El tipo que se va a usar depende del tipo de datos que recibe la actividad.</span><span class="sxs-lookup"><span data-stu-id="14983-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="14983-158">Si la actividad recibe un objeto `Message` o un tipo de contrato de mensaje, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="14983-159">Si la actividad recibe un conjunto de contrato de datos o tipos de XML que se puede serializar, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="14983-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> le permite enviar varios parámetros, mientras que <xref:System.ServiceModel.Activities.ReceiveMessageContent> solo permite enviar un objeto, el mensaje (o tipo de contrato de mensaje).</span><span class="sxs-lookup"><span data-stu-id="14983-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="14983-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> también se puede utilizar con un contrato de datos único o un tipo de XML que se puede serializar.</span><span class="sxs-lookup"><span data-stu-id="14983-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="14983-162">La diferencia entre utilizar la clase <xref:System.ServiceModel.Activities.ReceiveParametersContent> con un parámetro único y el objeto pasado directamente a <xref:System.ServiceModel.Activities.ReceiveMessageContent> es el formato de conexión.</span><span class="sxs-lookup"><span data-stu-id="14983-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="14983-163">El contenido del parámetro se ajusta en un elemento XML que corresponde al nombre de la operación, y el objeto serializado se ajusta en un elemento XML mediante el nombre de parámetro (por ejemplo, `<Echo><msg>Hello, World</msg></Echo>`).</span><span class="sxs-lookup"><span data-stu-id="14983-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="14983-164">El nombre de la operación no ajusta el contenido del mensaje.</span><span class="sxs-lookup"><span data-stu-id="14983-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="14983-165">En su lugar, el objeto serializado se coloca dentro de un elemento XML mediante el nombre de tipo XML completo (por ejemplo, `<string>Hello, World</string>`).</span><span class="sxs-lookup"><span data-stu-id="14983-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="14983-166">Las actividades <xref:System.ServiceModel.Activities.Send> y <xref:System.ServiceModel.Activities.SendReply> también tienen una propiedad denominada `Content`.</span><span class="sxs-lookup"><span data-stu-id="14983-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="14983-167">Esta propiedad es del tipo <xref:System.ServiceModel.Activities.SendContent> y representa datos que envía la actividad <xref:System.ServiceModel.Activities.Send> o <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="14983-168">El sistema .NET Framework define dos tipos relacionados denominados <xref:System.ServiceModel.Activities.SendMessageContent> y <xref:System.ServiceModel.Activities.SendParametersContent>, que se derivan de <xref:System.ServiceModel.Activities.SendContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="14983-169">Establezca la propiedad <xref:System.ServiceModel.Activities.Send> de la actividad <xref:System.ServiceModel.Activities.SendReply> o `Content` en una instancia de uno de estos tipos para enviar datos de un servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="14983-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="14983-170">El tipo que se va a usar depende del tipo de datos que envía la actividad.</span><span class="sxs-lookup"><span data-stu-id="14983-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="14983-171">Si la actividad envía un objeto `Message` o un tipo de contrato de mensaje, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="14983-172">Si la actividad envía un tipo de contrato de datos, use <xref:System.ServiceModel.Activities.SendParametersContent>.</span><span class="sxs-lookup"><span data-stu-id="14983-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="14983-173"><xref:System.ServiceModel.Activities.SendParametersContent> le permite enviar varios parámetros, mientras que <xref:System.ServiceModel.Activities.SendMessageContent> solo permite enviar un objeto, el mensaje (o tipo de contrato de mensaje).</span><span class="sxs-lookup"><span data-stu-id="14983-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="14983-174">Al programar imperiosamente con las actividades de mensajería, use <xref:System.Activities.InArgument%601> y <xref:System.Activities.OutArgument%601> de forma genérica para ajustar los objetos asignados al mensaje o las propiedades de parámetros de las actividades <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive> y <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="14983-175">Se usa <xref:System.Activities.InArgument%601> para <xref:System.ServiceModel.Activities.Send> las <xref:System.ServiceModel.Activities.SendReply> actividades y, y <xref:System.Activities.OutArgument%601> para las <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> actividades y.</span><span class="sxs-lookup"><span data-stu-id="14983-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="14983-176">Los argumentos `In` se usan con las actividades de envío porque los datos se pasan a las actividades.</span><span class="sxs-lookup"><span data-stu-id="14983-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="14983-177">Los argumentos `Out` se usan con las actividades de recepción porque se pasan datos de las actividades, como se muestra en el ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="14983-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="14983-178">Al implementar un servicio de flujo de trabajo que define una operación de solicitud/respuesta que devuelve un valor nulo, debe crear instancias de una actividad <xref:System.ServiceModel.Activities.SendReply> y establecer la propiedad <xref:System.ServiceModel.Activities.SendReply.Content%2A> en una instancia vacía de uno de los tipos de contenido (<xref:System.ServiceModel.Activities.SendMessageContent> o <xref:System.ServiceModel.Activities.SendParametersContent>), tal y como se muestra en el siguiente ejemplo.</span><span class="sxs-lookup"><span data-stu-id="14983-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="14983-179">Agregar referencia de servicio</span><span class="sxs-lookup"><span data-stu-id="14983-179">Add service reference</span></span>

<span data-ttu-id="14983-180">Cuando se llama a un servicio de flujo de trabajo desde una aplicación de flujo de trabajo, Visual Studio 2012 genera actividades de mensajería personalizadas que encapsulan las <xref:System.ServiceModel.Activities.Send> actividades habituales y <xref:System.ServiceModel.Activities.ReceiveReply> utilizadas en un MEP de solicitud/respuesta.</span><span class="sxs-lookup"><span data-stu-id="14983-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="14983-181">Para usar esta característica, haga clic con el botón derecho en el proyecto de cliente en Visual Studio y seleccione **Agregar**  >  **referencia de servicio**.</span><span class="sxs-lookup"><span data-stu-id="14983-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="14983-182">Escriba la dirección base del servicio en el cuadro de dirección y haga clic en Ir.</span><span class="sxs-lookup"><span data-stu-id="14983-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="14983-183">Los servicios disponibles se muestran en el cuadro **servicios:** .</span><span class="sxs-lookup"><span data-stu-id="14983-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="14983-184">Expanda el nodo de servicio para mostrar los contratos admitidos.</span><span class="sxs-lookup"><span data-stu-id="14983-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="14983-185">Seleccione el contrato al que desea llamar y la lista de operaciones disponibles se muestra en el cuadro **operaciones** .</span><span class="sxs-lookup"><span data-stu-id="14983-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="14983-186">Después, puede especificar el espacio de nombres para la actividad generada y hacer clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="14983-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="14983-187">A continuación, verá un cuadro de diálogo que dice que la operación se ha completado correctamente y que las actividades personalizadas generadas se encontrarán en el cuadro de herramientas tras haber recompilado el proyecto.</span><span class="sxs-lookup"><span data-stu-id="14983-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="14983-188">Hay una actividad para cada operación definida en el contrato de servicios.</span><span class="sxs-lookup"><span data-stu-id="14983-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="14983-189">Después de recompilar el proyecto, puede arrastrar y colocar las actividades personalizadas en el flujo de trabajo y establecer cualquier propiedad necesaria en la ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="14983-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="14983-190">Plantillas de actividad de mensajería</span><span class="sxs-lookup"><span data-stu-id="14983-190">Messaging activity templates</span></span>

<span data-ttu-id="14983-191">Para facilitar la configuración de un MEP de solicitud/respuesta en el cliente y el servicio, Visual Studio 2012 proporciona dos plantillas de actividad de mensajería.</span><span class="sxs-lookup"><span data-stu-id="14983-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="14983-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` se usa en el servicio y `System.ServiceModel.Activities.Design.SendAndReceiveReply` se usa en el cliente.</span><span class="sxs-lookup"><span data-stu-id="14983-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="14983-193">En ambos casos, las plantillas agregan las actividades de mensajería adecuadas al flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="14983-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="14983-194">En el servicio, `System.ServiceModel.Activities.Design.ReceiveAndSendReply` agrega una actividad <xref:System.ServiceModel.Activities.Receive> seguida por una actividad <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="14983-195">La propiedad <xref:System.ServiceModel.Activities.SendReply.Request> se establece en la actividad <xref:System.ServiceModel.Activities.Receive> de forma automática.</span><span class="sxs-lookup"><span data-stu-id="14983-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="14983-196">En el cliente, `System.ServiceModel.Activities.Design.SendAndReceiveReply` agrega una actividad <xref:System.ServiceModel.Activities.Send> seguida por <xref:System.ServiceModel.Activities.ReceiveReply>.</span><span class="sxs-lookup"><span data-stu-id="14983-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="14983-197">La propiedad <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> se establece en la actividad <xref:System.ServiceModel.Activities.Send> de forma automática.</span><span class="sxs-lookup"><span data-stu-id="14983-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="14983-198">Para utilizar estas plantillas, simplemente arrastre y coloque la plantilla adecuada en el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="14983-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="14983-199">Actividades de mensajería y transacciones</span><span class="sxs-lookup"><span data-stu-id="14983-199">Messaging activities and transactions</span></span>

<span data-ttu-id="14983-200">Cuando se realiza una llamada a un servicio de flujo de trabajo, puede desear hacer fluir una transacción a una operación del servicio.</span><span class="sxs-lookup"><span data-stu-id="14983-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="14983-201">Para ello, coloque la actividad <xref:System.ServiceModel.Activities.Receive> dentro de una actividad <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="14983-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="14983-202">La actividad <xref:System.ServiceModel.Activities.TransactedReceiveScope> contiene una actividad `Receive` y un cuerpo.</span><span class="sxs-lookup"><span data-stu-id="14983-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="14983-203">La transacción que ha fluido al servicio permanece ambiente a lo largo de la ejecución del cuerpo de <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span><span class="sxs-lookup"><span data-stu-id="14983-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="14983-204">Se completa la transacción cuando el cuerpo termina de ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="14983-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="14983-205">Para obtener más información acerca de los flujos de trabajo y las transacciones, consulte [transacciones de flujo de trabajo](../../windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="14983-205">For more information about workflows and transactions see [Workflow Transactions](../../windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="14983-206">Vea también</span><span class="sxs-lookup"><span data-stu-id="14983-206">See also</span></span>

- [<span data-ttu-id="14983-207">Enviar y recibir errores en los servicios de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="14983-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="14983-208">Crear un servicio de flujo de trabajo de larga ejecución</span><span class="sxs-lookup"><span data-stu-id="14983-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
