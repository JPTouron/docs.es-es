---
title: Información general de Workflow Services
ms.date: 03/30/2017
ms.assetid: e536dda3-e286-441e-99a7-49ddc004b646
ms.openlocfilehash: 7055ea6e6b6d6a5d7bef8d5ff465d2eb0c838bf6
ms.sourcegitcommit: 9c45035b781caebc63ec8ecf912dc83fb6723b1f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/25/2020
ms.locfileid: "88812190"
---
# <a name="workflow-services-overview"></a><span data-ttu-id="ada4e-102">Información general de Workflow Services</span><span class="sxs-lookup"><span data-stu-id="ada4e-102">Workflow services overview</span></span>

<span data-ttu-id="ada4e-103">Los servicios de flujo de trabajo son servicios basados en WCF que se implementan mediante flujos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-103">Workflow services are WCF-based services that are implemented using workflows.</span></span> <span data-ttu-id="ada4e-104">Los servicios de flujo de trabajo son flujos de trabajo que utilizan las actividades de mensajería para enviar y recibir mensajes Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="ada4e-104">Workflow services are workflows that use the messaging activities to send and receive Windows Communication Foundation (WCF) messages.</span></span> <span data-ttu-id="ada4e-105">.NET Framework 4.5 presenta varias actividades de mensajería que permiten enviar y recibir mensajes dentro de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-105">.NET Framework 4.5 introduces a number of messaging activities that allow you send and receive messages from within a workflow.</span></span> <span data-ttu-id="ada4e-106">Para obtener más información sobre las actividades de mensajería y cómo se pueden usar para implementar distintos patrones de intercambio de mensajes, vea [actividades de mensajería](messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="ada4e-106">For more information about messaging activities and how they can be used to implement different message exchange patterns, see [Messaging Activities](messaging-activities.md).</span></span>

## <a name="benefits-of-using-workflow-services"></a><span data-ttu-id="ada4e-107">Ventajas del uso de los servicios de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="ada4e-107">Benefits of using workflow services</span></span>

<span data-ttu-id="ada4e-108">Cuando las aplicaciones están cada vez más distribuidas, los servicios individuales se convierten en los responsables de llamar a otros servicios para descargar parte del trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-108">As applications become increasingly distributed, individual services become responsible for calling other services to offload some of the work.</span></span> <span data-ttu-id="ada4e-109">La implementación de estas llamadas como operaciones asincrónicas crea cierta complejidad en el código.</span><span class="sxs-lookup"><span data-stu-id="ada4e-109">Implementing these calls as asynchronous operations introduces some complexity into the code.</span></span> <span data-ttu-id="ada4e-110">El control de errores agrega complejidad, ya que hay que administrar excepciones y proporcionar información de seguimiento detallada.</span><span class="sxs-lookup"><span data-stu-id="ada4e-110">Error handling adds additional complexity in the form of handling exceptions and providing detailed tracking information.</span></span> <span data-ttu-id="ada4e-111">Algunos servicios suelen ejecutarse durante mucho tiempo y pueden ocupar valiosos recursos del sistema mientras esperan recibir información.</span><span class="sxs-lookup"><span data-stu-id="ada4e-111">Some services are often long running and can take up valuable system resources while waiting for input.</span></span> <span data-ttu-id="ada4e-112">Debido a estos problemas, las aplicaciones distribuidas suelen ser muy complejas y difíciles de escribir y mantener.</span><span class="sxs-lookup"><span data-stu-id="ada4e-112">Because of these issues, distributed applications are often very complex and difficult to write and maintain.</span></span> <span data-ttu-id="ada4e-113">Los flujos de trabajo son una manera natural de expresar la coordinación del trabajo asincrónico, sobre todo las llamadas a servicios externos.</span><span class="sxs-lookup"><span data-stu-id="ada4e-113">Workflows are a natural way to express the coordination of asynchronous work, especially calls to external services.</span></span> <span data-ttu-id="ada4e-114">Los flujos de trabajo también son eficaces para representar procesos de negocio de ejecución prolongada.</span><span class="sxs-lookup"><span data-stu-id="ada4e-114">Workflows are also effective at representing long-running business processes.</span></span> <span data-ttu-id="ada4e-115">Son estas calidades las que convierten el flujo de trabajo en un gran recurso para compilar servicios en un entorno distribuido.</span><span class="sxs-lookup"><span data-stu-id="ada4e-115">It is these qualities that make the workflow a great asset to building services in a distributed environment.</span></span>

## <a name="implementing-a-workflow-service"></a><span data-ttu-id="ada4e-116">Implementación de un servicio de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="ada4e-116">Implementing a workflow service</span></span>

<span data-ttu-id="ada4e-117">Al implementar un servicio WCF, se define una serie de contratos que describen el servicio y los datos que envía y recibe.</span><span class="sxs-lookup"><span data-stu-id="ada4e-117">When implementing a WCF service, you define a number of contracts that describe the service and the data that it sends and receives.</span></span> <span data-ttu-id="ada4e-118">Los datos se representan como contratos de datos y contratos de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ada4e-118">The data is represented as data contracts and message contracts.</span></span> <span data-ttu-id="ada4e-119">WCF y los servicios de flujo de trabajo usan definiciones de contratos de datos y de mensajes como parte de las descripciones del servicio.</span><span class="sxs-lookup"><span data-stu-id="ada4e-119">Both WCF and workflow services use data contract and message contract definitions as part of service descriptions.</span></span> <span data-ttu-id="ada4e-120">El servicio expone metadatos (con formato de WSDL) para describir las operaciones del servicio.</span><span class="sxs-lookup"><span data-stu-id="ada4e-120">The service itself exposes metadata (in the form of WSDL) to describe the operations of the service.</span></span> <span data-ttu-id="ada4e-121">En WCF, los contratos de servicios y los contratos de operaciones definen el servicio y las operaciones admitidos.</span><span class="sxs-lookup"><span data-stu-id="ada4e-121">In WCF, service contracts and operation contracts define the service and the operations it supports.</span></span> <span data-ttu-id="ada4e-122">Sin embargo, en un servicio de flujo de trabajo, estos contratos forman parte del propio proceso de negocio.</span><span class="sxs-lookup"><span data-stu-id="ada4e-122">However in a workflow service, these contracts are part of the business process itself.</span></span> <span data-ttu-id="ada4e-123">Se exponen en metadatos mediante un proceso llamado inferencia del contrato.</span><span class="sxs-lookup"><span data-stu-id="ada4e-123">They are exposed in metadata by a process called contract inference.</span></span> <span data-ttu-id="ada4e-124">Cuando un servicio de flujo de trabajo se hospeda mediante <xref:System.ServiceModel.Activities.WorkflowServiceHost>, se examina la definición de flujo de trabajo y se genera un contrato en función del conjunto de actividades de mensajería presentes en el flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-124">When a workflow service is hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost>, the workflow definition is examined and a contract is generated based on the set of messaging activities found in the workflow.</span></span> <span data-ttu-id="ada4e-125">En especial, se emplean las siguientes actividades y propiedades para generar el contrato:</span><span class="sxs-lookup"><span data-stu-id="ada4e-125">In particular, the following activities and properties are used to generate the contract:</span></span>

<span data-ttu-id="ada4e-126"><xref:System.ServiceModel.Activities.Receive> Actividad</span><span class="sxs-lookup"><span data-stu-id="ada4e-126"><xref:System.ServiceModel.Activities.Receive> Activity</span></span>

- <xref:System.ServiceModel.Activities.Receive.ServiceContractName%2A>

- <xref:System.ServiceModel.Activities.Receive.OperationName%2A>

- <xref:System.ServiceModel.Activities.Receive.Action%2A>

<span data-ttu-id="ada4e-127"><xref:System.ServiceModel.Activities.SendReply> Actividad</span><span class="sxs-lookup"><span data-stu-id="ada4e-127"><xref:System.ServiceModel.Activities.SendReply> Activity</span></span>

- <xref:System.ServiceModel.Activities.SendReply.Action%2A>

<span data-ttu-id="ada4e-128"><xref:System.ServiceModel.Activities.TransactedReceiveScope> Actividad</span><span class="sxs-lookup"><span data-stu-id="ada4e-128"><xref:System.ServiceModel.Activities.TransactedReceiveScope> Activity</span></span>

<span data-ttu-id="ada4e-129">El resultado final de la inferencia del contrato es una descripción del servicio que utiliza las mismas estructuras de datos que los servicios WCF y los contratos de operación.</span><span class="sxs-lookup"><span data-stu-id="ada4e-129">The end result of contract inference is a description of the service using the same data structures as WCF services and operation contracts.</span></span> <span data-ttu-id="ada4e-130">A continuación, esta información se utiliza para exponer WSDL para el servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-130">This information is then used to expose WSDL for the workflow service.</span></span>

> [!NOTE]
> [!INCLUDE[netfx_current_short](../../../../includes/netfx-current-short-md.md)] <span data-ttu-id="ada4e-131">no le permite escribir servicios de flujo de trabajo mediante una definición de contrato existente sin soporte de herramientas adicional.</span><span class="sxs-lookup"><span data-stu-id="ada4e-131">does not allow you to write workflow services using an existing contract definition without some additional tooling support.</span></span> <span data-ttu-id="ada4e-132">El proceso de inferencia del contrato descrito previamente crea los contratos de servicios de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-132">Workflow service contracts are created by the contract inference process discussed previously.</span></span> <span data-ttu-id="ada4e-133">Sin embargo, los contratos de mensajes y los contratos de datos poseen un soporte completo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-133">Message contracts and data contracts are fully supported, however.</span></span>

## <a name="workflow-services-and-msmq-based-bindings"></a><span data-ttu-id="ada4e-134">Servicios de flujo de trabajo y enlaces basados en MSMQ</span><span class="sxs-lookup"><span data-stu-id="ada4e-134">Workflow services and MSMQ-based bindings</span></span>

<span data-ttu-id="ada4e-135">WCF define dos enlaces basados en MSMQ: <xref:System.ServiceModel.NetMsmqBinding> y <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="ada4e-135">WCF defines two MSMQ-based bindings <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  <span data-ttu-id="ada4e-136">Los enlaces basados en MSMQ se utilizan a menudo con servicios de flujo de trabajo debido a la naturaleza de ejecución prolongada de dichos servicios.</span><span class="sxs-lookup"><span data-stu-id="ada4e-136">MSMQ-based bindings are often used with workflow services because of the long-running nature of such services.</span></span> <span data-ttu-id="ada4e-137">Los enlaces basados en MSMQ tienen una propiedad `ValidityDuration` que especifica qué longitud pueden tener los mensajes de MSMQ para considerarse válidos.</span><span class="sxs-lookup"><span data-stu-id="ada4e-137">The MSMQ-based bindings have a `ValidityDuration` property that specifies how long MSMQ messages can assume to be valid.</span></span> <span data-ttu-id="ada4e-138">Debido a la naturaleza de ejecución prolongada de los servicios de flujo de trabajo, es posible que la duración de validez de un mensaje de MSMQ pueda finalizar antes de que el servicio de flujo de trabajo pueda procesarlo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-138">Because of the long running nature of workflow services it is possible that the validity duration of a MSMQ message may elapse before the workflow service can process it.</span></span> <span data-ttu-id="ada4e-139">Por lo tanto, es muy importante establecer la duración de validez de un enlace de MSMQ a un valor adecuado.</span><span class="sxs-lookup"><span data-stu-id="ada4e-139">It is therefore very important to set the validity duration of a MSMQ binding to an appropriate value.</span></span> <span data-ttu-id="ada4e-140">Este valor se debe elegirse dependiendo del flujo de trabajo y de cómo procesa los mensajes.</span><span class="sxs-lookup"><span data-stu-id="ada4e-140">This value must be chosen based on the workflow and how it processes messages.</span></span> <span data-ttu-id="ada4e-141">Por ejemplo, si tiene un flujo de trabajo con una actividad <xref:System.ServiceModel.Activities.Receive> seguido de una actividad personalizada que tarda 10 minutos en ejecutarse y seguido de otra actividad <xref:System.ServiceModel.Activities.Receive>, el valor correcto de `ValidityDuration` sería superior a 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="ada4e-141">For example if you have a workflow with a <xref:System.ServiceModel.Activities.Receive> activity followed by a custom activity that takes 10 minutes to run, followed by another <xref:System.ServiceModel.Activities.Receive> activity, the correct value for `ValidityDuration` would be greater than 10 minutes.</span></span>

## <a name="hosting-a-workflow-service"></a><span data-ttu-id="ada4e-142">Hospedaje de un servicio de flujo de trabajo</span><span class="sxs-lookup"><span data-stu-id="ada4e-142">Hosting a workflow service</span></span>

<span data-ttu-id="ada4e-143">Al igual que los servicios WCF, los servicios de flujo de trabajo deben estar hospedados.</span><span class="sxs-lookup"><span data-stu-id="ada4e-143">Like WCF services, workflow services must be hosted.</span></span> <span data-ttu-id="ada4e-144">Los servicios WCF usan la <xref:System.ServiceModel.ServiceHost> clase para hospedar servicios y servicios de flujo de trabajo usan <xref:System.ServiceModel.Activities.WorkflowServiceHost> para hospedar servicios.</span><span class="sxs-lookup"><span data-stu-id="ada4e-144">WCF services use the <xref:System.ServiceModel.ServiceHost> class to host services and workflow services use <xref:System.ServiceModel.Activities.WorkflowServiceHost> to host services.</span></span> <span data-ttu-id="ada4e-145">Al igual que los servicios WCF, los servicios de flujo de trabajo se pueden hospedar de varias maneras, por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="ada4e-145">Like WCF services, workflow services can be hosted in a variety of ways, for example:</span></span>

- <span data-ttu-id="ada4e-146">En una aplicación de .NET Framework administrados.</span><span class="sxs-lookup"><span data-stu-id="ada4e-146">In a managed .NET Framework application.</span></span>

- <span data-ttu-id="ada4e-147">En Internet Information Services (IIS).</span><span class="sxs-lookup"><span data-stu-id="ada4e-147">In Internet Information Services (IIS).</span></span>

- <span data-ttu-id="ada4e-148">En el Servicio de activación de procesos de Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="ada4e-148">In Windows Process Activation Service (WAS).</span></span>

- <span data-ttu-id="ada4e-149">En un servicio Windows administrado.</span><span class="sxs-lookup"><span data-stu-id="ada4e-149">In a managed Windows Service.</span></span>

<span data-ttu-id="ada4e-150">Los servicios de flujo de trabajo hospedados en una aplicación .NET Framework administrada o en un servicio de Windows administrado crean una instancia de la <xref:System.ServiceModel.Activities.WorkflowServiceHost> clase y la pasan a una instancia de <xref:System.ServiceModel.Activities.WorkflowService> que contiene la definición de flujo de trabajo dentro de la <xref:System.ServiceModel.Activities.WorkflowService.Body%2A> propiedad.</span><span class="sxs-lookup"><span data-stu-id="ada4e-150">Workflow services hosted in a managed .NET Framework application or a managed Windows service create an instance of the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class and pass it an instance of the <xref:System.ServiceModel.Activities.WorkflowService> that contains the workflow definition within the <xref:System.ServiceModel.Activities.WorkflowService.Body%2A> property.</span></span> <span data-ttu-id="ada4e-151">Una definición de flujo de trabajo que contiene actividades de mensajería se expone como un servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-151">A workflow definition that contains messaging activities is exposed as a workflow service.</span></span>

<span data-ttu-id="ada4e-152">Para hospedar un servicio de flujo de trabajo en IIS o WAS, coloque el archivo .xamlx que contiene la definición del servicio de flujo de trabajo en un directorio virtual.</span><span class="sxs-lookup"><span data-stu-id="ada4e-152">To host a workflow service in IIS or WAS, place the .xamlx file that contains the workflow service definition into a virtual directory.</span></span> <span data-ttu-id="ada4e-153">Se crea automáticamente un punto de conexión predeterminado (mediante <xref:System.ServiceModel.BasicHttpBinding> ) para obtener más información, vea [configuración simplificada](../simplified-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="ada4e-153">A default endpoint (using <xref:System.ServiceModel.BasicHttpBinding>) is created automatically For more information, see [Simplified Configuration](../simplified-configuration.md).</span></span> <span data-ttu-id="ada4e-154">También puede colocar un archivo Web.config en el directorio virtual para especificar sus propios puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="ada4e-154">You can also place a Web.config file in the virtual directory to specify your own endpoints.</span></span> <span data-ttu-id="ada4e-155">Si la definición de flujo de trabajo es en un ensamblado, puede colocar un archivo .svc en el directorio virtual y el ensamblado de flujo de trabajo en el directorio App_Code.</span><span class="sxs-lookup"><span data-stu-id="ada4e-155">If your workflow definition is in an assembly you can place a .svc file in the virtual directory and the workflow assembly in the App_Code directory.</span></span> <span data-ttu-id="ada4e-156">El archivo .svc debe especificar el generador de host de servicio y la clase que implementa el servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-156">The .svc file must specify the service host factory and the class that implements the workflow service.</span></span> <span data-ttu-id="ada4e-157">En el siguiente ejemplo, se indica cómo especificar el generador de host de servicio y especificar la clase que implementa el servicio de flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="ada4e-157">The following example shows how to specify the service host factory and specify the class that implements the workflow service.</span></span>

```aspx-csharp
<%@ServiceHost Factory="System.ServiceModel.Activities.Activation.WorkflowServiceHostFactory"
Service="EchoService"%>
```
