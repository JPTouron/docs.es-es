---
title: Configuración de HTTP y HTTPS
description: Obtenga información sobre cómo configurar HTTP/HTTPS para permitir que los servicios y clientes WCF se comuniquen. Configure un registro de direcciones URL y una excepción de Firewall mediante Netsh.exe.
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: fbff78ff8e2c5c4fa73a56a3fdc15163596aa985
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/23/2020
ms.locfileid: "85245146"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="22f6e-104">Configuración de HTTP y HTTPS</span><span class="sxs-lookup"><span data-stu-id="22f6e-104">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="22f6e-105">Los servicios y clientes de WCF se pueden comunicar a través de HTTP y HTTPS,</span><span class="sxs-lookup"><span data-stu-id="22f6e-105">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="22f6e-106">que se configuran mediante el uso de Internet Information Services (IIS) o de una herramienta de la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="22f6e-106">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="22f6e-107">Cuando un servicio WCF se hospeda bajo IIS y necesita la configuración de HTTP o HTTPS se puede configurar en IIS (con la herramienta inetmgr.exe).</span><span class="sxs-lookup"><span data-stu-id="22f6e-107">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="22f6e-108">Si el servicio WCF se autohospeda, la configuración de HTTP o HTTPS se configura usando una herramienta de la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="22f6e-108">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="22f6e-109">Como mínimo, desea configurar un registro de direcciones URL y agregar una excepción de Firewall para la dirección URL que utilizará el servicio.</span><span class="sxs-lookup"><span data-stu-id="22f6e-109">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="22f6e-110">Puede configurar estas opciones con la herramienta Netsh.exe.</span><span class="sxs-lookup"><span data-stu-id="22f6e-110">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="22f6e-111">Configurar reservas de espacio de nombres</span><span class="sxs-lookup"><span data-stu-id="22f6e-111">Configuring namespace reservations</span></span>

<span data-ttu-id="22f6e-112">La reserva de espacio de nombres asigna los derechos de una parte del espacio de nombres HTTP URL a un grupo de usuarios determinado.</span><span class="sxs-lookup"><span data-stu-id="22f6e-112">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="22f6e-113">Una reserva da derecho a esos usuarios para crear servicios que escuchen en esa parte del espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="22f6e-113">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="22f6e-114">Las reservas son prefijos de dirección URL, lo que significa que la reserva cubre todos los subtrazados de la ruta de acceso de reserva.</span><span class="sxs-lookup"><span data-stu-id="22f6e-114">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="22f6e-115">Las reservas de espacio de nombres permiten dos maneras de utilizar los caracteres comodín.</span><span class="sxs-lookup"><span data-stu-id="22f6e-115">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="22f6e-116">La documentación de la API del servidor HTTP describe el [orden de resolución entre notificaciones de espacios de nombres que impliquen caracteres comodín](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="22f6e-116">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="22f6e-117">Una aplicación en ejecución puede crear una solicitud similar para agregar los registros de espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="22f6e-117">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="22f6e-118">Los registros y reservas compiten por partes del espacio de nombres.</span><span class="sxs-lookup"><span data-stu-id="22f6e-118">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="22f6e-119">Una reserva puede tener prioridad sobre un registro según el orden de resolución dado en el [orden de resolución entre notificaciones de espacios de nombres que impliquen caracteres comodín](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="22f6e-119">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="22f6e-120">En este caso, la reserva bloquea a la aplicación en ejecución la posibilidad de recibir solicitudes.</span><span class="sxs-lookup"><span data-stu-id="22f6e-120">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="22f6e-121">En el ejemplo siguiente se usa la herramienta Netsh.exe:</span><span class="sxs-lookup"><span data-stu-id="22f6e-121">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="22f6e-122">Este comando agrega una reserva de direcciones URL para el espacio de nombres de la dirección URL especificada para la cuenta Dominio\usuario.</span><span class="sxs-lookup"><span data-stu-id="22f6e-122">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="22f6e-123">Para obtener más información sobre el uso del comando netsh, escriba `netsh http add urlacl /?` en un símbolo del sistema y presione Entrar.</span><span class="sxs-lookup"><span data-stu-id="22f6e-123">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="22f6e-124">Configuración de una excepción de Firewall</span><span class="sxs-lookup"><span data-stu-id="22f6e-124">Configuring a firewall exception</span></span>

<span data-ttu-id="22f6e-125">Cuando se autohospeda un servicio de WCF que se comunica sobre HTTP, se debe agregar una excepción a la configuración del firewall para permitir conexiones de entrada usando una dirección URL determinada.</span><span class="sxs-lookup"><span data-stu-id="22f6e-125">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="22f6e-126">Configuración de certificados SSL</span><span class="sxs-lookup"><span data-stu-id="22f6e-126">Configuring SSL certificates</span></span>

<span data-ttu-id="22f6e-127">El protocolo SSL (Capa de sockets seguros) usa los certificados de cliente y servidor para almacenar las claves de cifrado.</span><span class="sxs-lookup"><span data-stu-id="22f6e-127">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="22f6e-128">El servidor proporciona su certificado SSL cuando se realiza una conexión, para que el cliente pueda comprobar la identidad del servidor.</span><span class="sxs-lookup"><span data-stu-id="22f6e-128">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="22f6e-129">El servidor también puede solicitar un certificado del cliente para proporcionar una autenticación mutua de ambos lados de la conexión.</span><span class="sxs-lookup"><span data-stu-id="22f6e-129">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="22f6e-130">Los certificados se almacenan en un almacén centralizado según la dirección IP y el número de puerto de la conexión.</span><span class="sxs-lookup"><span data-stu-id="22f6e-130">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="22f6e-131">La dirección IP 0.0.0.0 especial coincide con cualquier dirección IP del equipo local.</span><span class="sxs-lookup"><span data-stu-id="22f6e-131">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="22f6e-132">Tenga en cuenta que el almacén de certificados no distingue las direcciones URL en función de la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="22f6e-132">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="22f6e-133">Los servicios con la misma dirección IP y combinación de puertos deben compartir los certificados aun cuando la ruta de acceso en la dirección URL de los servicios sea diferente.</span><span class="sxs-lookup"><span data-stu-id="22f6e-133">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="22f6e-134">Para obtener instrucciones paso a paso, consulte [Cómo: configurar un puerto con un certificado SSL](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="22f6e-134">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="22f6e-135">Configuración de la lista de escuchas de IP</span><span class="sxs-lookup"><span data-stu-id="22f6e-135">Configuring the IP Listen List</span></span>

<span data-ttu-id="22f6e-136">La API de servidor HTTP solo se enlaza una vez a una dirección IP y a un puerto, una vez que el usuario haya registrado una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="22f6e-136">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="22f6e-137">De forma predeterminada, el API de servidor HTTP se enlaza al puerto en la URL de todas las direcciones IP del equipo.</span><span class="sxs-lookup"><span data-stu-id="22f6e-137">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="22f6e-138">Se produce un conflicto si una aplicación que no usa la API del servidor HTTP se ha enlazado previamente a esa combinación de dirección IP y puerto.</span><span class="sxs-lookup"><span data-stu-id="22f6e-138">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="22f6e-139">La lista de escucha de IP permite que los servicios WCF coexistan con las aplicaciones que usan un puerto para algunas de las direcciones IP de la máquina.</span><span class="sxs-lookup"><span data-stu-id="22f6e-139">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="22f6e-140">Si la lista de escucha de IP contiene cualquier entrada, el API de servidor HTTP solo se enlaza a esas direcciones IP que la lista especifica.</span><span class="sxs-lookup"><span data-stu-id="22f6e-140">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="22f6e-141">Para modificar la lista de escuchas de IP se requieren privilegios de administrador.</span><span class="sxs-lookup"><span data-stu-id="22f6e-141">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="22f6e-142">Use la herramienta Netsh para modificar la lista de escucha IP, como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="22f6e-142">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="22f6e-143">Otras opciones de configuración</span><span class="sxs-lookup"><span data-stu-id="22f6e-143">Other configuration settings</span></span>

<span data-ttu-id="22f6e-144">Cuando se use la clase <xref:System.ServiceModel.WSDualHttpBinding>, la conexión de cliente utiliza valores predeterminados compatibles con reservas de espacio de nombres y el Firewall de Windows.</span><span class="sxs-lookup"><span data-stu-id="22f6e-144">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="22f6e-145">Si elige personalizar la dirección base de cliente de una conexión dual, también debe configurar esta configuración de HTTP en el cliente para que coincida con la nueva dirección.</span><span class="sxs-lookup"><span data-stu-id="22f6e-145">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="22f6e-146">La API del servidor HTTP tiene algunas opciones de configuración avanzadas que no están disponibles a través de HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="22f6e-146">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="22f6e-147">Estos valores se mantienen en el Registro y se aplican a todas las aplicaciones que se ejecutan en los sistemas que utilizan los API de servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="22f6e-147">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="22f6e-148">Para obtener información sobre esta configuración, vea [Http.sys configuración del registro para IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="22f6e-148">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="22f6e-149">La mayoría de los usuarios no necesitan cambiar esta configuración.</span><span class="sxs-lookup"><span data-stu-id="22f6e-149">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="22f6e-150">Vea también</span><span class="sxs-lookup"><span data-stu-id="22f6e-150">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="22f6e-151">Procedimiento para configurar un puerto con un certificado SSL</span><span class="sxs-lookup"><span data-stu-id="22f6e-151">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
