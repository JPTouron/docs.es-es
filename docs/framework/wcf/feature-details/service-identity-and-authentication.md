---
title: Identidad del servicio y autenticación
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: 6c12c3aadf53f9fddef2f0b0124994db15565cb5
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/09/2020
ms.locfileid: "84600379"
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="c30d1-102">Identidad del servicio y autenticación</span><span class="sxs-lookup"><span data-stu-id="c30d1-102">Service Identity and Authentication</span></span>
<span data-ttu-id="c30d1-103">La identidad del *extremo* de un servicio es un valor generado a partir del lenguaje de descripción de servicios web (WSDL) del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-103">A service's *endpoint identity* is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="c30d1-104">Este valor, propagado a cualquier cliente, se utiliza para autenticar el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="c30d1-105">Después de que el cliente inicie una comunicación con un punto de conexión y el servicio se autentique a sí mismo ante el cliente, el cliente compara el valor de identidad del punto de conexión con el valor real devuelto por el proceso de autenticación del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="c30d1-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="c30d1-106">Si coinciden, se asegura al cliente que se ha puesto en contacto con el punto de conexión de servicio esperado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="c30d1-107">Esto funciona como una protección contra la *suplantación de identidad (phishing)* al impedir que un cliente se redirija a un punto de conexión hospedado por un servicio malintencionado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="c30d1-108">Para obtener una aplicación de ejemplo que muestra la configuración de identidad, vea [ejemplo de identidad de servicio](../samples/service-identity-sample.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../samples/service-identity-sample.md).</span></span> <span data-ttu-id="c30d1-109">Para obtener más información sobre los extremos y las direcciones de punto de conexión, vea [Addresses](endpoint-addresses.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-109">For more information about endpoints and endpoint addresses, see [Addresses](endpoint-addresses.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c30d1-110">Al utilizar NT LanMan (NTLM) para la autenticación, no se comprueba la identidad del servicio porque, bajo NTLM, el cliente no puede autenticar el servidor.</span><span class="sxs-lookup"><span data-stu-id="c30d1-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="c30d1-111">Se utiliza NTLM cuando los equipos forman parte de un grupo de trabajo de Windows, o al ejecutar una versión anterior de Windows que no admite la autenticación Kerberos.</span><span class="sxs-lookup"><span data-stu-id="c30d1-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="c30d1-112">Cuando el cliente inicia un canal seguro para enviar un mensaje a un servicio sobre él, la infraestructura de Windows Communication Foundation (WCF) autentica el servicio y solo envía el mensaje si la identidad del servicio coincide con la identidad especificada en la dirección del extremo que usa el cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-112">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="c30d1-113">El procesamiento de la identidad consta de las siguientes fases:</span><span class="sxs-lookup"><span data-stu-id="c30d1-113">Identity processing consists of the following stages:</span></span>  
  
- <span data-ttu-id="c30d1-114">En la fase de diseño, el programador del cliente determina la identidad del servicio desde los metadatos del punto de conexión (se expone a través de WSDL).</span><span class="sxs-lookup"><span data-stu-id="c30d1-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
- <span data-ttu-id="c30d1-115">En el tiempo de ejecución, la aplicación de cliente comprueba las notificaciones de las credenciales de seguridad del servicio antes de enviar ningún mensaje al servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="c30d1-116">El procesamiento de identidad en el cliente es análogo a la autenticación del cliente en el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="c30d1-117">Un servicio seguro no ejecuta código hasta que se hayan autenticado las credenciales del cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="c30d1-118">Del mismo modo, el cliente no envía mensajes al servicio hasta que las credenciales del servicio se hayan autenticado en función de lo que se conoce de antemano de los metadatos del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="c30d1-119">La propiedad <xref:System.ServiceModel.EndpointAddress.Identity%2A> de la clase <xref:System.ServiceModel.EndpointAddress> representa la identidad del servicio llamada por el cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="c30d1-120">El servicio publica la <xref:System.ServiceModel.EndpointAddress.Identity%2A> en sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="c30d1-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="c30d1-121">Cuando el desarrollador del cliente ejecuta la [herramienta de utilidad de metadatos de ServiceModel (SvcUtil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) con el punto de conexión de servicio, la configuración generada contiene el valor de la propiedad del servicio <xref:System.ServiceModel.EndpointAddress.Identity%2A> .</span><span class="sxs-lookup"><span data-stu-id="c30d1-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="c30d1-122">La infraestructura de WCF (si se configura con seguridad) comprueba que el servicio posee la identidad especificada.</span><span class="sxs-lookup"><span data-stu-id="c30d1-122">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="c30d1-123">Los metadatos contienen la identidad esperada del servicio, por lo que se recomienda que exponga los metadatos del servicio a través de medios seguros, como, por ejemplo, creando un extremo HTTPS para el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="c30d1-124">Para obtener más información, consulte [Cómo: proteger los extremos de metadatos](how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-124">For more information, see [How to: Secure Metadata Endpoints](how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="c30d1-125">Tipos de identidad</span><span class="sxs-lookup"><span data-stu-id="c30d1-125">Identity Types</span></span>  
 <span data-ttu-id="c30d1-126">Un servicio puede proporcionar seis tipos de identidades.</span><span class="sxs-lookup"><span data-stu-id="c30d1-126">A service can provide six types of identities.</span></span> <span data-ttu-id="c30d1-127">Cada tipo de identidad corresponde a un elemento que se puede contener dentro del elemento `<identity>` mediante configuración.</span><span class="sxs-lookup"><span data-stu-id="c30d1-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="c30d1-128">El tipo utilizado depende del escenario y de los requisitos de seguridad del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="c30d1-129">La tabla siguiente describe cada tipo de identidad.</span><span class="sxs-lookup"><span data-stu-id="c30d1-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="c30d1-130">Tipo de identidad</span><span class="sxs-lookup"><span data-stu-id="c30d1-130">Identity type</span></span>|<span data-ttu-id="c30d1-131">Descripción</span><span class="sxs-lookup"><span data-stu-id="c30d1-131">Description</span></span>|<span data-ttu-id="c30d1-132">Escenario típico</span><span class="sxs-lookup"><span data-stu-id="c30d1-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="c30d1-133">Sistema de nombres de dominio (DNS)</span><span class="sxs-lookup"><span data-stu-id="c30d1-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="c30d1-134">Utilice este elemento con certificados X.509 o cuentas de Windows.</span><span class="sxs-lookup"><span data-stu-id="c30d1-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="c30d1-135">Compara el nombre DNS especificado en la credencial con el valor especificado en este elemento.</span><span class="sxs-lookup"><span data-stu-id="c30d1-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="c30d1-136">Una comprobación de DNS le permite utilizar certificados con DNS o nombres de sujetos.</span><span class="sxs-lookup"><span data-stu-id="c30d1-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="c30d1-137">Si un certificado se vuelve a emitir con el mismo DNS o nombre de sujeto, la comprobación de identidad sigue siendo válida.</span><span class="sxs-lookup"><span data-stu-id="c30d1-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="c30d1-138">Cuando se vuelve a emitir un certificado, obtiene una nueva clave RSA pero conserva el mismo DNS o nombre de sujeto.</span><span class="sxs-lookup"><span data-stu-id="c30d1-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="c30d1-139">Esto significa que los clientes no tienen que actualizar su información de identidad sobre el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="c30d1-140">Certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-140">Certificate.</span></span> <span data-ttu-id="c30d1-141">El valor predeterminado cuando `ClientCredentialType` se establece en Certificate (certificado).</span><span class="sxs-lookup"><span data-stu-id="c30d1-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="c30d1-142">Este elemento especifica un valor de certificado X.509 codificado en Base64 para compararlo con el cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="c30d1-143">Utilice también este elemento al usar un CardSpace como credencial para autenticar el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-143">Also use this element when using a CardSpace as a credential to authenticate the service.</span></span>|<span data-ttu-id="c30d1-144">Este elemento restringe la autenticación a un certificado único basado en su valor de huella digital.</span><span class="sxs-lookup"><span data-stu-id="c30d1-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="c30d1-145">Esto habilita autenticación más estricta, puesto que los valores de huella digital son únicos.</span><span class="sxs-lookup"><span data-stu-id="c30d1-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="c30d1-146">Esto viene con una advertencia: si el certificado se vuelve a emitir con el mismo nombre de sujeto, tiene también una nueva huella digital.</span><span class="sxs-lookup"><span data-stu-id="c30d1-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="c30d1-147">Por consiguiente, los clientes no pueden validar el servicio a menos que se conozca la nueva huella digital.</span><span class="sxs-lookup"><span data-stu-id="c30d1-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="c30d1-148">Para obtener más información sobre cómo encontrar la huella digital de un certificado, consulte [Cómo: recuperar la huella digital de un certificado](how-to-retrieve-the-thumbprint-of-a-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-148">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="c30d1-149">Referencia del certificado</span><span class="sxs-lookup"><span data-stu-id="c30d1-149">Certificate Reference</span></span>|<span data-ttu-id="c30d1-150">Idéntica a la opción Certificado descrita previamente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="c30d1-151">Sin embargo, este elemento le permite especificar un nombre de certificado y una ubicación de almacenamiento desde la que recuperar el certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="c30d1-152">Igual que el escenario del Certificado descrito previamente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="c30d1-153">La ventaja es que la ubicación del almacén de certificados puede cambiar.</span><span class="sxs-lookup"><span data-stu-id="c30d1-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="c30d1-154">RSA</span><span class="sxs-lookup"><span data-stu-id="c30d1-154">RSA</span></span>|<span data-ttu-id="c30d1-155">Este elemento especifica un valor de clave de RSA para comparar con el cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="c30d1-156">Esto es similar a la opción de certificado, pero en lugar de utilizar la huella digital del certificado, se utiliza la clave RSA del certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="c30d1-157">Una comprobación de RSA le permite restringir específicamente la autenticación a un certificado único basándose en su clave RSA.</span><span class="sxs-lookup"><span data-stu-id="c30d1-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="c30d1-158">Esto permite una autenticación más estricta de una clave RSA específica en el gasto del servicio, que ya no trabaja con clientes existentes si cambia el valor de clave de RSA.</span><span class="sxs-lookup"><span data-stu-id="c30d1-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="c30d1-159">Nombre principal de usuario (UPN).</span><span class="sxs-lookup"><span data-stu-id="c30d1-159">User principal name (UPN).</span></span> <span data-ttu-id="c30d1-160">El valor predeterminado cuando `ClientCredentialType` está establecido en Windows y el proceso del servicio no se está ejecutando bajo una de las cuentas del sistema.</span><span class="sxs-lookup"><span data-stu-id="c30d1-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="c30d1-161">Este elemento especifica el UPN bajo el que el servicio se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="c30d1-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="c30d1-162">Vea la sección sobre el protocolo Kerberos y la identidad de [invalidación de la identidad de un servicio para la autenticación](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="c30d1-163">Esto asegura que el servicio se esté ejecutando bajo una cuenta de usuario de Windows concreta.</span><span class="sxs-lookup"><span data-stu-id="c30d1-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="c30d1-164">La cuenta de usuario puede ser el usuario actual con sesión iniciada o el servicio que se ejecuta bajo una cuenta de usuario determinada.</span><span class="sxs-lookup"><span data-stu-id="c30d1-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="c30d1-165">Este valor se beneficia de la seguridad de Windows Kerberos si el servicio se ejecuta bajo una cuenta de dominio dentro de un entorno de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c30d1-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="c30d1-166">Nombre de entidad de seguridad de servicio (SPN).</span><span class="sxs-lookup"><span data-stu-id="c30d1-166">Service principal name (SPN).</span></span> <span data-ttu-id="c30d1-167">El valor predeterminado cuando `ClientCredentialType` está establecido en Windows y el proceso del servicio no se está ejecutando bajo una de las cuentas del sistema: LocalService, LocalSystem o NetworkService.</span><span class="sxs-lookup"><span data-stu-id="c30d1-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="c30d1-168">Este elemento especifica el SPN asociado a la cuenta del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="c30d1-169">Vea la sección sobre el protocolo Kerberos y la identidad de [invalidación de la identidad de un servicio para la autenticación](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="c30d1-170">Esto asegurar que el SPN y la cuenta de Windows concreta asociada al SPN identifican el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="c30d1-171">Puede utilizar la herramienta Setspn.exe para asociar una cuenta de equipo a la cuenta de usuario del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="c30d1-172">Este valor se beneficia de la seguridad de de Windows Kerberos si el servicio se está ejecutando bajo una de las cuentas del sistema o bajo una cuenta de dominio que tiene asociado un nombre SPN a ella y el equipo es un miembro de un dominio dentro de un entorno de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c30d1-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="c30d1-173">Especificación de la identidad en el servicio</span><span class="sxs-lookup"><span data-stu-id="c30d1-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="c30d1-174">Normalmente, no tiene que establecer la identidad en un servicio porque la selección de un tipo de credencial de cliente dicta el tipo de identidad expuesto en los metadatos del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="c30d1-175">Para obtener más información sobre cómo invalidar o especificar la identidad del servicio, consulte [invalidación de la identidad de un servicio para la autenticación](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-175">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="c30d1-176">Usar el \<identity> elemento en la configuración</span><span class="sxs-lookup"><span data-stu-id="c30d1-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="c30d1-177">Si cambia el tipo de credencial de cliente en el enlace mostrado anteriormente a `Certificate,`, entonces el WSDL generado contiene un certificado X.509 serializado con Base64 para el valor de identidad en el código siguiente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="c30d1-178">Éste es el valor predeterminado para todos los tipos de credencial de cliente excepto Windows.</span><span class="sxs-lookup"><span data-stu-id="c30d1-178">This is the default for all client credential types other than Windows.</span></span>  

 <span data-ttu-id="c30d1-179">Puede cambiar el valor de la identidad de servicio predeterminada o cambiar el tipo de la identidad mediante el `<identity>` elemento de la configuración o estableciendo la identidad en el código.</span><span class="sxs-lookup"><span data-stu-id="c30d1-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="c30d1-180">El código de configuración siguiente establece una identidad del sistema de nombres de dominio (DNS) con el valor `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  

## <a name="setting-identity-programmatically"></a><span data-ttu-id="c30d1-181">Establecimiento mediante programación de la identidad</span><span class="sxs-lookup"><span data-stu-id="c30d1-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="c30d1-182">El servicio no tiene que especificar explícitamente una identidad, ya que WCF la determina automáticamente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-182">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="c30d1-183">Sin embargo, WCF le permite especificar una identidad en un punto de conexión, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="c30d1-183">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="c30d1-184">El código siguiente agrega un nuevo punto de conexión de servicio con una identidad de DNS concreta.</span><span class="sxs-lookup"><span data-stu-id="c30d1-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="c30d1-185">Especificación de la identidad en el cliente</span><span class="sxs-lookup"><span data-stu-id="c30d1-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="c30d1-186">En tiempo de diseño, un desarrollador de cliente suele usar la [herramienta de utilidad de metadatos de ServiceModel (SvcUtil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) para generar la configuración de cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="c30d1-187">El archivo de configuración generado (pensado para que lo utilice el cliente) contiene la identidad del servidor.</span><span class="sxs-lookup"><span data-stu-id="c30d1-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="c30d1-188">Por ejemplo, el código siguiente se genera a partir de un servicio que especifica una identidad de DNS, tal y como se muestra en el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="c30d1-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="c30d1-189">Observe que el valor de identidad de extremo del cliente coincide con el del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="c30d1-190">En este caso, cuando el cliente recibe las credenciales de Windows (Kerberos) para el servicio, espera que el valor sea `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  

 <span data-ttu-id="c30d1-191">Si, en lugar de Windows, el servicio especifica un certificado como el tipo de credencial de cliente, se espera que la propiedad DNS del certificado sea el valor `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="c30d1-192">(O si la propiedad DNS es `null`, el nombre de sujeto del certificado debe ser `contoso.com`.)</span><span class="sxs-lookup"><span data-stu-id="c30d1-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="c30d1-193">Uso de un valor específico de identidad</span><span class="sxs-lookup"><span data-stu-id="c30d1-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="c30d1-194">El siguiente archivo de configuración del cliente muestra cómo se espera que la identidad del servicio sea un valor concreto.</span><span class="sxs-lookup"><span data-stu-id="c30d1-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="c30d1-195">En el ejemplo siguiente, el cliente puede comunicarse con dos puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="c30d1-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="c30d1-196">El primero se identifica con una huella digital del certificado y el segundo con una clave RSA certificada.</span><span class="sxs-lookup"><span data-stu-id="c30d1-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="c30d1-197">Es decir, un certificado que contiene solo un par de clave pública/clave privada, pero que no es emitido por una autoridad de confianza.</span><span class="sxs-lookup"><span data-stu-id="c30d1-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  

## <a name="identity-checking-at-run-time"></a><span data-ttu-id="c30d1-198">Comprobación de identidad en tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="c30d1-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="c30d1-199">En la fase de diseño, un programador de cliente determina la identidad del servidor mediante sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="c30d1-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="c30d1-200">En tiempo de ejecución, la comprobación de identidad se realiza antes de llamar a ningún punto de conexión del servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="c30d1-201">El valor de identidad está ligado al tipo de autenticación especificado mediante metadatos; en otras palabras, el tipo de credenciales utilizadas para el servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="c30d1-202">Si el canal se configura para autenticar mediante capa de sockets seguros (SSL) del nivel de transporte o mensaje con certificados X.509 para la autenticación, los siguientes valores de identidad son válidos:</span><span class="sxs-lookup"><span data-stu-id="c30d1-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="c30d1-203">DNS.</span><span class="sxs-lookup"><span data-stu-id="c30d1-203">DNS.</span></span> <span data-ttu-id="c30d1-204">WCF garantiza que el certificado proporcionado durante el protocolo de enlace SSL contiene un atributo DNS o `CommonName` (CN) igual al valor especificado en la identidad DNS en el cliente.</span><span class="sxs-lookup"><span data-stu-id="c30d1-204">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="c30d1-205">Observe que estas comprobaciones se hacen además de determinar la validez del certificado de servidor.</span><span class="sxs-lookup"><span data-stu-id="c30d1-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="c30d1-206">De forma predeterminada, WCF valida que el certificado de servidor está emitido por una entidad de certificación raíz de confianza.</span><span class="sxs-lookup"><span data-stu-id="c30d1-206">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
- <span data-ttu-id="c30d1-207">Certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-207">Certificate.</span></span> <span data-ttu-id="c30d1-208">Durante el protocolo de enlace SSL, WCF garantiza que el punto de conexión remoto proporciona el valor de certificado exacto especificado en la identidad.</span><span class="sxs-lookup"><span data-stu-id="c30d1-208">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
- <span data-ttu-id="c30d1-209">Referencia del certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-209">Certificate Reference.</span></span> <span data-ttu-id="c30d1-210">Igual que el certificado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-210">Same as Certificate.</span></span>  
  
- <span data-ttu-id="c30d1-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="c30d1-211">RSA.</span></span> <span data-ttu-id="c30d1-212">Durante el protocolo de enlace SSL, WCF garantiza que el punto de conexión remoto proporciona la clave RSA exacta especificada en la identidad.</span><span class="sxs-lookup"><span data-stu-id="c30d1-212">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="c30d1-213">Si el servicio autentica utilizando SSL de nivel de transporte o mensaje con una credencial de Windows para la autenticación y negocia la credencial, son válidos los siguientes valores de identidad:</span><span class="sxs-lookup"><span data-stu-id="c30d1-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
- <span data-ttu-id="c30d1-214">DNS.</span><span class="sxs-lookup"><span data-stu-id="c30d1-214">DNS.</span></span> <span data-ttu-id="c30d1-215">La negociación pasa el SPN del servicio para que se pueda comprobar el nombre DNS.</span><span class="sxs-lookup"><span data-stu-id="c30d1-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="c30d1-216">SPN está en forma de `host/<dns name>`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
- <span data-ttu-id="c30d1-217">SPN.</span><span class="sxs-lookup"><span data-stu-id="c30d1-217">SPN.</span></span> <span data-ttu-id="c30d1-218">Se devuelve un SPN de servicio explícito, por ejemplo, `host/myservice`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
- <span data-ttu-id="c30d1-219">UPN.</span><span class="sxs-lookup"><span data-stu-id="c30d1-219">UPN.</span></span> <span data-ttu-id="c30d1-220">UPN de la cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="c30d1-220">The UPN of the service account.</span></span> <span data-ttu-id="c30d1-221">El UPN tiene el formato `username` @ `domain` .</span><span class="sxs-lookup"><span data-stu-id="c30d1-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="c30d1-222">Por ejemplo, cuando el servicio se ejecuta en una cuenta de usuario, puede ser `username@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="c30d1-223">Especificar la identidad mediante programación es opcional (utilizando la propiedad <xref:System.ServiceModel.EndpointAddress.Identity%2A>).</span><span class="sxs-lookup"><span data-stu-id="c30d1-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="c30d1-224">Si no se especifica ninguna identidad, y el tipo de credencial de cliente es Windows, el valor predeterminado es SPN con el valor establecido en la parte del nombre del host de la dirección del punto de conexión de servicio prefijada con el literal "host/".</span><span class="sxs-lookup"><span data-stu-id="c30d1-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="c30d1-225">Si no se especifica ninguna identidad y el tipo de credencial de cliente es un certificado, el valor predeterminado es `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="c30d1-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="c30d1-226">Esto se aplica a la seguridad de nivel de mensaje y transporte.</span><span class="sxs-lookup"><span data-stu-id="c30d1-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="c30d1-227">Identidad y enlaces personalizados</span><span class="sxs-lookup"><span data-stu-id="c30d1-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="c30d1-228">Dado que la identidad de un servicio depende del tipo de enlace utilizado, asegúrese de que se expone una identidad adecuada al crear un enlace personalizado.</span><span class="sxs-lookup"><span data-stu-id="c30d1-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="c30d1-229">Por ejemplo, en el siguiente ejemplo de código, la identidad expuesta no es compatible con el tipo de seguridad, porque la identidad del enlace de arranque de conversación segura no coincide con la identidad del enlace en el extremo.</span><span class="sxs-lookup"><span data-stu-id="c30d1-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="c30d1-230">El enlace de conversación segura establece la identidad DNS, mientras que <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> establece la identidad UPN o SPN.</span><span class="sxs-lookup"><span data-stu-id="c30d1-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="c30d1-231">Para obtener más información sobre cómo apilar elementos de enlace correctamente para un enlace personalizado, vea [crear enlaces definidos por el usuario](../extending/creating-user-defined-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-231">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="c30d1-232">Para obtener más información sobre cómo crear un enlace personalizado con <xref:System.ServiceModel.Channels.SecurityBindingElement> , consulte [Cómo: crear un SecurityBindingElement para un modo de autenticación especificado](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span><span class="sxs-lookup"><span data-stu-id="c30d1-232">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c30d1-233">Vea también</span><span class="sxs-lookup"><span data-stu-id="c30d1-233">See also</span></span>

- [<span data-ttu-id="c30d1-234">Procedimiento para crear un enlace personalizado mediante SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="c30d1-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](how-to-create-a-custom-binding-using-the-securitybindingelement.md)
- [<span data-ttu-id="c30d1-235">Procedimiento para crear un SecurityBindingElement para un modo de autenticación especificado</span><span class="sxs-lookup"><span data-stu-id="c30d1-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
- [<span data-ttu-id="c30d1-236">Procedimiento para crear un comprobador de identidad de cliente personalizado</span><span class="sxs-lookup"><span data-stu-id="c30d1-236">How to: Create a Custom Client Identity Verifier</span></span>](../extending/how-to-create-a-custom-client-identity-verifier.md)
- [<span data-ttu-id="c30d1-237">Selección de tipos de credenciales</span><span class="sxs-lookup"><span data-stu-id="c30d1-237">Selecting a Credential Type</span></span>](selecting-a-credential-type.md)
- [<span data-ttu-id="c30d1-238">Trabajar con certificados</span><span class="sxs-lookup"><span data-stu-id="c30d1-238">Working with Certificates</span></span>](working-with-certificates.md)
- [<span data-ttu-id="c30d1-239">Herramienta de utilidad de metadatos de ServiceModel (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="c30d1-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="c30d1-240">Creación de enlaces definidos por el usuario</span><span class="sxs-lookup"><span data-stu-id="c30d1-240">Creating User-Defined Bindings</span></span>](../extending/creating-user-defined-bindings.md)
- [<span data-ttu-id="c30d1-241">Procedimiento para recuperar la huella digital de un certificado</span><span class="sxs-lookup"><span data-stu-id="c30d1-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](how-to-retrieve-the-thumbprint-of-a-certificate.md)
