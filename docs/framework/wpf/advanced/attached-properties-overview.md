---
title: Información general sobre propiedades asociadas
description: Obtenga información sobre las propiedades adjuntas en Windows Presentation Foundation, que son propiedades globales que se pueden establecer en cualquier objeto.
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- attached properties [WPF Designer]
ms.assetid: 75928354-dc01-47e8-a018-8409aec1f32d
ms.openlocfilehash: 993f65024fcfc4f39a408c81af43b798360e6cf6
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/24/2020
ms.locfileid: "87168385"
---
# <a name="attached-properties-overview"></a><span data-ttu-id="c1986-103">Información general sobre propiedades asociadas</span><span class="sxs-lookup"><span data-stu-id="c1986-103">Attached Properties Overview</span></span>

<span data-ttu-id="c1986-104">Una propiedad adjunta es un concepto definido por XAML.</span><span class="sxs-lookup"><span data-stu-id="c1986-104">An attached property is a concept defined by XAML.</span></span> <span data-ttu-id="c1986-105">Una propiedad adjunta está destinada a usarse como un tipo de propiedad global que se puede establecer en cualquier objeto.</span><span class="sxs-lookup"><span data-stu-id="c1986-105">An attached property is intended to be used as a type of global property that is settable on any object.</span></span> <span data-ttu-id="c1986-106">En [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], las propiedades adjuntas se definen normalmente como una forma especializada de propiedad de dependencia que no tiene el "contenedor" de propiedades convencional.</span><span class="sxs-lookup"><span data-stu-id="c1986-106">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], attached properties are typically defined as a specialized form of dependency property that does not have the conventional property "wrapper".</span></span>

## <a name="prerequisites"></a><span data-ttu-id="c1986-107">Requisitos previos<a name="prerequisites"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-107">Prerequisites <a name="prerequisites"></a></span></span>

<span data-ttu-id="c1986-108">En este artículo se supone que entiende las propiedades de dependencia desde la perspectiva de un consumidor de propiedades de dependencia existentes en [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] las clases y que ha leído la [información general sobre las propiedades de dependencia](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c1986-108">This article assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] classes, and have read the [Dependency Properties Overview](dependency-properties-overview.md).</span></span> <span data-ttu-id="c1986-109">Para seguir los ejemplos de este artículo, también debe comprender XAML y saber cómo escribir aplicaciones de WPF.</span><span class="sxs-lookup"><span data-stu-id="c1986-109">To follow the examples in this article, you should also understand XAML and know how to write WPF applications.</span></span>

## <a name="why-use-attached-properties"></a><span data-ttu-id="c1986-110">Por qué usar las propiedades adjuntas<a name="attached_properties_usage"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-110">Why Use Attached Properties <a name="attached_properties_usage"></a></span></span>

<span data-ttu-id="c1986-111">Una finalidad de una propiedad adjunta es permitir que distintos elementos secundarios especifiquen valores únicos para una propiedad que se define en un elemento primario.</span><span class="sxs-lookup"><span data-stu-id="c1986-111">One purpose of an attached property is to allow different child elements to specify unique values for a property that's defined in a parent element.</span></span> <span data-ttu-id="c1986-112">Una aplicación concreta de este escenario es hacer que los elementos secundarios notifiquen al elemento primario cómo se presentarán en la [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span><span class="sxs-lookup"><span data-stu-id="c1986-112">A specific application of this scenario is having child elements inform the parent element of how they are to be presented in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="c1986-113">Un ejemplo es la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propiedad.</span><span class="sxs-lookup"><span data-stu-id="c1986-113">One example is the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="c1986-114">La <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propiedad se crea como una propiedad adjunta porque está diseñada para establecerse en elementos contenidos dentro de un en <xref:System.Windows.Controls.DockPanel> lugar de en <xref:System.Windows.Controls.DockPanel> sí mismo.</span><span class="sxs-lookup"><span data-stu-id="c1986-114">The <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> property is created as an attached property because it is designed to be set on elements that are contained within a <xref:System.Windows.Controls.DockPanel> rather than on <xref:System.Windows.Controls.DockPanel> itself.</span></span> <span data-ttu-id="c1986-115">La <xref:System.Windows.Controls.DockPanel> clase define el <xref:System.Windows.DependencyProperty> campo estático denominado y <xref:System.Windows.Controls.DockPanel.DockProperty> , a continuación, proporciona los <xref:System.Windows.Controls.DockPanel.GetDock%2A> <xref:System.Windows.Controls.DockPanel.SetDock%2A> métodos y como descriptores de acceso públicos para la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-115">The <xref:System.Windows.Controls.DockPanel> class defines the static <xref:System.Windows.DependencyProperty> field named <xref:System.Windows.Controls.DockPanel.DockProperty>, and then provides the <xref:System.Windows.Controls.DockPanel.GetDock%2A> and <xref:System.Windows.Controls.DockPanel.SetDock%2A> methods as public accessors for the attached property.</span></span>

## <a name="attached-properties-in-xaml"></a><span data-ttu-id="c1986-116">Propiedades adjuntas en XAML<a name="attached_properties_xaml"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-116">Attached Properties in XAML <a name="attached_properties_xaml"></a></span></span>

<span data-ttu-id="c1986-117">En XAML, las propiedades adjuntas se establecen mediante la sintaxis *ProveedorDePropiedadAdjunta*.*NombreDePropiedad*</span><span class="sxs-lookup"><span data-stu-id="c1986-117">In XAML, you set attached properties by using the syntax *AttachedPropertyProvider*.*PropertyName*</span></span>

<span data-ttu-id="c1986-118">El siguiente es un ejemplo de cómo se puede establecer <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> en XAML:</span><span class="sxs-lookup"><span data-stu-id="c1986-118">The following is an example of how you can set <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> in XAML:</span></span>

[!code-xaml[PropertiesOvwSupport#APBasicUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#apbasicusage)]

<span data-ttu-id="c1986-119">El uso es algo similar a una propiedad estática; siempre se hace referencia al tipo <xref:System.Windows.Controls.DockPanel> que posee y registra la propiedad adjunta, en lugar de hacer referencia a cualquier instancia especificada por el nombre.</span><span class="sxs-lookup"><span data-stu-id="c1986-119">The usage is somewhat similar to a static property; you always reference the type <xref:System.Windows.Controls.DockPanel> that owns and registers the attached property, rather than referring to any instance specified by name.</span></span>

<span data-ttu-id="c1986-120">Además, dado que una propiedad adjunta en XAML es un atributo que se establece en el marcado, solamente la operación set tiene alguna relevancia.</span><span class="sxs-lookup"><span data-stu-id="c1986-120">Also, because an attached property in XAML is an attribute that you set in markup, only the set operation has any relevance.</span></span> <span data-ttu-id="c1986-121">No se puede obtener directamente una propiedad en XAML, aunque hay algunos mecanismos indirectos para comparar valores, como los desencadenadores en estilos (para obtener más información, consulte [Aplicar estilos y plantillas](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="c1986-121">You cannot directly get a property in XAML, although there are some indirect mechanisms for comparing values, such as triggers in styles (for details, see [Styling and Templating](../../../desktop-wpf/fundamentals/styles-templates-overview.md)).</span></span>

### <a name="attached-property-implementation-in-wpf"></a><span data-ttu-id="c1986-122">Implementación de propiedades adjuntas en WPF</span><span class="sxs-lookup"><span data-stu-id="c1986-122">Attached Property Implementation in WPF</span></span>

<span data-ttu-id="c1986-123">En [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] , la mayoría de las propiedades adjuntas relacionadas con la interfaz de usuario en tipos de WPF se implementan como propiedades de dependencia.</span><span class="sxs-lookup"><span data-stu-id="c1986-123">In [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], most of the UI-related attached properties on WPF types are implemented as dependency properties.</span></span> <span data-ttu-id="c1986-124">Las propiedades adjuntas son un concepto de XAML, mientras que las propiedades de dependencia son un concepto de WPF.</span><span class="sxs-lookup"><span data-stu-id="c1986-124">Attached properties are a XAML concept, whereas dependency properties are a WPF concept.</span></span> <span data-ttu-id="c1986-125">Dado que las propiedades adjuntas de WPF son propiedades de dependencia, admiten conceptos de propiedades de dependencia como metadatos de propiedad y valores predeterminados de esos metadatos de propiedad.</span><span class="sxs-lookup"><span data-stu-id="c1986-125">Because WPF attached properties are dependency properties, they support dependency property concepts such as property metadata, and default values from that property metadata.</span></span>

## <a name="how-attached-properties-are-used-by-the-owning-type"></a><span data-ttu-id="c1986-126">Cómo usa el tipo propietario las propiedades adjuntas<a name="howused"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-126">How Attached Properties Are Used by the Owning Type <a name="howused"></a></span></span>

<span data-ttu-id="c1986-127">Aunque las propiedades adjuntas se pueden establecer en cualquier objeto, eso no significa automáticamente que establecer la propiedad vaya a producir un resultado tangible ni que otro objeto no pueda usar nunca el valor.</span><span class="sxs-lookup"><span data-stu-id="c1986-127">Although attached properties are settable on any object, that does not automatically mean that setting the property will produce a tangible result, or that the value will ever be used by another object.</span></span> <span data-ttu-id="c1986-128">Por lo general, las propiedades adjuntas están diseñadas para que los objetos procedentes de una amplia variedad de posibles jerarquías de clases o relaciones lógicas puedan, individualmente, notificar información común del tipo que define la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-128">Generally, attached properties are intended so that objects coming from a wide variety of possible class hierarchies or logical relationships can each report common information to the type that defines the attached property.</span></span> <span data-ttu-id="c1986-129">El tipo que define la propiedad adjunta suele seguir uno de estos modelos:</span><span class="sxs-lookup"><span data-stu-id="c1986-129">The type that defines the attached property typically follows one of these models:</span></span>

- <span data-ttu-id="c1986-130">El tipo que define la propiedad adjunta está diseñado para poder ser el elemento primario de los elementos que establecerán los valores de la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-130">The type that defines the attached property is designed so that it can be the parent element of the elements that will set values for the attached property.</span></span> <span data-ttu-id="c1986-131">A continuación, el tipo itera sus objetos secundarios a través de la lógica interna en alguna estructura de árbol de objetos, obtiene los valores y actúa sobre esos valores de algún modo.</span><span class="sxs-lookup"><span data-stu-id="c1986-131">The type then iterates its child objects through internal logic against some object tree structure, obtains the values, and acts on those values in some manner.</span></span>

- <span data-ttu-id="c1986-132">El tipo que define la propiedad adjunta se usará como el elemento secundario de una variedad de posibles elementos primarios y modelos de contenido.</span><span class="sxs-lookup"><span data-stu-id="c1986-132">The type that defines the attached property will be used as the child element for a variety of possible parent elements and content models.</span></span>

- <span data-ttu-id="c1986-133">El tipo que define la propiedad adjunta representa un servicio.</span><span class="sxs-lookup"><span data-stu-id="c1986-133">The type that defines the attached property represents a service.</span></span> <span data-ttu-id="c1986-134">Otros tipos establecen los valores de la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-134">Other types set values for the attached property.</span></span> <span data-ttu-id="c1986-135">A continuación, cuando el elemento que establece la propiedad se evalúa en el contexto del servicio, los valores de la propiedad adjunta se obtienen a través de la lógica interna de la clase de servicio.</span><span class="sxs-lookup"><span data-stu-id="c1986-135">Then, when the element that set the property is evaluated in the context of the service, the attached property values are obtained through internal logic of the service class.</span></span>

### <a name="an-example-of-a-parent-defined-attached-property"></a><span data-ttu-id="c1986-136">Ejemplo de una propiedad adjunta definida por el elemento primario</span><span class="sxs-lookup"><span data-stu-id="c1986-136">An Example of a Parent-Defined Attached Property</span></span>

<span data-ttu-id="c1986-137">El escenario más típico en el que WPF define una propiedad adjunta es cuando un elemento primario admite una colección de elementos secundarios, y también implementa un comportamiento en el que los detalles del comportamiento se informan individualmente para cada elemento secundario.</span><span class="sxs-lookup"><span data-stu-id="c1986-137">The most typical scenario where WPF defines an attached property is when a parent element supports a child element collection, and also implements a behavior where the specifics of the behavior are reported individually for each child element.</span></span>

<span data-ttu-id="c1986-138"><xref:System.Windows.Controls.DockPanel>define la <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> propiedad adjunta y <xref:System.Windows.Controls.DockPanel> tiene código de nivel de clase como parte de su lógica de representación (concretamente, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> y <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A> ).</span><span class="sxs-lookup"><span data-stu-id="c1986-138"><xref:System.Windows.Controls.DockPanel> defines the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property, and <xref:System.Windows.Controls.DockPanel> has class-level code as part of its rendering logic (specifically, <xref:System.Windows.Controls.DockPanel.MeasureOverride%2A> and <xref:System.Windows.Controls.DockPanel.ArrangeOverride%2A>).</span></span> <span data-ttu-id="c1986-139">Una <xref:System.Windows.Controls.DockPanel> instancia siempre comprobará si alguno de sus elementos secundarios inmediatos tiene establecido un valor para <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1986-139">A <xref:System.Windows.Controls.DockPanel> instance will always check to see whether any of its immediate child elements have set a value for <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c1986-140">Si es así, esos valores se convierten en la entrada de la lógica de representación que se aplica a ese elemento secundario determinado.</span><span class="sxs-lookup"><span data-stu-id="c1986-140">If so, those values become input for the rendering logic applied to that particular child element.</span></span> <span data-ttu-id="c1986-141">Cada una <xref:System.Windows.Controls.DockPanel> de las instancias anidadas trata sus propias colecciones de elementos secundarios inmediatas, pero ese comportamiento es específico de la implementación de cómo <xref:System.Windows.Controls.DockPanel> procesa <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> los valores.</span><span class="sxs-lookup"><span data-stu-id="c1986-141">Nested <xref:System.Windows.Controls.DockPanel> instances each treat their own immediate child element collections, but that behavior is implementation-specific to how <xref:System.Windows.Controls.DockPanel> processes <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> values.</span></span> <span data-ttu-id="c1986-142">Teóricamente, es posible tener propiedades adjuntas que influyan en los elementos, más allá del elemento primario inmediato.</span><span class="sxs-lookup"><span data-stu-id="c1986-142">It is theoretically possible to have attached properties that influence elements beyond the immediate parent.</span></span> <span data-ttu-id="c1986-143">Si <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> se establece la propiedad adjunta en un elemento que no tiene ningún <xref:System.Windows.Controls.DockPanel> elemento primario para actuar sobre él, no se produce ningún error o excepción.</span><span class="sxs-lookup"><span data-stu-id="c1986-143">If the <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> attached property is set on an element that has no <xref:System.Windows.Controls.DockPanel> parent element to act upon it, no error or exception is raised.</span></span> <span data-ttu-id="c1986-144">Esto significa simplemente que se ha establecido un valor de propiedad global, pero no tiene ningún <xref:System.Windows.Controls.DockPanel> elemento primario actual que pueda consumir la información.</span><span class="sxs-lookup"><span data-stu-id="c1986-144">This simply means that a global property value was set, but it has no current <xref:System.Windows.Controls.DockPanel> parent that could consume the information.</span></span>

## <a name="attached-properties-in-code"></a><span data-ttu-id="c1986-145">Propiedades adjuntas en el código<a name="attached_properties_code"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-145">Attached Properties in Code <a name="attached_properties_code"></a></span></span>

<span data-ttu-id="c1986-146">Las propiedades adjuntas en WPF no tienen los métodos de "contenedor" de CLR típicos para facilitar el acceso get/set.</span><span class="sxs-lookup"><span data-stu-id="c1986-146">Attached properties in WPF do not have the typical CLR "wrapper" methods for easy get/set access.</span></span> <span data-ttu-id="c1986-147">Esto se debe a que la propiedad adjunta no es necesariamente parte del espacio de nombres CLR para las instancias en las que se establece la propiedad.</span><span class="sxs-lookup"><span data-stu-id="c1986-147">This is because the attached property is not necessarily part of the CLR namespace for instances where the property is set.</span></span> <span data-ttu-id="c1986-148">No obstante, un procesador de XAML debe poder establecer esos valores durante el análisis de XAML.</span><span class="sxs-lookup"><span data-stu-id="c1986-148">However, a XAML processor must be able to set those values when XAML is parsed.</span></span> <span data-ttu-id="c1986-149">Para admitir el uso de una propiedad adjunta efectiva, el tipo de propietario de la propiedad adjunta debe implementar métodos de descriptor de acceso dedicados en el formulario **Get_PropertyName_** y **Set_PropertyName_**.</span><span class="sxs-lookup"><span data-stu-id="c1986-149">To support an effective attached property usage, the owner type of the attached property must implement dedicated accessor methods in the form **Get_PropertyName_** and **Set_PropertyName_**.</span></span> <span data-ttu-id="c1986-150">Estos métodos de descriptor de acceso dedicados también resultan útiles para obtener o establecer la propiedad adjunta en el código.</span><span class="sxs-lookup"><span data-stu-id="c1986-150">These dedicated accessor methods are also useful to get or set the attached property in code.</span></span> <span data-ttu-id="c1986-151">Desde una perspectiva del código, una propiedad adjunta se parece a un campo de respaldo, que presenta descriptores de acceso de métodos en lugar de descriptores de acceso de propiedades. Ese campo de respaldo puede existir en cualquier objeto, en lugar de tener que definirse específicamente.</span><span class="sxs-lookup"><span data-stu-id="c1986-151">From a code perspective, an attached property is similar to a backing field that has method accessors instead of property accessors, and that backing field can exist on any object rather than needing to be specifically defined.</span></span>

<span data-ttu-id="c1986-152">En el ejemplo siguiente se muestra cómo establecer una propiedad adjunta en el código.</span><span class="sxs-lookup"><span data-stu-id="c1986-152">The following example shows how you can set an attached property in code.</span></span> <span data-ttu-id="c1986-153">En este ejemplo, `myCheckBox` es una instancia de la <xref:System.Windows.Controls.CheckBox> clase.</span><span class="sxs-lookup"><span data-stu-id="c1986-153">In this example, `myCheckBox` is an instance of the <xref:System.Windows.Controls.CheckBox> class.</span></span>

[!code-csharp[PropertiesOvwSupport#APCode](~/samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml.cs#apcode)]
[!code-vb[PropertiesOvwSupport#APCode](~/samples/snippets/visualbasic/VS_Snippets_Wpf/PropertiesOvwSupport/visualbasic/page4.xaml.vb#apcode)]

<span data-ttu-id="c1986-154">Similar al caso de XAML, si `myCheckBox` aún no se ha agregado como elemento secundario de `myDockPanel` en la cuarta línea de código, la quinta línea de código no produciría una excepción, pero el valor de propiedad no interactuaría con un <xref:System.Windows.Controls.DockPanel> elemento primario y, por lo tanto, no haría nada.</span><span class="sxs-lookup"><span data-stu-id="c1986-154">Similar to the XAML case, if `myCheckBox` had not already been added as a child element of `myDockPanel` by the fourth line of code, the fifth line of code would not raise an exception, but the property value would not interact with a <xref:System.Windows.Controls.DockPanel> parent and thus would do nothing.</span></span> <span data-ttu-id="c1986-155">Solo un <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> valor establecido en un elemento secundario combinado con la presencia de un <xref:System.Windows.Controls.DockPanel> elemento primario producirá un comportamiento efectivo en la aplicación representada.</span><span class="sxs-lookup"><span data-stu-id="c1986-155">Only a <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> value set on a child element combined with the presence of a <xref:System.Windows.Controls.DockPanel> parent element will cause an effective behavior in the rendered application.</span></span> <span data-ttu-id="c1986-156">(En este caso, podría establecer la propiedad adjunta y, luego, adjuntarla al árbol.</span><span class="sxs-lookup"><span data-stu-id="c1986-156">(In this case, you could set the attached property, then attach to the tree.</span></span> <span data-ttu-id="c1986-157">O bien podría establecer la propiedad adjunta después de adjuntarla al árbol.</span><span class="sxs-lookup"><span data-stu-id="c1986-157">Or you could attach to the tree then set the attached property.</span></span> <span data-ttu-id="c1986-158">En ambos casos, el resultado es el mismo).</span><span class="sxs-lookup"><span data-stu-id="c1986-158">Either action order provides the same result.)</span></span>

## <a name="attached-property-metadata"></a><span data-ttu-id="c1986-159">Metadatos de propiedad adjunta<a name="attached_properties_metadata"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-159">Attached Property Metadata <a name="attached_properties_metadata"></a></span></span>

<span data-ttu-id="c1986-160">Al registrar la propiedad, <xref:System.Windows.FrameworkPropertyMetadata> se establece para especificar las características de la propiedad, por ejemplo, si la propiedad afecta a la representación, la medición, etc.</span><span class="sxs-lookup"><span data-stu-id="c1986-160">When registering the property, <xref:System.Windows.FrameworkPropertyMetadata> is set to specify characteristics of the property, such as whether the property affects rendering, measurement, and so on.</span></span> <span data-ttu-id="c1986-161">Los metadatos de una propiedad adjunta no suelen ser diferentes de los de una propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="c1986-161">Metadata for an attached property is generally no different than on a dependency property.</span></span> <span data-ttu-id="c1986-162">Si especifica un valor predeterminado de una invalidación en los metadatos de la propiedad adjunta, ese valor se convierte en el valor predeterminado de la propiedad adjunta implícita en las instancias de la clase de invalidación.</span><span class="sxs-lookup"><span data-stu-id="c1986-162">If you specify a default value in an override to attached property metadata, that value becomes the default value of the implicit attached property on instances of the overriding class.</span></span> <span data-ttu-id="c1986-163">En concreto, su valor predeterminado se notifica si algún proceso consulta el valor de una propiedad adjunta a través del descriptor de acceso del método `Get` de esa propiedad y especifica una instancia de la clase donde se especificaron los metadatos, y el valor de esa propiedad asociada no estaba establecido.</span><span class="sxs-lookup"><span data-stu-id="c1986-163">Specifically, your default value is reported if some process queries for the value of an attached property through the `Get` method accessor for that property, specifying an instance of the class where you specified the metadata, and the value for that attached property was otherwise not set.</span></span>

<span data-ttu-id="c1986-164">Si quiere habilitar la herencia de valores de propiedad en una propiedad, debe utilizar las propiedades adjuntas en lugar de propiedades de dependencia no adjuntas.</span><span class="sxs-lookup"><span data-stu-id="c1986-164">If you want to enable property value inheritance on a property, you should use attached properties rather than non-attached dependency properties.</span></span> <span data-ttu-id="c1986-165">Para obtener más información, consulte [herencia de valores de propiedad](property-value-inheritance.md).</span><span class="sxs-lookup"><span data-stu-id="c1986-165">For details, see [Property Value Inheritance](property-value-inheritance.md).</span></span>

## <a name="custom-attached-properties"></a><span data-ttu-id="c1986-166">Propiedades adjuntas personalizadas<a name="custom"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-166">Custom Attached Properties <a name="custom"></a></span></span>

### <a name="when-to-create-an-attached-property"></a><span data-ttu-id="c1986-167">Cuándo crear una propiedad adjunta<a name="create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-167">When to Create an Attached Property <a name="create_attached_properties"></a></span></span>

<span data-ttu-id="c1986-168">Puede crear una propiedad adjunta cuando existe una razón para tener una mecanismo de definición de propiedades disponible para clases distintas de la clase que se define.</span><span class="sxs-lookup"><span data-stu-id="c1986-168">You might create an attached property when there is a reason to have a property setting mechanism available for classes other than the defining class.</span></span> <span data-ttu-id="c1986-169">El escenario más común es el diseño.</span><span class="sxs-lookup"><span data-stu-id="c1986-169">The most common scenario for this is layout.</span></span> <span data-ttu-id="c1986-170">Ejemplos de propiedades de diseño existentes son <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType> , <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType> y <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1986-170">Examples of existing layout properties are <xref:System.Windows.Controls.DockPanel.Dock%2A?displayProperty=nameWithType>, <xref:System.Windows.Controls.Panel.ZIndex%2A?displayProperty=nameWithType>, and <xref:System.Windows.Controls.Canvas.Top%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="c1986-171">El escenario habilitado aquí es que los elementos que existen como elementos secundarios de los elementos que controlan el diseño pueden expresar los requisitos de diseño para sus elementos primarios de diseño individualmente, cada uno de los cuales define un valor de propiedad para el elemento primario definido como una propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-171">The scenario enabled here is that elements that exist as child elements to layout-controlling elements are able to express layout requirements to their layout parent elements individually, each setting a property value that the parent defined as an attached property.</span></span>

<span data-ttu-id="c1986-172">Otro escenario para usar una propiedad adjunta es cuando la clase representa un servicio y quiere que las clases puedan integrar el servicio de manera más transparente.</span><span class="sxs-lookup"><span data-stu-id="c1986-172">Another scenario for using an attached property is when your class represents a service, and you want classes to be able to integrate the service more transparently.</span></span>

<span data-ttu-id="c1986-173">Otro escenario es recibir compatibilidad con Visual Studio WPF Designer, como la edición de la ventana **propiedades** .</span><span class="sxs-lookup"><span data-stu-id="c1986-173">Yet another scenario is to receive Visual Studio WPF Designer support, such as **Properties** window editing.</span></span> <span data-ttu-id="c1986-174">Para obtener más información, consulte [Información general sobre la creación de controles](../controls/control-authoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c1986-174">For more information, see [Control Authoring Overview](../controls/control-authoring-overview.md).</span></span>

<span data-ttu-id="c1986-175">Como mencionamos anteriormente, debe realizar el registro como una propiedad adjunta si quiere usar la herencia de valores de propiedad.</span><span class="sxs-lookup"><span data-stu-id="c1986-175">As mentioned before, you should register as an attached property if you want to use property value inheritance.</span></span>

### <a name="how-to-create-an-attached-property"></a><span data-ttu-id="c1986-176">Cómo crear una propiedad adjunta<a name="how_do_i_create_attached_properties"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-176">How to Create an Attached Property <a name="how_do_i_create_attached_properties"></a></span></span>

<span data-ttu-id="c1986-177">Si la clase define la propiedad adjunta estrictamente para su uso en otros tipos, no es necesario que la clase derive de <xref:System.Windows.DependencyObject> .</span><span class="sxs-lookup"><span data-stu-id="c1986-177">If your class is defining the attached property strictly for use on other types, then the class does not have to derive from <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="c1986-178">Pero debe derivar de <xref:System.Windows.DependencyObject> si sigue el modelo de WPF general de tener la propiedad adjunta también una propiedad de dependencia.</span><span class="sxs-lookup"><span data-stu-id="c1986-178">But you do need to derive from <xref:System.Windows.DependencyObject> if you follow the overall WPF model of having your attached property also be a dependency property.</span></span>

<span data-ttu-id="c1986-179">Defina la propiedad adjunta como una propiedad de dependencia declarando un `public static readonly` campo de tipo <xref:System.Windows.DependencyProperty> .</span><span class="sxs-lookup"><span data-stu-id="c1986-179">Define your attached property as a dependency property by declaring a `public static readonly` field of type <xref:System.Windows.DependencyProperty>.</span></span> <span data-ttu-id="c1986-180">Este campo se define con el valor devuelto del <xref:System.Windows.DependencyProperty.RegisterAttached%2A> método.</span><span class="sxs-lookup"><span data-stu-id="c1986-180">You define this field by using the return value of the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method.</span></span> <span data-ttu-id="c1986-181">El nombre del campo debe coincidir con el nombre de la propiedad adjunta, anexado con la cadena `Property` , para seguir el modelo de WPF establecido para asignar nombres a los campos de identificación frente a las propiedades que representan.</span><span class="sxs-lookup"><span data-stu-id="c1986-181">The field name must match the attached property name, appended with the string `Property`, to follow the established WPF pattern of naming the identifying fields versus the properties that they represent.</span></span> <span data-ttu-id="c1986-182">El proveedor de propiedades adjunta también debe proporcionar métodos estáticos **Get_PropertyName_** y **Set_PropertyName_** como descriptores de acceso para la propiedad adjunta. Si no lo hace, el sistema de propiedades no podrá utilizar la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-182">The attached property provider must also provide static **Get_PropertyName_** and **Set_PropertyName_** methods as accessors for the attached property; failing to do this results in the property system being unable to use your attached property.</span></span>

> [!NOTE]
> <span data-ttu-id="c1986-183">Si omite el descriptor de acceso get de la propiedad adjunta, el enlace de datos de la propiedad no funcionará en las herramientas de diseño, como Visual Studio y Blend para Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c1986-183">If you omit the attached property's get accessor, data binding on the property will not work in design tools, such as Visual Studio and Blend for Visual Studio.</span></span>

#### <a name="the-get-accessor"></a><span data-ttu-id="c1986-184">Descriptor de acceso get</span><span class="sxs-lookup"><span data-stu-id="c1986-184">The Get Accessor</span></span>

<span data-ttu-id="c1986-185">La firma para el descriptor de acceso **Get_PropertyName_** debe ser:</span><span class="sxs-lookup"><span data-stu-id="c1986-185">The signature for the **Get_PropertyName_** accessor must be:</span></span>

`public static object GetPropertyName(object target)`

- <span data-ttu-id="c1986-186">El objeto `target` puede especificarse como un tipo más específico en la implementación.</span><span class="sxs-lookup"><span data-stu-id="c1986-186">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="c1986-187">Por ejemplo, el <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> método escribe el parámetro como <xref:System.Windows.UIElement> , porque la propiedad adjunta solo está pensada para establecerse en <xref:System.Windows.UIElement> instancias de.</span><span class="sxs-lookup"><span data-stu-id="c1986-187">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A?displayProperty=nameWithType> method types the parameter as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="c1986-188">El valor devuelto puede especificarse como un tipo más específico en la implementación.</span><span class="sxs-lookup"><span data-stu-id="c1986-188">The return value can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="c1986-189">Por ejemplo, el <xref:System.Windows.Controls.DockPanel.GetDock%2A> método lo escribe como <xref:System.Windows.Controls.Dock> , ya que el valor solo se puede establecer en esa enumeración.</span><span class="sxs-lookup"><span data-stu-id="c1986-189">For example, the <xref:System.Windows.Controls.DockPanel.GetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span>

#### <a name="the-set-accessor"></a><span data-ttu-id="c1986-190">Descriptor de acceso set</span><span class="sxs-lookup"><span data-stu-id="c1986-190">The Set Accessor</span></span>

<span data-ttu-id="c1986-191">La firma para el descriptor de acceso **Set_PropertyName_** debe ser:</span><span class="sxs-lookup"><span data-stu-id="c1986-191">The signature for the **Set_PropertyName_** accessor must be:</span></span>

`public static void SetPropertyName(object target, object value)`

- <span data-ttu-id="c1986-192">El objeto `target` puede especificarse como un tipo más específico en la implementación.</span><span class="sxs-lookup"><span data-stu-id="c1986-192">The `target` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="c1986-193">Por ejemplo, el <xref:System.Windows.Controls.DockPanel.SetDock%2A> método lo escribe como <xref:System.Windows.UIElement> , porque la propiedad adjunta solo está pensada para establecerse en <xref:System.Windows.UIElement> instancias de.</span><span class="sxs-lookup"><span data-stu-id="c1986-193">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.UIElement>, because the attached property is only intended to be set on <xref:System.Windows.UIElement> instances.</span></span>

- <span data-ttu-id="c1986-194">El objeto `value` puede especificarse como un tipo más específico en la implementación.</span><span class="sxs-lookup"><span data-stu-id="c1986-194">The `value` object can be specified as a more specific type in your implementation.</span></span> <span data-ttu-id="c1986-195">Por ejemplo, el <xref:System.Windows.Controls.DockPanel.SetDock%2A> método lo escribe como <xref:System.Windows.Controls.Dock> , ya que el valor solo se puede establecer en esa enumeración.</span><span class="sxs-lookup"><span data-stu-id="c1986-195">For example, the <xref:System.Windows.Controls.DockPanel.SetDock%2A> method types it as <xref:System.Windows.Controls.Dock>, because the value can only be set to that enumeration.</span></span> <span data-ttu-id="c1986-196">Recuerde que el valor de este método es la entrada procedente del cargador de XAML cuando encuentra la propiedad adjunta en el uso de propiedades adjuntas en un marcado.</span><span class="sxs-lookup"><span data-stu-id="c1986-196">Remember that the value for this method is the input coming from the XAML loader when it encounters your attached property in an attached property usage in markup.</span></span> <span data-ttu-id="c1986-197">Esa entrada es el valor especificado como un valor de atributo XAML en el marcado.</span><span class="sxs-lookup"><span data-stu-id="c1986-197">That input is the value specified as a XAML attribute value in markup.</span></span> <span data-ttu-id="c1986-198">Por lo tanto, debe existir compatibilidad con la conversión de tipos, el serializador de valores o la extensión de marcado para el tipo que usa, de modo que el tipo adecuado se pueda crear desde el valor del atributo (que, básicamente, es una cadena).</span><span class="sxs-lookup"><span data-stu-id="c1986-198">Therefore there must be type conversion, value serializer, or markup extension support for the type you use, such that the appropriate type can be created from the attribute value (which is ultimately just a string).</span></span>

<span data-ttu-id="c1986-199">En el ejemplo siguiente se muestra el registro de la propiedad de dependencia (con el <xref:System.Windows.DependencyProperty.RegisterAttached%2A> método), así como los descriptores de acceso **Get_PropertyName_** y **Set_PropertyName_** .</span><span class="sxs-lookup"><span data-stu-id="c1986-199">The following example shows the dependency property registration (using the <xref:System.Windows.DependencyProperty.RegisterAttached%2A> method), as well as the **Get_PropertyName_** and **Set_PropertyName_** accessors.</span></span> <span data-ttu-id="c1986-200">En el ejemplo, el nombre de la propiedad adjunta es `IsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="c1986-200">In the example, the attached property name is `IsBubbleSource`.</span></span> <span data-ttu-id="c1986-201">Por consiguiente, los descriptores de acceso deben denominarse `GetIsBubbleSource` y `SetIsBubbleSource`.</span><span class="sxs-lookup"><span data-stu-id="c1986-201">Therefore, the accessors must be named `GetIsBubbleSource` and `SetIsBubbleSource`.</span></span>

[!code-csharp[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#registerattachedbubbler)]
[!code-vb[WPFAquariumSln#RegisterAttachedBubbler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#registerattachedbubbler)]

#### <a name="attached-property-attributes"></a><span data-ttu-id="c1986-202">Atributos de propiedades adjuntas</span><span class="sxs-lookup"><span data-stu-id="c1986-202">Attached Property Attributes</span></span>

<span data-ttu-id="c1986-203">WPF define varios atributos .NET diseñados para proporcionar información sobre las propiedades adjuntas a los procesos de reflexión y para los usuarios típicos de reflexión e información de propiedades, como los diseñadores.</span><span class="sxs-lookup"><span data-stu-id="c1986-203">WPF defines several .NET attributes that are intended to provide information about attached properties to reflection processes, and to typical users of reflection and property information such as designers.</span></span> <span data-ttu-id="c1986-204">Dado que las propiedades adjuntas tienen un tipo de ámbito ilimitado, los diseñadores necesitan una manera de evitar abrumar a los usuarios con una lista global de todas las propiedades adjuntas que se definen en una implementación de tecnología específica que utiliza XAML.</span><span class="sxs-lookup"><span data-stu-id="c1986-204">Because attached properties have a type of unlimited scope, designers need a way to avoid overwhelming users with a global list of all the attached properties that are defined in a particular technology implementation that uses XAML.</span></span> <span data-ttu-id="c1986-205">Los atributos .NET que WPF define para las propiedades adjuntas se pueden usar para definir el ámbito de las situaciones en las que se debe mostrar una propiedad adjunta determinada en una ventana Propiedades.</span><span class="sxs-lookup"><span data-stu-id="c1986-205">The .NET attributes that WPF defines for attached properties can be used to scope the situations where a given attached property should be shown in a properties window.</span></span> <span data-ttu-id="c1986-206">También puede aplicar estos atributos para sus propias propiedades adjuntas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="c1986-206">You might consider applying these attributes for your own custom attached properties also.</span></span> <span data-ttu-id="c1986-207">El propósito y la sintaxis de los atributos de .NET se describen en las páginas de referencia adecuadas:</span><span class="sxs-lookup"><span data-stu-id="c1986-207">The purpose and syntax of the .NET attributes is described on the appropriate reference pages:</span></span>

- <xref:System.Windows.AttachedPropertyBrowsableAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForChildrenAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableForTypeAttribute>

- <xref:System.Windows.AttachedPropertyBrowsableWhenAttributePresentAttribute>

## <a name="learning-more-about-attached-properties"></a><span data-ttu-id="c1986-208">Obtener más información sobre las propiedades adjuntas<a name="more"></a></span><span class="sxs-lookup"><span data-stu-id="c1986-208">Learning More About Attached Properties <a name="more"></a></span></span>

- <span data-ttu-id="c1986-209">Para obtener más información acerca de cómo crear una propiedad adjunta, consulte [Registrar una propiedad asociada](how-to-register-an-attached-property.md).</span><span class="sxs-lookup"><span data-stu-id="c1986-209">For more information on creating an attached property, see [Register an Attached Property](how-to-register-an-attached-property.md).</span></span>

- <span data-ttu-id="c1986-210">Para obtener escenarios de uso más avanzados sobre las propiedades de dependencia y las propiedades adjuntas, consulte [Propiedades de dependencia personalizadas](custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="c1986-210">For more advanced usage scenarios for dependency properties and attached properties, see [Custom Dependency Properties](custom-dependency-properties.md).</span></span>

- <span data-ttu-id="c1986-211">Puede registrar una propiedad como una propiedad adjunta y también como una propiedad de dependencia, pero continuar exponiendo las implementaciones de "contenedor".</span><span class="sxs-lookup"><span data-stu-id="c1986-211">You can also register a property as an attached property, and as a dependency property, but then still expose "wrapper" implementations.</span></span> <span data-ttu-id="c1986-212">En este caso, la propiedad puede establecerse en ese elemento o en cualquier elemento a través de la sintaxis XAML de la propiedad adjunta.</span><span class="sxs-lookup"><span data-stu-id="c1986-212">In this case, the property can be set either on that element, or on any element through the XAML attached property syntax.</span></span> <span data-ttu-id="c1986-213">Un ejemplo de una propiedad con un escenario adecuado para usos estándar y asociados es <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="c1986-213">An example of a property with an appropriate scenario for both standard and attached usages is <xref:System.Windows.FrameworkElement.FlowDirection%2A?displayProperty=nameWithType>.</span></span>

## <a name="see-also"></a><span data-ttu-id="c1986-214">Vea también</span><span class="sxs-lookup"><span data-stu-id="c1986-214">See also</span></span>

- <xref:System.Windows.DependencyProperty>
- [<span data-ttu-id="c1986-215">Información general sobre las propiedades de dependencia</span><span class="sxs-lookup"><span data-stu-id="c1986-215">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="c1986-216">Propiedades de dependencia personalizadas</span><span class="sxs-lookup"><span data-stu-id="c1986-216">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
- [<span data-ttu-id="c1986-217">Información general sobre XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="c1986-217">XAML Overview (WPF)</span></span>](../../../desktop-wpf/fundamentals/xaml.md)
- [<span data-ttu-id="c1986-218">Registrar una propiedad adjunta</span><span class="sxs-lookup"><span data-stu-id="c1986-218">Register an Attached Property</span></span>](how-to-register-an-attached-property.md)
