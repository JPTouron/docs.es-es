---
title: Niveles de confianza de seguridad para acceder a los recursos
description: Comprender los niveles de confianza de seguridad en el acceso a recursos en .NET. Hay 3 niveles principales de confianza para System. Transactions.
ms.date: 03/30/2017
ms.assetid: fb5be924-317d-4d69-b33a-3d18ecfb9d6e
ms.openlocfilehash: 64f298460bde99181ab8dc8be13ae95aaa846299
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141957"
---
# <a name="security-trust-levels-in-accessing-resources"></a><span data-ttu-id="8b70a-104">Niveles de confianza de seguridad para acceder a los recursos</span><span class="sxs-lookup"><span data-stu-id="8b70a-104">Security Trust Levels in Accessing Resources</span></span>
<span data-ttu-id="8b70a-105">En este tema se discute cómo el acceso está restringido en los tipos de recursos que <xref:System.Transactions> expone.</span><span class="sxs-lookup"><span data-stu-id="8b70a-105">This topic discusses how access is restricted on the types of resources that <xref:System.Transactions> exposes.</span></span>  
  
 <span data-ttu-id="8b70a-106">Hay tres niveles principales de confianza para <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="8b70a-106">There are three main levels of trust for <xref:System.Transactions>.</span></span> <span data-ttu-id="8b70a-107">Los niveles de confianza se definen dependiendo de los tipos de recursos que <xref:System.Transactions> expone y el nivel de confianza que se debería exigir para tener acceso a esos recursos.</span><span class="sxs-lookup"><span data-stu-id="8b70a-107">The trust levels are defined based on the types of resources that <xref:System.Transactions> exposes, and the level of trust that should be required to access those resources.</span></span> <span data-ttu-id="8b70a-108">Los recursos a los que <xref:System.Transactions> proporciona acceso, son la memoria del sistema, recursos amplios de proceso compartido y los recursos para todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="8b70a-108">The resources that <xref:System.Transactions> provides access to are system memory, shared process wide resources, and system wide resources.</span></span> <span data-ttu-id="8b70a-109">Los niveles son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="8b70a-109">The levels are:</span></span>  
  
- <span data-ttu-id="8b70a-110">**AllowPartiallyTrustedCallers** (APTCA) para aplicaciones que usan transacciones dentro de un dominio de aplicación único.</span><span class="sxs-lookup"><span data-stu-id="8b70a-110">**AllowPartiallyTrustedCallers** (APTCA) for applications using transactions within a single application domain.</span></span>  
  
- <span data-ttu-id="8b70a-111">**DistributedTransactionPermission** (DTP) para aplicaciones que usan transacciones distribuidas.</span><span class="sxs-lookup"><span data-stu-id="8b70a-111">**DistributedTransactionPermission** (DTP) for applications using distributed transactions.</span></span>  
  
- <span data-ttu-id="8b70a-112">Plena confianza para los recursos duraderos, aplicaciones de gestión de la configuración y las aplicaciones interoperativas heredadas.</span><span class="sxs-lookup"><span data-stu-id="8b70a-112">Full trust for durable resources, configuration management applications, and legacy interop applications.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8b70a-113">No se debería llamar a cualquiera de las interfaces de inscripción con contextos suplantados.</span><span class="sxs-lookup"><span data-stu-id="8b70a-113">You should not call any of the enlistment interfaces with impersonated contexts.</span></span>  
  
## <a name="trust-levels"></a><span data-ttu-id="8b70a-114">Niveles de confianza</span><span class="sxs-lookup"><span data-stu-id="8b70a-114">Trust Levels</span></span>  
  
### <a name="aptca-partial-trust"></a><span data-ttu-id="8b70a-115">APTCA (confianza parcial)</span><span class="sxs-lookup"><span data-stu-id="8b70a-115">APTCA (Partial Trust)</span></span>  
 <span data-ttu-id="8b70a-116">El <xref:System.Transactions> código de confianza parcial puede llamar al ensamblado porque se ha marcado con el atributo **ALLOWPARTIALLYTRUSTEDCALLERS** (APTCA).</span><span class="sxs-lookup"><span data-stu-id="8b70a-116">The <xref:System.Transactions> assembly can be called by partially trusted code because it has been marked with the **AllowPartiallyTrustedCallers** attribute (APTCA).</span></span> <span data-ttu-id="8b70a-117">Este atributo quita esencialmente el implícito <xref:System.Security.Permissions.SecurityAction.LinkDemand> para el conjunto de permisos **FullTrust** que, de otro modo, se coloca automáticamente en cada método de acceso público de cada tipo.</span><span class="sxs-lookup"><span data-stu-id="8b70a-117">This attribute essentially removes the implicit <xref:System.Security.Permissions.SecurityAction.LinkDemand> for the **FullTrust** permission set that is otherwise automatically placed on each publicly accessible method in each type.</span></span> <span data-ttu-id="8b70a-118">Sin embargo, algunos tipos y miembros siguen necesitando permisos más firmes.</span><span class="sxs-lookup"><span data-stu-id="8b70a-118">However, some types and members still require stronger permissions.</span></span>  
  
 <span data-ttu-id="8b70a-119">El atributo APTCA permite a las aplicaciones utilizar las transacciones en confianza parcial dentro de un dominio de aplicación único.</span><span class="sxs-lookup"><span data-stu-id="8b70a-119">The APTCA attribute enables applications to use transactions in partial trust within a single application domain.</span></span> <span data-ttu-id="8b70a-120">Esto habilita las transacciones no escalonadas y las inscripciones volátiles que se pueden utilizar para el control de errores.</span><span class="sxs-lookup"><span data-stu-id="8b70a-120">This enables non-escalated transactions and volatile enlistments that can be used for error handling.</span></span> <span data-ttu-id="8b70a-121">Un ejemplo de esto es una tabla hash llevada a cabo y una aplicación que lo utiliza.</span><span class="sxs-lookup"><span data-stu-id="8b70a-121">One example of this is a transacted hash table and an application that uses it.</span></span> <span data-ttu-id="8b70a-122">Los datos se pueden agregar a y quitar de la tabla hash bajo una transacción única.</span><span class="sxs-lookup"><span data-stu-id="8b70a-122">Data can be added to and removed from the hash table under a single transaction.</span></span> <span data-ttu-id="8b70a-123">Si se deshace la transacción después, se pueden deshacer todos los cambios realizados a la tabla hash bajo esa transacción.</span><span class="sxs-lookup"><span data-stu-id="8b70a-123">If the transaction is later rolled back, all of the changes made to the hash table under that transaction can be undone.</span></span>  
  
### <a name="distributedtransactionpermission-dtp"></a><span data-ttu-id="8b70a-124">DistributedTransactionPermission (DTP)</span><span class="sxs-lookup"><span data-stu-id="8b70a-124">DistributedTransactionPermission (DTP)</span></span>  
 <span data-ttu-id="8b70a-125">Cuando se realiza una escalada una transacción <xref:System.Transactions> para ser administrada por MSDTC, <xref:System.Transactions> exige (DTP) <xref:System.Transactions.DistributedTransactionPermission> para crear la transacción distribuida.</span><span class="sxs-lookup"><span data-stu-id="8b70a-125">When a <xref:System.Transactions> transaction is escalated to be managed by MSDTC, <xref:System.Transactions> demands the <xref:System.Transactions.DistributedTransactionPermission> (DTP) to create the distributed transaction.</span></span> <span data-ttu-id="8b70a-126">Esto significa que el código que produce la transacción que ha de realizar una escalada (como a través de serialización o las inscripciones adicionales duraderas) necesitaría ser concedido DTP.</span><span class="sxs-lookup"><span data-stu-id="8b70a-126">This means that the code that causes the transaction to be escalated (such as through serialization or additional durable enlistments) would need to be granted DTP.</span></span> <span data-ttu-id="8b70a-127">El código que originalmente creó la transacción <xref:System.Transactions> necesariamente no necesita poseer este permiso.</span><span class="sxs-lookup"><span data-stu-id="8b70a-127">The code that originally created the <xref:System.Transactions> transaction does not necessarily need to possess this permission.</span></span>  
  
### <a name="fulltrust-link-demands"></a><span data-ttu-id="8b70a-128">Peticiones de vínculo de FullTrust</span><span class="sxs-lookup"><span data-stu-id="8b70a-128">FullTrust Link Demands</span></span>  
 <span data-ttu-id="8b70a-129">Se piensa que este nivel de permisos restringe aplicaciones que están escribiendo en los recursos duraderos.</span><span class="sxs-lookup"><span data-stu-id="8b70a-129">This permission level is intended to restrict applications that are writing to durable resources.</span></span> <span data-ttu-id="8b70a-130">En el error, la aplicación necesita poder recuperarse con el administrador de transacciones para determinar el último resultado de la transacción, para que pueda actualizar los datos permanentes.</span><span class="sxs-lookup"><span data-stu-id="8b70a-130">Upon failure, the application needs to be able to recover with the transaction manager to determine the final outcome of the transaction, so that it can update permanent data.</span></span> <span data-ttu-id="8b70a-131">Este tipo de aplicación es conocido como un administrador de origen duradero.</span><span class="sxs-lookup"><span data-stu-id="8b70a-131">This type of application is known as a durable source manager.</span></span> <span data-ttu-id="8b70a-132">Un ejemplo clásico de este tipo de aplicación es SQL.</span><span class="sxs-lookup"><span data-stu-id="8b70a-132">A classic example of this type of application is SQL.</span></span>  
  
 <span data-ttu-id="8b70a-133">Para habilitar la recuperación, este tipo de aplicación tiene la capacidad de utilizar permanentemente los recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="8b70a-133">To enable recovery, this type of application has the ability to permanently consume system resources.</span></span> <span data-ttu-id="8b70a-134">Esto sucede porque el administrador de transacciones recuperable debe recordar transacciones que se han confirmado hasta que pueda confirmar que todos los administradores de recursos duraderos que están participando en la transacción han recibido el resultado.</span><span class="sxs-lookup"><span data-stu-id="8b70a-134">This is because the recoverable transaction manager must remember transactions that have committed until it can confirm that all durable resource managers that are participating in the transaction have received the outcome.</span></span> <span data-ttu-id="8b70a-135">Por consiguiente, este tipo de aplicación requiere la plena confianza y no se ejecuta a menos que se haya permitido ese nivel de confianza.</span><span class="sxs-lookup"><span data-stu-id="8b70a-135">Therefore, this type of application requires full trust and should not be run unless that level of trust has been granted.</span></span>  
  
 <span data-ttu-id="8b70a-136">Para obtener más información sobre las inlistas y la recuperación duraderas, consulte los temas [dar de alta los recursos como participantes en una transacción](enlisting-resources-as-participants-in-a-transaction.md) y [realizar la recuperación](performing-recovery.md) .</span><span class="sxs-lookup"><span data-stu-id="8b70a-136">For more information on durable enlistments and recovery, see the [Enlisting Resources as Participants in a Transaction](enlisting-resources-as-participants-in-a-transaction.md) and [Performing Recovery](performing-recovery.md) topics.</span></span>  
  
 <span data-ttu-id="8b70a-137">También exigen a las aplicaciones que realizan el trabajo de la interoperabilidad heredado con COM+ que tengan la plena confianza.</span><span class="sxs-lookup"><span data-stu-id="8b70a-137">Applications that perform legacy interop work with COM+ are also required to have full trust.</span></span>  
  
 <span data-ttu-id="8b70a-138">A continuación se muestra una lista de tipos y miembros a los que no se puede llamar mediante código de confianza parcial porque se representan con el atributo de seguridad declarativa **FullTrust** :</span><span class="sxs-lookup"><span data-stu-id="8b70a-138">The following is a list of types and members that are not callable by partially trusted code because they are decorated with the **FullTrust** declarative security attribute:</span></span>  
  
 `PermissionSetAttribute(SecurityAction.LinkDemand, Name := "FullTrust")`  
  
- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>  
  
- <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>  
  
- <xref:System.Transactions.TransactionInterop>  
  
- <xref:System.Transactions.TransactionManager.DistributedTransactionStarted>  
  
- <xref:System.Transactions.HostCurrentTransactionCallback>  
  
- <xref:System.Transactions.TransactionManager.Reenlist%2A>  
  
- <xref:System.Transactions.TransactionManager.RecoveryComplete%2A>  
  
- <xref:System.Transactions.TransactionScope.%23ctor%28System.Transactions.TransactionScopeOption%2CSystem.Transactions.TransactionOptions%2CSystem.Transactions.EnterpriseServicesInteropOption%29>  
  
 <span data-ttu-id="8b70a-139">Solo se requiere que el llamador inmediato posea el conjunto de permisos **FullTrust** para usar los tipos o métodos anteriores.</span><span class="sxs-lookup"><span data-stu-id="8b70a-139">Only the immediate caller is required to possess the **FullTrust** permission set to use the above types or methods.</span></span>
