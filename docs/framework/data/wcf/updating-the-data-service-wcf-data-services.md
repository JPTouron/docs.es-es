---
title: Actualizar el servicio de datos (Servicios de datos de WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, changing data
- WCF Data Services, client library
ms.assetid: 00d993be-ffed-4dea-baf7-6eea982cdb54
ms.openlocfilehash: 3e2bd3f4ca5402abe4a7f8ec8f5410effaee6700
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91180613"
---
# <a name="updating-the-data-service-wcf-data-services"></a><span data-ttu-id="3a45e-102">Actualizar el servicio de datos (Servicios de datos de WCF)</span><span class="sxs-lookup"><span data-stu-id="3a45e-102">Updating the Data Service (WCF Data Services)</span></span>

<span data-ttu-id="3a45e-103">Cuando se usa la biblioteca de cliente de WCF Data Services para consumir una fuente de Open Data Protocol (OData), la biblioteca traduce las entradas de la fuente en instancias de las clases del servicio de datos de cliente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-103">When you use the WCF Data Services client library to consume an Open Data Protocol (OData) feed, the library translates the entries in the feed into instances of client data service classes.</span></span> <span data-ttu-id="3a45e-104">La instancia de <xref:System.Data.Services.Client.DataServiceContext> a la que pertenece la instancia de <xref:System.Data.Services.Client.DataServiceQuery%601> realiza el seguimiento de estas clases del servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-104">These data service classes are tracked by using the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span> <span data-ttu-id="3a45e-105">El cliente realiza el seguimiento de los cambios en las entidades que se notifican utilizando métodos de <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-105">The client tracks changes to entities that you report by using methods on <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="3a45e-106">Estos métodos permiten al cliente realizar el seguimiento de las entidades agregadas y eliminadas y también de los cambios que se realizan en los valores de propiedad o en las relaciones entre instancias de entidad.</span><span class="sxs-lookup"><span data-stu-id="3a45e-106">These methods enable the client to track added and deleted entities and also changes that you make to property values or to relationships between entity instances.</span></span> <span data-ttu-id="3a45e-107">Estos cambios se devuelven al servicio de datos como operaciones basadas en REST al llamar al método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-107">Those tracked changes are sent back to the data service as REST-based operations when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="3a45e-108">Al utilizar una instancia de <xref:System.Data.Services.Client.DataServiceCollection%601> para enlazar los datos a los controles, los cambios realizados en los datos del control enlazado se notifican automáticamente a <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-108">When you use an instance of <xref:System.Data.Services.Client.DataServiceCollection%601> to bind data to controls, changes made to data in the bound control are automatically reported to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="3a45e-109">Para obtener más información, consulte [enlazar datos a controles](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-109">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>  
  
## <a name="adding-modifying-and-changing-entities"></a><span data-ttu-id="3a45e-110">Agregar, modificar y cambiar entidades</span><span class="sxs-lookup"><span data-stu-id="3a45e-110">Adding, Modifying, and Changing Entities</span></span>  

 <span data-ttu-id="3a45e-111">Cuando se usa el cuadro de diálogo de **Agregar referencia de servicio** en Visual Studio para agregar una referencia a una fuente de oData, cada una de las clases de servicio de datos de cliente resultantes tiene un método de *creación* estático que toma un parámetro para cada propiedad de entidad que no admite valores NULL.</span><span class="sxs-lookup"><span data-stu-id="3a45e-111">When you use the **Add Service Reference** dialog in Visual Studio to add a reference to an OData feed, the resulting client data service classes each have a static *Create* method that takes one parameter for each non-nullable entity property.</span></span> <span data-ttu-id="3a45e-112">Puede usar este método para crear instancias de clases de tipos de entidad, como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3a45e-112">You can use this method to create instances of entity type classes, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#createnewproduct)]
 [!code-vb[Astoria Northwind Client#CreateNewProduct](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#createnewproduct)]  
  
 <span data-ttu-id="3a45e-113">Para agregar una instancia de entidad, llame al método *AddTo* adecuado en la <xref:System.Data.Services.Client.DataServiceContext> clase generada por el cuadro de diálogo **Agregar referencia de servicio** , como en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3a45e-113">To add an entity instance, call the appropriate *AddTo* method on the <xref:System.Data.Services.Client.DataServiceContext> class generated by the **Add Service Reference** dialog box, as in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addproductspecific)]
 [!code-vb[Astoria Northwind Client#AddProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addproductspecific)]  
  
 <span data-ttu-id="3a45e-114">Esto agrega el objeto al contexto y al conjunto de entidades correcto.</span><span class="sxs-lookup"><span data-stu-id="3a45e-114">This adds the object to the context and into the correct entity set.</span></span> <span data-ttu-id="3a45e-115">También puede llamar al método <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, pero, en ese caso, debe proporcionar el nombre del conjunto de entidades.</span><span class="sxs-lookup"><span data-stu-id="3a45e-115">You can also call <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A>, but you must instead supply the entity set name.</span></span> <span data-ttu-id="3a45e-116">Si la entidad agregada tiene una o varias relaciones con otras entidades, puede usar el método <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> o bien uno de los métodos anteriores y también definir esos vínculos explícitamente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-116">If the added entity has one or more relationships to other entities, you can either use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method or use one of the previous methods and also explicitly define those links.</span></span> <span data-ttu-id="3a45e-117">Estas operaciones se explican más adelante en este tema.</span><span class="sxs-lookup"><span data-stu-id="3a45e-117">These operations are discussed later in this topic.</span></span>  
  
 <span data-ttu-id="3a45e-118">Para modificar una instancia de una entidad existente, primero ejecute una consulta para esa entidad, efectúe los cambios deseados en sus propiedades y, a continuación, llame al método <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> de la instancia de <xref:System.Data.Services.Client.DataServiceContext> para indicar a la biblioteca cliente que debe enviar una actualización para ese objeto, como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3a45e-118">To modify an existing entity instance, first query for that entity, make the desired changes to its properties, and then call the <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> to indicate to the client library that it needs to send an update for that object, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#modifycustomerspecific)]
 [!code-vb[Astoria Northwind Client#ModifyCustomerSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#modifycustomerspecific)]  
  
 <span data-ttu-id="3a45e-119">Para eliminar una instancia de una entidad, llame al método <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> de la instancia de la clase <xref:System.Data.Services.Client.DataServiceContext>, como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3a45e-119">To delete an entity instance, call the <xref:System.Data.Services.Client.DataServiceContext.DeleteObject%2A> method on the <xref:System.Data.Services.Client.DataServiceContext>, as shown in the following example:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#deleteproductspecific)]
 [!code-vb[Astoria Northwind Client#DeleteProductSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#deleteproductspecific)]  
  
 <span data-ttu-id="3a45e-120">Para obtener más información, vea [Cómo: agregar, modificar y eliminar entidades](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-120">For more information, see [How to: Add, Modify, and Delete Entities](how-to-add-modify-and-delete-entities-wcf-data-services.md).</span></span>  
  
## <a name="attaching-entities"></a><span data-ttu-id="3a45e-121">Adjuntar entidades</span><span class="sxs-lookup"><span data-stu-id="3a45e-121">Attaching Entities</span></span>  

 <span data-ttu-id="3a45e-122">La biblioteca de clientes le permite guardar las actualizaciones que realizó en una entidad sin ejecutar primero ninguna consulta para cargar la entidad en la instancia de la clase <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-122">The client library enables you to save updates that you made to an entity without first executing a query to load the entity into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="3a45e-123">Use el método <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> para adjuntar un objeto existente a un conjunto de entidades concreto de la instancia de <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-123">Use the <xref:System.Data.Services.Client.DataServiceContext.AttachTo%2A> method to attach an existing object to a specific entity set in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="3a45e-124">Después puede modificar el objeto y guardar los cambios en el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-124">You can then modify the object and save the changes to the data service.</span></span> <span data-ttu-id="3a45e-125">En el ejemplo siguiente, se adjunta al contexto un objeto de cliente que se ha cambiado y, a continuación, se llama a <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> para marcar el objeto adjunto como <xref:System.Data.Services.Client.EntityStates.Modified> antes de llamar a <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>:</span><span class="sxs-lookup"><span data-stu-id="3a45e-125">In the following example, a customer object that has been changed is attached to the context and then <xref:System.Data.Services.Client.DataServiceContext.UpdateObject%2A> is called to mark the attached object as <xref:System.Data.Services.Client.EntityStates.Modified> before <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#attachobjectspecific)]
 [!code-vb[Astoria Northwind Client#AttachObjectSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#attachobjectspecific)]  
  
 <span data-ttu-id="3a45e-126">Al asociar objetos deben tenerse en cuenta las consideraciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="3a45e-126">The following considerations apply when attaching objects:</span></span>  
  
- <span data-ttu-id="3a45e-127">Un objeto se adjunta con el estado <xref:System.Data.Services.Client.EntityStates.Unchanged>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-127">An object is attached in the <xref:System.Data.Services.Client.EntityStates.Unchanged> state.</span></span>  
  
- <span data-ttu-id="3a45e-128">Cuando se adjunta un objeto, no se adjuntan los objetos relacionados con el objeto adjunto.</span><span class="sxs-lookup"><span data-stu-id="3a45e-128">When an object is attached, objects that are related to the attached object are not also attached.</span></span>  
  
- <span data-ttu-id="3a45e-129">No se puede adjuntar un objeto si el contexto ya está realizando el seguimiento de la entidad.</span><span class="sxs-lookup"><span data-stu-id="3a45e-129">An object cannot be attached if the entity is already being tracked by the context.</span></span>  
  
- <span data-ttu-id="3a45e-130">Se usa la sobrecarga del método <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> que toma un parámetro `etag` cuando se adjunta un objeto entidad que se recibió junto con un valor de eTag.</span><span class="sxs-lookup"><span data-stu-id="3a45e-130">The <xref:System.Data.Services.Client.DataServiceContext.AttachTo%28System.String%2CSystem.Object%2CSystem.String%29> method overload that takes an `etag` parameter is used when you attach an entity object that was received along with an eTag value.</span></span> <span data-ttu-id="3a45e-131">Este valor de eTag se usa después para comprobar la simultaneidad cuando se guardan los cambios realizados en el objeto adjunto.</span><span class="sxs-lookup"><span data-stu-id="3a45e-131">This eTag value is then used to check for concurrency when changes to the attached object are saved.</span></span>  
  
 <span data-ttu-id="3a45e-132">Para obtener más información, consulte [Cómo: adjuntar una entidad existente a DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-132">For more information, see [How to: Attach an Existing Entity to the DataServiceContext](attach-an-existing-entity-to-dc-wcf-data.md).</span></span>  
  
## <a name="creating-and-modifying-relationship-links"></a><span data-ttu-id="3a45e-133">Crear y modificar vínculos de relación</span><span class="sxs-lookup"><span data-stu-id="3a45e-133">Creating and Modifying Relationship Links</span></span>  

 <span data-ttu-id="3a45e-134">Cuando se agrega una nueva entidad mediante el <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> método o el método *AddTo* adecuado de la <xref:System.Data.Services.Client.DataServiceContext> clase que genera el cuadro de diálogo de **Agregar referencia de servicio** , las relaciones entre la nueva entidad y las entidades relacionadas no se definen automáticamente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-134">When you add a new entity by using either the <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> method or the appropriate *AddTo* method of the <xref:System.Data.Services.Client.DataServiceContext> class that the **Add Service Reference** dialog generates, any relationships between the new entity and related entities are not automatically defined.</span></span>  
  
 <span data-ttu-id="3a45e-135">Puede crear y cambiar las relaciones entre las instancias de las entidades y hacer que la biblioteca de cliente refleje esos cambios en el servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-135">You can create and change relationships between entity instances and have the client library reflect those changes in the data service.</span></span> <span data-ttu-id="3a45e-136">Las relaciones entre las entidades se definen como asociaciones en el modelo y la clase <xref:System.Data.Services.Client.DataServiceContext> realiza el seguimiento de cada relación como objeto de vínculo en el contexto.</span><span class="sxs-lookup"><span data-stu-id="3a45e-136">Relationships between entities are defined as associations in the model, and the <xref:System.Data.Services.Client.DataServiceContext> tracks each relationship as a link object in the context.</span></span> <span data-ttu-id="3a45e-137">WCF Data Services proporciona los métodos siguientes en la <xref:System.Data.Services.Client.DataServiceContext> clase para crear, modificar y eliminar estos vínculos:</span><span class="sxs-lookup"><span data-stu-id="3a45e-137">WCF Data Services provides the following methods on the <xref:System.Data.Services.Client.DataServiceContext> class to create, modify, and delete these links:</span></span>  
  
|<span data-ttu-id="3a45e-138">Método</span><span class="sxs-lookup"><span data-stu-id="3a45e-138">Method</span></span>|<span data-ttu-id="3a45e-139">Descripción</span><span class="sxs-lookup"><span data-stu-id="3a45e-139">Description</span></span>|  
|------------|-----------------|  
|<xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A>|<span data-ttu-id="3a45e-140">Crea un nuevo vínculo entre dos objetos entidad relacionados.</span><span class="sxs-lookup"><span data-stu-id="3a45e-140">Creates a new link between two related entity objects.</span></span> <span data-ttu-id="3a45e-141">Llamar a este método es equivalente a llamar a los métodos <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> y <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> tanto para crear el nuevo objeto como para definir la relación en un objeto existente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-141">Calling this method is equivalent to calling <xref:System.Data.Services.Client.DataServiceContext.AddObject%2A> and <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> to both create the new object and define the relationship to an existing object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>|<span data-ttu-id="3a45e-142">Crea un nuevo vínculo entre dos objetos entidad relacionados.</span><span class="sxs-lookup"><span data-stu-id="3a45e-142">Creates a new link between two related entity objects.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>|<span data-ttu-id="3a45e-143">Actualiza un vínculo existente entre dos objetos de entidad relacionados.</span><span class="sxs-lookup"><span data-stu-id="3a45e-143">Updates an existing link between two related entity objects.</span></span> <span data-ttu-id="3a45e-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> también se usa para eliminar los vínculos con una cardinalidad de cero o uno a uno (`0..1:1`) y de uno a uno (`1:1`).</span><span class="sxs-lookup"><span data-stu-id="3a45e-144"><xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> is also used to delete links with a cardinality of zero-or-one-to-one (`0..1:1`) and one-to-one (`1:1`).</span></span> <span data-ttu-id="3a45e-145">Para ello, puede establecer el objeto relacionado en `null`.</span><span class="sxs-lookup"><span data-stu-id="3a45e-145">You can do this by setting the related object to `null`.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DeleteLink%2A>|<span data-ttu-id="3a45e-146">Marca para su eliminación un vínculo cuyo seguimiento lo está realizando el contexto cuando se llame al método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-146">Marks a link that the context is tracking for deletion when the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method is called.</span></span> <span data-ttu-id="3a45e-147">Use este método cuando elimine un objeto relacionado o cuando cambie una relación eliminando primero el vínculo a un objeto existente y luego agregando un vínculo al nuevo objeto relacionado.</span><span class="sxs-lookup"><span data-stu-id="3a45e-147">Use this method when you delete a related object or change a relationship by first deleting the link to an existing object and then adding a link to the new related object.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.AttachLink%2A>|<span data-ttu-id="3a45e-148">Notifica al contexto la existencia de un vínculo entre dos objetos entidad.</span><span class="sxs-lookup"><span data-stu-id="3a45e-148">Notifies the context of an existing link between two entity objects.</span></span> <span data-ttu-id="3a45e-149">El contexto supone que esta relación ya existe en el servicio de datos y no intenta crear el vínculo cuando se llama al método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-149">The context assumes that this relationship already exists in the data service and does not try to create the link when you call the <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> method.</span></span> <span data-ttu-id="3a45e-150">Use este método cuando adjunte objetos a un contexto y también necesite adjuntar el vínculo entre los dos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-150">Use this method when you attach objects to a context and need to also attach the link between the two.</span></span> <span data-ttu-id="3a45e-151">Si está definiendo una nueva relación, en su lugar debe usar el método <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-151">If you are defining a new relationship, you should instead use <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>.</span></span>|  
|<xref:System.Data.Services.Client.DataServiceContext.DetachLink%2A>|<span data-ttu-id="3a45e-152">Deja de realizar el seguimiento del vínculo especificado en el contexto.</span><span class="sxs-lookup"><span data-stu-id="3a45e-152">Stops tracking the specified link in the context.</span></span> <span data-ttu-id="3a45e-153">Este método se usa para eliminar relaciones uno a varios (`*:*`).</span><span class="sxs-lookup"><span data-stu-id="3a45e-153">This method is used to delete one-to-many (`*:*`) relationships.</span></span> <span data-ttu-id="3a45e-154">En vínculos de relación con una cardinalidad de uno, debe usar el método <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A> en su lugar.</span><span class="sxs-lookup"><span data-stu-id="3a45e-154">For relationship links with a cardinality of one, you must instead use <xref:System.Data.Services.Client.DataServiceContext.SetLink%2A>.</span></span>|  
  
 <span data-ttu-id="3a45e-155">En el ejemplo siguiente se muestra la forma de usar el método <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> para agregar un nuevo `Order_Detail` que se relacione con una entidad `Orders` existente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-155">The following example shows how to use the <xref:System.Data.Services.Client.DataServiceContext.AddRelatedObject%2A> method to add a new `Order_Detail` that is related to an existing `Orders` entity.</span></span> <span data-ttu-id="3a45e-156">Dado que el seguimiento del nuevo objeto `Order_Details` lo realiza la clase <xref:System.Data.Services.Client.DataServiceContext>, la relación del objeto `Order_Details` agregado a la entidad `Products` existente se define llamando al método <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A>:</span><span class="sxs-lookup"><span data-stu-id="3a45e-156">Because the new `Order_Details` object is now tracked by the <xref:System.Data.Services.Client.DataServiceContext>, the relationship of the added `Order_Details` object to the existing `Products` entity is defined by calling the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addorderdetailtoorderspecific)]
 [!code-vb[Astoria Northwind Client#AddOrderDetailToOrderSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addorderdetailtoorderspecific)]  
  
 <span data-ttu-id="3a45e-157">Mientras que el método <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> definen los vínculos que se deben crear en el servicio de datos, para que estos vínculos se reflejen en los objetos que están en el contexto, también debe establecer las propiedades de navegación en los propios objetos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-157">While the <xref:System.Data.Services.Client.DataServiceContext.AddLink%2A> method defines links that must be created in the data service, to have these links reflected in the objects that are in the context, you must also set the navigation properties on the objects themselves.</span></span> <span data-ttu-id="3a45e-158">En el ejemplo anterior, debe establecer las propiedades de navegación de la forma siguiente:</span><span class="sxs-lookup"><span data-stu-id="3a45e-158">In the previous example, you should set the navigation properties as follows:</span></span>  
  
 [!code-csharp[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#setnavprops)]
 [!code-vb[Astoria Northwind Client#SetNavProps](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#setnavprops)]  
  
 <span data-ttu-id="3a45e-159">Para obtener más información, vea [Cómo: definir relaciones de entidades](how-to-define-entity-relationships-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-159">For more information, see [How to: Define Entity Relationships](how-to-define-entity-relationships-wcf-data-services.md).</span></span>  
  
## <a name="saving-changes"></a><span data-ttu-id="3a45e-160">Guardar los cambios</span><span class="sxs-lookup"><span data-stu-id="3a45e-160">Saving Changes</span></span>  

 <span data-ttu-id="3a45e-161">El seguimiento de los cambios se realiza en la instancia de la clase <xref:System.Data.Services.Client.DataServiceContext>, pero los cambios no se envían al servidor inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="3a45e-161">Changes are tracked in the <xref:System.Data.Services.Client.DataServiceContext> instance but not sent to the server immediately.</span></span> <span data-ttu-id="3a45e-162">Una vez que haya efectuado los cambios necesarios de una actividad determinada, llame al método <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> para enviar todos los cambios al servicio de datos.</span><span class="sxs-lookup"><span data-stu-id="3a45e-162">After you are finished with the required changes for a specified activity, call <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> to submit all the changes to the data service.</span></span> <span data-ttu-id="3a45e-163">Para obtener más información, vea [administrar el contexto del servicio de datos](managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-163">For more information, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span> <span data-ttu-id="3a45e-164">También puede guardar cambios de forma asincrónica utilizando los métodos <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> y <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A>.</span><span class="sxs-lookup"><span data-stu-id="3a45e-164">You can also save changes asynchronously by using the <xref:System.Data.Services.Client.DataServiceContext.BeginSaveChanges%2A> and <xref:System.Data.Services.Client.DataServiceContext.EndSaveChanges%2A> methods.</span></span> <span data-ttu-id="3a45e-165">Para obtener más información, vea [operaciones asincrónicas](asynchronous-operations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="3a45e-165">For more information, see [Asynchronous Operations](asynchronous-operations-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3a45e-166">Consulte también</span><span class="sxs-lookup"><span data-stu-id="3a45e-166">See also</span></span>

- [<span data-ttu-id="3a45e-167">Biblioteca cliente de Data Services de WCF</span><span class="sxs-lookup"><span data-stu-id="3a45e-167">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="3a45e-168">Consultar el servicio de datos</span><span class="sxs-lookup"><span data-stu-id="3a45e-168">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="3a45e-169">Operaciones asincrónicas</span><span class="sxs-lookup"><span data-stu-id="3a45e-169">Asynchronous Operations</span></span>](asynchronous-operations-wcf-data-services.md)
- [<span data-ttu-id="3a45e-170">Procesamiento por lotes de operaciones</span><span class="sxs-lookup"><span data-stu-id="3a45e-170">Batching Operations</span></span>](batching-operations-wcf-data-services.md)
- [<span data-ttu-id="3a45e-171">Materialización de objetos</span><span class="sxs-lookup"><span data-stu-id="3a45e-171">Object Materialization</span></span>](object-materialization-wcf-data-services.md)
- [<span data-ttu-id="3a45e-172">Administración del contexto del servicio de datos</span><span class="sxs-lookup"><span data-stu-id="3a45e-172">Managing the Data Service Context</span></span>](managing-the-data-service-context-wcf-data-services.md)
