---
title: Usar acciones para implementar el comportamiento del servidor
ms.date: 03/30/2017
ms.assetid: 11a372db-7168-498b-80d2-9419ff557ba5
ms.openlocfilehash: 19139a7efd955448a1f97c492a7245c1bbfe6c3d
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91180600"
---
# <a name="using-actions-to-implement-server-side-behavior"></a><span data-ttu-id="32f3f-102">Usar acciones para implementar el comportamiento del servidor</span><span class="sxs-lookup"><span data-stu-id="32f3f-102">Using actions to implement server-side behavior</span></span>

<span data-ttu-id="32f3f-103">Las acciones OData proporcionan una manera de implementar un comportamiento que actúa sobre un recurso obtenido de un servicio OData.</span><span class="sxs-lookup"><span data-stu-id="32f3f-103">OData Actions provide a way to implement a behavior that acts upon a resource retrieved from an OData service.</span></span> <span data-ttu-id="32f3f-104">Por ejemplo, considere una película digital como un recurso; se pueden hacer muchas cosas con ella: desproteger, valorar/comentar o insertar en el repositorio.</span><span class="sxs-lookup"><span data-stu-id="32f3f-104">For example consider a digital movie as a resource, there are many things you may do with a digital movie: check-out, rate/comment, or check-in.</span></span> <span data-ttu-id="32f3f-105">Todos estos son ejemplos de acciones que se pueden implementar mediante un Servicio de datos de WCF que administre películas digitales.</span><span class="sxs-lookup"><span data-stu-id="32f3f-105">These are all examples of Actions that may be implemented by a WCF Data Service that manages digital movies.</span></span> <span data-ttu-id="32f3f-106">Las acciones se describen en una respuesta OData que contiene un recurso en el que se puede invocar la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-106">Actions are described in an OData response that contains a resource on which the Action can be invoked.</span></span> <span data-ttu-id="32f3f-107">Cuando un usuario solicita un recurso que representa una película digital, la respuesta devuelta por el Servicio de datos de WCF contiene información sobre las acciones disponibles para dicho recurso.</span><span class="sxs-lookup"><span data-stu-id="32f3f-107">When a user requests a resource that represents a digital movie the response returned from the WCF Data Service contains information about the Actions that are available for that resource.</span></span> <span data-ttu-id="32f3f-108">La disponibilidad de una acción puede depender del estado del servicio de datos o del recurso.</span><span class="sxs-lookup"><span data-stu-id="32f3f-108">The availability of an Action can depend on the state of the data service or resource.</span></span> <span data-ttu-id="32f3f-109">Por ejemplo, una vez desprotegida una película digital otro usuario no la puede desproteger.</span><span class="sxs-lookup"><span data-stu-id="32f3f-109">For example once a digital movie is checked out it cannot be checked out by another user.</span></span> <span data-ttu-id="32f3f-110">Los clientes pueden invocar una acción con solo especificar una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="32f3f-110">Clients can invoke an action simply by specifying a URL.</span></span> <span data-ttu-id="32f3f-111">Por ejemplo, `http://MyServer/MovieService.svc/Movies(6)` identificaría una película digital específica y `http://MyServer/MovieService.svc/Movies(6)/Checkout` invocaría la acción en la película específica.</span><span class="sxs-lookup"><span data-stu-id="32f3f-111">For example, `http://MyServer/MovieService.svc/Movies(6)` would identify a specific digital movie and `http://MyServer/MovieService.svc/Movies(6)/Checkout` would invoke the action on the specific movie.</span></span> <span data-ttu-id="32f3f-112">Las acciones le permiten exponer su modelo de servicio sin exponer el modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="32f3f-112">Actions allow you to expose you service model without exposing your data model.</span></span> <span data-ttu-id="32f3f-113">Continuando con el ejemplo de servicio de películas, quizás desee permitir que un usuario valore una película pero no desee exponer directamente los datos de valoración como un recurso.</span><span class="sxs-lookup"><span data-stu-id="32f3f-113">Continuing with the movie service example, you may wish to allow a user to rate a movie, but not directly expose the rating data as a resource.</span></span> <span data-ttu-id="32f3f-114">Podría implementar una acción de valoración que permitiera al usuario valorar una película pero no tener acceso directamente a los datos de valoración como un recurso.</span><span class="sxs-lookup"><span data-stu-id="32f3f-114">You could implement a Rate Action to allow the user to rate a movie but not directly access the rating data as a resource.</span></span>

## <a name="implementing-an-action"></a><span data-ttu-id="32f3f-115">Implementar una acción</span><span class="sxs-lookup"><span data-stu-id="32f3f-115">Implementing an action</span></span>

 <span data-ttu-id="32f3f-116">Para implementar una acción de servicio, debe implementar las <xref:System.IServiceProvider> interfaces, [llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103))y [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="32f3f-116">To implement a service action you must implement the <xref:System.IServiceProvider>, [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)), and [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) interfaces.</span></span> <span data-ttu-id="32f3f-117"><xref:System.IServiceProvider> permite a WCF Data Services obtener la implementación de [llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span><span class="sxs-lookup"><span data-stu-id="32f3f-117"><xref:System.IServiceProvider> allows WCF Data Services to get your implementation of [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)).</span></span> <span data-ttu-id="32f3f-118">[Llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) permite a WCF Data Services crear, buscar, describir e invocar acciones de servicio.</span><span class="sxs-lookup"><span data-stu-id="32f3f-118">[IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) allows WCF Data Services to create, find, describe and invoke service actions.</span></span> <span data-ttu-id="32f3f-119">[IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) le permite invocar el código que implementa el comportamiento de las acciones de servicio y obtener los resultados, si los hay.</span><span class="sxs-lookup"><span data-stu-id="32f3f-119">[IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) allows you to invoke the code that implements the service actions’ behavior and get the results, if any.</span></span> <span data-ttu-id="32f3f-120">Tenga en cuenta que WCF Data Services son Servicios de WCF por llamada; se creará una nueva instancia del servicio cada vez que se llame al servicio.</span><span class="sxs-lookup"><span data-stu-id="32f3f-120">Keep in mind that WCF Data Services are Per-Call WCF Services, a new instance of the service will be created each time the service is called.</span></span>  <span data-ttu-id="32f3f-121">Asegúrese de que no se realiza trabajo innecesario cuando se crea el servicio.</span><span class="sxs-lookup"><span data-stu-id="32f3f-121">Make sure no unnecessary work is done when the service is created.</span></span>

### <a name="iserviceprovider"></a><span data-ttu-id="32f3f-122">IServiceProvider</span><span class="sxs-lookup"><span data-stu-id="32f3f-122">IServiceProvider</span></span>

 <span data-ttu-id="32f3f-123"><xref:System.IServiceProvider> contiene un método denominado <xref:System.IServiceProvider.GetService%2A>.</span><span class="sxs-lookup"><span data-stu-id="32f3f-123"><xref:System.IServiceProvider> contains a method called <xref:System.IServiceProvider.GetService%2A>.</span></span> <span data-ttu-id="32f3f-124">WCF Data Services llama a este método para recuperar una serie de proveedores de servicios, incluidos proveedores de servicios de metadatos y proveedores de acciones de servicios de datos.</span><span class="sxs-lookup"><span data-stu-id="32f3f-124">This method is called by WCF Data Services to retrieve a number of service providers, including metadata service providers and data service action providers.</span></span> <span data-ttu-id="32f3f-125">Cuando se le pida un proveedor de acciones de servicio de datos, devuelva la implementación de [llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="32f3f-125">When asked for a data service action provider, return your [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) implementation.</span></span>

### <a name="idataserviceactionprovider"></a><span data-ttu-id="32f3f-126">IDataServiceActionProvider</span><span class="sxs-lookup"><span data-stu-id="32f3f-126">IDataServiceActionProvider</span></span>

 <span data-ttu-id="32f3f-127">[Llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contiene métodos que permiten recuperar información sobre las acciones disponibles.</span><span class="sxs-lookup"><span data-stu-id="32f3f-127">[IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) contains methods that allow you to retrieve information about the available actions.</span></span> <span data-ttu-id="32f3f-128">Al implementar [llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) , se aumentan los metadatos para el servicio que se define en la implementación del servicio de [llamará](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) con acciones y el control de envío a esas acciones según corresponda.</span><span class="sxs-lookup"><span data-stu-id="32f3f-128">When you implement [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) you are augmenting the metadata for your service which is defined by your service’s implementation of [IDataServiceActionProvider](/previous-versions/dotnet/wcf-data-services/hh859915(v=vs.103)) with Actions and handling dispatch to those actions as appropriate.</span></span>

#### <a name="advertiseserviceaction"></a><span data-ttu-id="32f3f-129">AdvertiseServiceAction</span><span class="sxs-lookup"><span data-stu-id="32f3f-129">AdvertiseServiceAction</span></span>

 <span data-ttu-id="32f3f-130">Se llama al [método AdvertiseServiceAction](/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) para determinar qué acciones están disponibles para el recurso especificado.</span><span class="sxs-lookup"><span data-stu-id="32f3f-130">The [AdvertiseServiceAction method](/previous-versions/dotnet/wcf-data-services/hh859971(v=vs.103)) is called to determine what actions are available for the specified resource.</span></span> <span data-ttu-id="32f3f-131">Solo se llama a este método para las acciones que no están siempre disponibles.</span><span class="sxs-lookup"><span data-stu-id="32f3f-131">This method is only called for actions that are not always available.</span></span> <span data-ttu-id="32f3f-132">Se emplea para comprobar si la acción se debe incluir en la respuesta OData según el estado del recurso que se solicita o el estado del servicio.</span><span class="sxs-lookup"><span data-stu-id="32f3f-132">It is used to check if the action should be included in the OData response based upon the state of the resource being requested or the state of the service.</span></span> <span data-ttu-id="32f3f-133">Usted decide cómo se realiza esta comprobación.</span><span class="sxs-lookup"><span data-stu-id="32f3f-133">How this check is accomplished is completely up to you.</span></span> <span data-ttu-id="32f3f-134">Si resulta costoso calcular la disponibilidad y el recurso actual está en una fuente, es aceptable omitir la comprobación y anunciar la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-134">If it is an expensive to calculate availability and the current resource is in a feed, it is acceptable to skip the check and advertise the action.</span></span> <span data-ttu-id="32f3f-135">El parámetro `inFeed` se establece en `true` si el recurso actual que se devuelve forma parte de una fuente.</span><span class="sxs-lookup"><span data-stu-id="32f3f-135">The `inFeed` parameter is set to `true` if the current resource being returned is part of a feed.</span></span>

#### <a name="createinvokable"></a><span data-ttu-id="32f3f-136">CreateInvokable</span><span class="sxs-lookup"><span data-stu-id="32f3f-136">CreateInvokable</span></span>

 <span data-ttu-id="32f3f-137">Se llama a [CreateInvokable](/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) para crear un [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) que contiene un delegado que encapsula el código que implementa el comportamiento de la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-137">[CreateInvokable](/previous-versions/dotnet/wcf-data-services/hh859940(v=vs.103)) is called to create a [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) that contains a delegate that encapsulates the code that implements the action’s behavior.</span></span> <span data-ttu-id="32f3f-138">Esto crea la instancia de [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) , pero no invoca la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-138">This creates the [IDataServiceInvokable](/previous-versions/dotnet/wcf-data-services/hh859893(v=vs.103)) instance but does not invoke the action.</span></span> <span data-ttu-id="32f3f-139">Las acciones de un Servicio de datos de WCF tienen efectos secundarios y deben usarse junto con el proveedor de actualizaciones para guardar estos cambios en disco.</span><span class="sxs-lookup"><span data-stu-id="32f3f-139">WCF Data Service Actions have side effects and need to work in conjunction with the Update Provider to save those changes to disk.</span></span> <span data-ttu-id="32f3f-140">Se llama al método [IDataServiceInvokable. Invoke](/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) desde el método SaveChanges () del proveedor de actualización.</span><span class="sxs-lookup"><span data-stu-id="32f3f-140">The [IDataServiceInvokable.Invoke](/previous-versions/dotnet/wcf-data-services/hh859924(v=vs.103)) method is called from the Update Provider’s SaveChanges() method is called.</span></span>

#### <a name="getserviceactions"></a><span data-ttu-id="32f3f-141">GetServiceActions</span><span class="sxs-lookup"><span data-stu-id="32f3f-141">GetServiceActions</span></span>

 <span data-ttu-id="32f3f-142">Este método devuelve una colección de instancias de [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) que representan todas las acciones que expone un servicio de datos de WCF.</span><span class="sxs-lookup"><span data-stu-id="32f3f-142">This method returns a collection of [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that represent all of the actions a WCF Data Service exposes.</span></span> <span data-ttu-id="32f3f-143">[ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) es la representación de los metadatos de una acción e incluye información como el nombre de la acción, sus parámetros y su tipo de valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="32f3f-143">[ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is the metadata representation of an Action and includes information like the Action name, its parameters, and its return type.</span></span>

#### <a name="getserviceactionsbybindingparametertype"></a><span data-ttu-id="32f3f-144">GetServiceActionsByBindingParameterType</span><span class="sxs-lookup"><span data-stu-id="32f3f-144">GetServiceActionsByBindingParameterType</span></span>

 <span data-ttu-id="32f3f-145">Este método devuelve una colección de todas las instancias de [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) que se pueden enlazar al tipo de parámetro de enlace especificado.</span><span class="sxs-lookup"><span data-stu-id="32f3f-145">This method returns a collection of all [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) instances that can be bound to the specified binding parameter type.</span></span> <span data-ttu-id="32f3f-146">En otras palabras, todos los [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))que pueden actuar en el tipo de recurso especificado (también denominado tipo de parámetro de enlace). Se utiliza cuando el servicio devuelve un recurso para incluir información acerca de las acciones que se pueden invocar en ese recurso.</span><span class="sxs-lookup"><span data-stu-id="32f3f-146">In other words, all [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103))s that can act on the specified resource type (also called binding parameter type).This is used when the service returns a resource in order to include information about Actions that can be invoked against that resource.</span></span> <span data-ttu-id="32f3f-147">Este método solo debe devolver acciones que se pueden enlazar al tipo de parámetro de enlace exacto (no a tipos derivados).</span><span class="sxs-lookup"><span data-stu-id="32f3f-147">This method should only return actions that can bind to the exact binding parameter type (no derived types).</span></span> <span data-ttu-id="32f3f-148">Se llama a este método una vez por solicitud por tipo encontrado y WCF Data Services almacena en memoria caché el resultado.</span><span class="sxs-lookup"><span data-stu-id="32f3f-148">This method is called once per request per type encountered and the result is cached by WCF Data Services.</span></span>

#### <a name="tryresolveserviceaction"></a><span data-ttu-id="32f3f-149">TryResolveServiceAction</span><span class="sxs-lookup"><span data-stu-id="32f3f-149">TryResolveServiceAction</span></span>

 <span data-ttu-id="32f3f-150">Este método busca un [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) especificado y devuelve `true` si se encuentra [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) .</span><span class="sxs-lookup"><span data-stu-id="32f3f-150">This method searches for a specified [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) and returns `true` if the [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is found.</span></span> <span data-ttu-id="32f3f-151">Si se encuentra, se devuelve [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) en el `serviceAction` `out` parámetro.</span><span class="sxs-lookup"><span data-stu-id="32f3f-151">If found, the [ServiceAction](/previous-versions/dotnet/wcf-data-services/hh544089(v=vs.103)) is returned in the `serviceAction` `out` parameter.</span></span>

### <a name="idataserviceinvokable"></a><span data-ttu-id="32f3f-152">IDataServiceInvokable</span><span class="sxs-lookup"><span data-stu-id="32f3f-152">IDataServiceInvokable</span></span>

 <span data-ttu-id="32f3f-153">Esta interfaz proporciona una forma de ejecutar una acción de un Servicio de datos de WCF.</span><span class="sxs-lookup"><span data-stu-id="32f3f-153">This interface provides a way to execute a WCF Data Service Action.</span></span> <span data-ttu-id="32f3f-154">A la hora de implementar IDataServiceInvokable, es responsable de 3 cosas:</span><span class="sxs-lookup"><span data-stu-id="32f3f-154">When implementing IDataServiceInvokable you are responsible for 3 things:</span></span>

1. <span data-ttu-id="32f3f-155">Capturar y posiblemente calcular las referencias de los parámetros</span><span class="sxs-lookup"><span data-stu-id="32f3f-155">Capturing and potentially marshaling the parameters</span></span>

2. <span data-ttu-id="32f3f-156">Enviar los parámetros al código que implementa realmente la acción cuando se llama a Invoke()</span><span class="sxs-lookup"><span data-stu-id="32f3f-156">Dispatching the parameters to the code that actually implements the Action when Invoke() is called</span></span>

3. <span data-ttu-id="32f3f-157">Almacenar los resultados de Invoke() para que se puedan recuperar mediante GetResult()</span><span class="sxs-lookup"><span data-stu-id="32f3f-157">Storing any results from Invoke() so they can be retrieved using GetResult()</span></span>

 <span data-ttu-id="32f3f-158">Los parámetros se pueden pasar como tokens.</span><span class="sxs-lookup"><span data-stu-id="32f3f-158">The parameters may be passed as tokens.</span></span> <span data-ttu-id="32f3f-159">Esto se debe a que es posible escribir un proveedor de servicios de datos que funcione con tokens que representan recursos; en este caso, quizás necesite convertir (serializar) estos tokens en recursos reales antes de enviarlos a la acción real.</span><span class="sxs-lookup"><span data-stu-id="32f3f-159">This is because it is possible to write a Data Service Provider that works with tokens that represent resources, if this is the case you may need to convert (marshal) these tokens into actual resources before dispatching to the actual action.</span></span> <span data-ttu-id="32f3f-160">Una vez calculadas las referencias del parámetro, debe estar en un estado editable para que cualquier cambio en el recurso que se produzca cuando se invoque la acción se guarde y se escriba en el disco.</span><span class="sxs-lookup"><span data-stu-id="32f3f-160">After the parameter has been marshaled, it must be in an editable state so that any changes to the resource that occur when the action is invoked will be saved and written to disk.</span></span>

 <span data-ttu-id="32f3f-161">Esta interfaz necesita dos métodos: Invoke y GetResult.</span><span class="sxs-lookup"><span data-stu-id="32f3f-161">This interface requires two methods: Invoke and GetResult.</span></span> <span data-ttu-id="32f3f-162">Invoke invoca el delegado que implementa el comportamiento de la acción y GetResult devuelve el resultado de la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-162">Invoke invokes the delegate that implements the action’s behavior and GetResult returns the result of the action.</span></span>

## <a name="invoking-a-wcf-data-service-action"></a><span data-ttu-id="32f3f-163">Invocar una acción de un Servicio de datos de WCF</span><span class="sxs-lookup"><span data-stu-id="32f3f-163">Invoking a WCF Data Service Action</span></span>

 <span data-ttu-id="32f3f-164">Las acciones se invocan mediante una solicitud POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="32f3f-164">Actions are invoked using an HTTP POST request.</span></span> <span data-ttu-id="32f3f-165">La dirección URL especifica el recurso seguido del nombre de la acción.</span><span class="sxs-lookup"><span data-stu-id="32f3f-165">The URL specifies the resource followed by the action name.</span></span> <span data-ttu-id="32f3f-166">Los parámetros se pasan en el cuerpo de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="32f3f-166">Parameters are passed in the body of the request.</span></span> <span data-ttu-id="32f3f-167">Por ejemplo, suponga que hay un servicio denominado MovieService que expone una acción denominada Rate.</span><span class="sxs-lookup"><span data-stu-id="32f3f-167">For example if there was a service called MovieService which exposed an action called Rate.</span></span> <span data-ttu-id="32f3f-168">Puede usar la dirección URL siguiente para invocar la acción Rate en una película concreta:</span><span class="sxs-lookup"><span data-stu-id="32f3f-168">You could use the following URL to invoke the Rate action on a specific movie:</span></span>

 `http://MovieServer/MovieService.svc/Movies(1)/Rate`

 <span data-ttu-id="32f3f-169">Movies(1) especifica la película que desea valorar y Rate especifica la acción Rate.</span><span class="sxs-lookup"><span data-stu-id="32f3f-169">Movies(1) specifies the movie you wish to rate and Rate specifies the Rate action.</span></span> <span data-ttu-id="32f3f-170">El valor real de la valoración estará en el cuerpo de la solicitud HTTP como se muestra en el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="32f3f-170">The actual value of the rating will be in the body of the HTTP request as shown in the following example:</span></span>

```http
POST http://MovieServer/MoviesService.svc/Movies(1)/Rate HTTP/1.1
Content-Type: application/json
Content-Length: 20
Host: localhost:15238
{
   "rating": 4
}
```

> [!WARNING]
> <span data-ttu-id="32f3f-171">El código muestra anterior solo funcionará con WCF Data Services 5.2 y versiones posteriores que admitan JSON ligero.</span><span class="sxs-lookup"><span data-stu-id="32f3f-171">The above sample code will work only with WCF Data Services 5.2 and later which has support for JSON light.</span></span> <span data-ttu-id="32f3f-172">Si emplea una versión anterior de WCF Data Services, debe especificar el content-type detallado de json de la manera siguiente: `application/json;odata=verbose`.</span><span class="sxs-lookup"><span data-stu-id="32f3f-172">If using an earlier version of WCF Data Services, you must specify the json verbose content-type as follows: `application/json;odata=verbose`.</span></span>

 <span data-ttu-id="32f3f-173">O bien, puede invocar una acción mediante el Cliente de WCF Data Services como se muestra en el fragmento de código siguiente.</span><span class="sxs-lookup"><span data-stu-id="32f3f-173">Alternatively you can invoke an action using the WCF Data Services Client as shown in the following code snippet.</span></span>

```csharp
MoviesModel context = new MoviesModel (new Uri("http://MyServer/MoviesService.svc/"));
//...
context.Execute(new Uri("http://MyServer/MoviesService.svc/Movies(1)/Rate"), "POST", new BodyOperationParameter("rating",4) );
```

 <span data-ttu-id="32f3f-174">En el fragmento de código anterior, la clase `MoviesModel` se generaba usando Visual Studio para Agregar referencia de servicio a un Servicio de datos de WCF.</span><span class="sxs-lookup"><span data-stu-id="32f3f-174">In the code snippet above, the `MoviesModel` class was generated by using Visual Studio to Add Service Reference to a WCF Data Service.</span></span>

## <a name="see-also"></a><span data-ttu-id="32f3f-175">Consulte también</span><span class="sxs-lookup"><span data-stu-id="32f3f-175">See also</span></span>

- [<span data-ttu-id="32f3f-176">WCF Data Services 4.5</span><span class="sxs-lookup"><span data-stu-id="32f3f-176">WCF Data Services 4.5</span></span>](index.md)
- [<span data-ttu-id="32f3f-177">Definir Servicios de datos de WCF</span><span class="sxs-lookup"><span data-stu-id="32f3f-177">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="32f3f-178">Desarrollo e implementación de WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="32f3f-178">Developing and Deploying WCF Data Services</span></span>](developing-and-deploying-wcf-data-services.md)
- [<span data-ttu-id="32f3f-179">Proveedores de servicios de datos personalizados</span><span class="sxs-lookup"><span data-stu-id="32f3f-179">Custom Data Service Providers</span></span>](custom-data-service-providers-wcf-data-services.md)
