---
title: Controlar eventos de DataTable
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 62f404a5-13ea-4b93-a29f-55b74a16c9d3
ms.openlocfilehash: c00e5e42508160a210d16f058c46afbf62ae0ee0
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91164732"
---
# <a name="handling-datatable-events"></a><span data-ttu-id="b7231-102">Controlar eventos de DataTable</span><span class="sxs-lookup"><span data-stu-id="b7231-102">Handling DataTable Events</span></span>

<span data-ttu-id="b7231-103">El objeto <xref:System.Data.DataTable> proporciona una serie de eventos que una aplicación puede procesar.</span><span class="sxs-lookup"><span data-stu-id="b7231-103">The <xref:System.Data.DataTable> object provides a series of events that can be processed by an application.</span></span> <span data-ttu-id="b7231-104">En la siguiente tabla se describen los eventos de `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-104">The following table describes `DataTable` events.</span></span>  
  
|<span data-ttu-id="b7231-105">Evento</span><span class="sxs-lookup"><span data-stu-id="b7231-105">Event</span></span>|<span data-ttu-id="b7231-106">Descripción</span><span class="sxs-lookup"><span data-stu-id="b7231-106">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Data.DataTable.Initialized>|<span data-ttu-id="b7231-107">Se produce después de haber llamado al método <xref:System.Data.DataTable.EndInit%2A> de un objeto `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-107">Occurs after the <xref:System.Data.DataTable.EndInit%2A> method of a `DataTable` is called.</span></span> <span data-ttu-id="b7231-108">Este evento está concebido principalmente para admitir escenarios en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="b7231-108">This event is intended primarily to support design-time scenarios.</span></span>|  
|<xref:System.Data.DataTable.ColumnChanged>|<span data-ttu-id="b7231-109">Se produce después de cambiar correctamente un valor en un objeto <xref:System.Data.DataColumn>.</span><span class="sxs-lookup"><span data-stu-id="b7231-109">Occurs after a value has been successfully changed in a <xref:System.Data.DataColumn>.</span></span>|  
|<xref:System.Data.DataTable.ColumnChanging>|<span data-ttu-id="b7231-110">Se produce cuando se ha enviado un valor para un objeto `DataColumn`.</span><span class="sxs-lookup"><span data-stu-id="b7231-110">Occurs when a value has been submitted for a `DataColumn`.</span></span>|  
|<xref:System.Data.DataTable.RowChanged>|<span data-ttu-id="b7231-111">Se produce cuando se ha cambiado correctamente un valor de `DataColumn` o la propiedad <xref:System.Data.DataRow.RowState%2A> de un objeto <xref:System.Data.DataRow> en el objeto `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-111">Occurs after a `DataColumn` value or the <xref:System.Data.DataRow.RowState%2A> of a <xref:System.Data.DataRow> in the `DataTable` has been changed successfully.</span></span>|  
|<xref:System.Data.DataTable.RowChanging>|<span data-ttu-id="b7231-112">Se produce cuando se ha enviado un cambio para un valor `DataColumn` o la propiedad `RowState` de un objeto `DataRow` en el objeto `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-112">Occurs when a change has been submitted for a `DataColumn` value or the `RowState` of a `DataRow` in the `DataTable`.</span></span>|  
|<xref:System.Data.DataTable.RowDeleted>|<span data-ttu-id="b7231-113">Se produce después de marcar un objeto `DataRow` de un objeto `DataTable` como `Deleted`.</span><span class="sxs-lookup"><span data-stu-id="b7231-113">Occurs after a `DataRow` in the `DataTable` has been marked as `Deleted`.</span></span>|  
|<xref:System.Data.DataTable.RowDeleting>|<span data-ttu-id="b7231-114">Se produce antes de marcar un objeto `DataRow` de un objeto `DataTable` como `Deleted`.</span><span class="sxs-lookup"><span data-stu-id="b7231-114">Occurs before a `DataRow` in the `DataTable` is marked as `Deleted`.</span></span>|  
|<xref:System.Data.DataTable.TableCleared>|<span data-ttu-id="b7231-115">Se produce después de que una llamada al método <xref:System.Data.DataTable.Clear%2A> del objeto `DataTable` haya borrado correctamente todos los objetos `DataRow`.</span><span class="sxs-lookup"><span data-stu-id="b7231-115">Occurs after a call to the <xref:System.Data.DataTable.Clear%2A> method of the `DataTable` has successfully cleared every `DataRow`.</span></span>|  
|<xref:System.Data.DataTable.TableClearing>|<span data-ttu-id="b7231-116">Se produce después de haber llamado al método `Clear` pero antes de que se inicie la operación `Clear`.</span><span class="sxs-lookup"><span data-stu-id="b7231-116">Occurs after the `Clear` method is called but before the `Clear` operation begins.</span></span>|  
|<xref:System.Data.DataTable.TableNewRow>|<span data-ttu-id="b7231-117">Se produce después de crear un nuevo objeto `DataRow` mediante una llamada al método `NewRow` del objeto `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-117">Occurs after a new `DataRow` is created by a call to the `NewRow` method of the `DataTable`.</span></span>|  
|<xref:System.ComponentModel.MarshalByValueComponent.Disposed>|<span data-ttu-id="b7231-118">Se produce cuando el objeto `DataTable` se establece en `Disposed`.</span><span class="sxs-lookup"><span data-stu-id="b7231-118">Occurs when the `DataTable` is `Disposed`.</span></span> <span data-ttu-id="b7231-119">Se hereda de <xref:System.ComponentModel.MarshalByValueComponent>.</span><span class="sxs-lookup"><span data-stu-id="b7231-119">Inherited from <xref:System.ComponentModel.MarshalByValueComponent>.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="b7231-120">La mayoría de las operaciones que agregan o eliminan filas no generan eventos `ColumnChanged` ni `ColumnChanging`.</span><span class="sxs-lookup"><span data-stu-id="b7231-120">Most operations that add or delete rows do not raise the `ColumnChanged` and `ColumnChanging` events.</span></span> <span data-ttu-id="b7231-121">Sin embargo, el método `ReadXml` sí genera eventos `ColumnChanged` y `ColumnChanging`, a menos que `XmlReadMode` se establezca en `DiffGram` o se establezca en `Auto` cuando el documento XML que se lee es `DiffGram`.</span><span class="sxs-lookup"><span data-stu-id="b7231-121">However, the `ReadXml` method does raise `ColumnChanged` and `ColumnChanging` events, unless the `XmlReadMode` is set to `DiffGram` or is set to `Auto` when the XML document being read is a `DiffGram`.</span></span>  
  
> [!WARNING]
> <span data-ttu-id="b7231-122">Es posible que los datos resulten dañados si se modifican en un `DataSet` desde el que se genera el evento `RowChanged`.</span><span class="sxs-lookup"><span data-stu-id="b7231-122">Data corruption can occur if data is modified in a `DataSet` from which the `RowChanged` event is raised.</span></span> <span data-ttu-id="b7231-123">No se producirá ninguna excepción si se produce este tipo de daño en los datos.</span><span class="sxs-lookup"><span data-stu-id="b7231-123">No exception will be raised if such data corruption occurs.</span></span>  
  
## <a name="additional-related-events"></a><span data-ttu-id="b7231-124">Eventos relacionados adicionales</span><span class="sxs-lookup"><span data-stu-id="b7231-124">Additional Related Events</span></span>  

 <span data-ttu-id="b7231-125">La propiedad <xref:System.Data.DataTable.Constraints%2A> contiene una instancia de <xref:System.Data.ConstraintCollection>.</span><span class="sxs-lookup"><span data-stu-id="b7231-125">The <xref:System.Data.DataTable.Constraints%2A> property holds a <xref:System.Data.ConstraintCollection> instance.</span></span> <span data-ttu-id="b7231-126">La clase <xref:System.Data.ConstraintCollection> expone un evento <xref:System.Data.ConstraintCollection.CollectionChanged>.</span><span class="sxs-lookup"><span data-stu-id="b7231-126">The <xref:System.Data.ConstraintCollection> class exposes a <xref:System.Data.ConstraintCollection.CollectionChanged> event.</span></span> <span data-ttu-id="b7231-127">Este evento se activa cuando se agrega, modifica o quita una restricción de `ConstraintCollection`.</span><span class="sxs-lookup"><span data-stu-id="b7231-127">This event fires when a constraint is added, modified, or removed from the `ConstraintCollection`.</span></span>  
  
 <span data-ttu-id="b7231-128">La propiedad <xref:System.Data.DataTable.Columns%2A> contiene una instancia de <xref:System.Data.DataColumnCollection>.</span><span class="sxs-lookup"><span data-stu-id="b7231-128">The <xref:System.Data.DataTable.Columns%2A> property holds a <xref:System.Data.DataColumnCollection> instance.</span></span> <span data-ttu-id="b7231-129">La clase `DataColumnCollection` expone un evento <xref:System.Data.DataColumnCollection.CollectionChanged>.</span><span class="sxs-lookup"><span data-stu-id="b7231-129">The `DataColumnCollection` class exposes a <xref:System.Data.DataColumnCollection.CollectionChanged> event.</span></span> <span data-ttu-id="b7231-130">Este evento se activa cuando se agrega, modifica o quita un objeto `DataColumn` de `DataColumnCollection`.</span><span class="sxs-lookup"><span data-stu-id="b7231-130">This event fires when a `DataColumn` is added, modified, or removed from the `DataColumnCollection`.</span></span> <span data-ttu-id="b7231-131">Entre las modificaciones que generan el inicio del evento se encuentran los cambios en el nombre, el tipo, la expresión o la posición ordinal de una columna.</span><span class="sxs-lookup"><span data-stu-id="b7231-131">Modifications that cause the event to fire include changes to the name, type, expression or ordinal position of a column.</span></span>  
  
 <span data-ttu-id="b7231-132">La propiedad <xref:System.Data.DataSet.Tables%2A> de un objeto <xref:System.Data.DataSet> incluye una instancia de <xref:System.Data.DataTableCollection>.</span><span class="sxs-lookup"><span data-stu-id="b7231-132">The <xref:System.Data.DataSet.Tables%2A> property of a <xref:System.Data.DataSet> holds a <xref:System.Data.DataTableCollection> instance.</span></span> <span data-ttu-id="b7231-133">La clase `DataTableCollection` expone los eventos `CollectionChanged` y `CollectionChanging`.</span><span class="sxs-lookup"><span data-stu-id="b7231-133">The `DataTableCollection` class exposes both a `CollectionChanged` and a `CollectionChanging` event.</span></span> <span data-ttu-id="b7231-134">Estos eventos se activan cuando se agrega o se quita un objeto `DataTable` del `DataSet`.</span><span class="sxs-lookup"><span data-stu-id="b7231-134">These events fire when a `DataTable` is added to or removed from the `DataSet`.</span></span>  
  
 <span data-ttu-id="b7231-135">Los cambios en `DataRows` también pueden activar eventos de un objeto <xref:System.Data.DataView> asociado.</span><span class="sxs-lookup"><span data-stu-id="b7231-135">Changes to `DataRows` can also trigger events for an associated <xref:System.Data.DataView>.</span></span> <span data-ttu-id="b7231-136">La clase `DataView` expone un evento <xref:System.Data.DataView.ListChanged> que se activa cuando cambia un valor de `DataColumn` o cuando cambian la composición o el criterio de ordenación de la vista.</span><span class="sxs-lookup"><span data-stu-id="b7231-136">The `DataView` class exposes a <xref:System.Data.DataView.ListChanged> event that fires when a `DataColumn` value changes or when the composition or sort order of the view changes.</span></span> <span data-ttu-id="b7231-137">La clase <xref:System.Data.DataRowView> expone un evento <xref:System.Data.DataRowView.PropertyChanged> que se activa cuando cambia un valor de `DataColumn` asociado.</span><span class="sxs-lookup"><span data-stu-id="b7231-137">The <xref:System.Data.DataRowView> class exposes a <xref:System.Data.DataRowView.PropertyChanged> event that fires when an associated `DataColumn` value changes.</span></span>  
  
## <a name="sequence-of-operations"></a><span data-ttu-id="b7231-138">Secuencia de operaciones</span><span class="sxs-lookup"><span data-stu-id="b7231-138">Sequence of Operations</span></span>  

 <span data-ttu-id="b7231-139">A continuación se indica la secuencia de las operaciones que tienen lugar cuando se agrega, modifica o elimina un objeto `DataRow`.</span><span class="sxs-lookup"><span data-stu-id="b7231-139">Here is the sequence of operations that occur when a `DataRow` is added, modified, or deleted:</span></span>  
  
1. <span data-ttu-id="b7231-140">Se crea el registro propuesto y se aplican los cambios.</span><span class="sxs-lookup"><span data-stu-id="b7231-140">Create the proposed record and apply any changes.</span></span>  
  
2. <span data-ttu-id="b7231-141">Se comprueban las restricciones en columnas que no son de expresión.</span><span class="sxs-lookup"><span data-stu-id="b7231-141">Check constraints for non-expression columns.</span></span>  
  
3. <span data-ttu-id="b7231-142">Se generan los eventos `RowChanging` o `RowDeleting`, según corresponda.</span><span class="sxs-lookup"><span data-stu-id="b7231-142">Raise the `RowChanging` or `RowDeleting` events as applicable.</span></span>  
  
4. <span data-ttu-id="b7231-143">El registro propuesto se establece en el registro actual.</span><span class="sxs-lookup"><span data-stu-id="b7231-143">Set the proposed record to be the current record.</span></span>  
  
5. <span data-ttu-id="b7231-144">Se actualizan los índices asociados.</span><span class="sxs-lookup"><span data-stu-id="b7231-144">Update any associated indexes.</span></span>  
  
6. <span data-ttu-id="b7231-145">Se generan los eventos `ListChanged` de los objetos `DataView` asociados y los eventos `PropertyChanged` de los objetos `DataRowView` asociados.</span><span class="sxs-lookup"><span data-stu-id="b7231-145">Raise `ListChanged` events for associated `DataView` objects and `PropertyChanged` events for associated `DataRowView` objects.</span></span>  
  
7. <span data-ttu-id="b7231-146">Se evalúan todas las columnas de expresión, pero se retrasa la comprobación de las restricciones de estas columnas.</span><span class="sxs-lookup"><span data-stu-id="b7231-146">Evaluate all expression columns, but delay checking any constraints on these columns.</span></span>  
  
8. <span data-ttu-id="b7231-147">Se generan los eventos `ListChanged` de los objetos `DataView` asociados y los eventos `PropertyChanged` de los objetos `DataRowView` asociados a los que afecten las evaluaciones de la columna de expresión.</span><span class="sxs-lookup"><span data-stu-id="b7231-147">Raise `ListChanged` events for associated `DataView` objects and `PropertyChanged` events for associated `DataRowView` objects affected by the expression column evaluations.</span></span>  
  
9. <span data-ttu-id="b7231-148">Se generan los eventos `RowChanged` o `RowDeleted`, según corresponda.</span><span class="sxs-lookup"><span data-stu-id="b7231-148">Raise `RowChanged` or `RowDeleted` events as applicable.</span></span>  
  
10. <span data-ttu-id="b7231-149">Se comprueban las restricciones en las columnas de expresión.</span><span class="sxs-lookup"><span data-stu-id="b7231-149">Check constraints on expression columns.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b7231-150">Los cambios en las columnas de expresión nunca generan eventos `DataTable`.</span><span class="sxs-lookup"><span data-stu-id="b7231-150">Changes to expression columns never raise `DataTable` events.</span></span> <span data-ttu-id="b7231-151">Los cambios en las columnas de expresión solo generan eventos `DataView` y `DataRowView`.</span><span class="sxs-lookup"><span data-stu-id="b7231-151">Changes to expression columns only raise `DataView` and `DataRowView` events.</span></span> <span data-ttu-id="b7231-152">Las columnas de expresión pueden tener dependencias en otras columnas y se pueden evaluar varias veces durante una única operación de `DataRow`.</span><span class="sxs-lookup"><span data-stu-id="b7231-152">Expression columns can have dependencies on multiple other columns, and can be evaluated multiple times during a single `DataRow` operation.</span></span> <span data-ttu-id="b7231-153">Cada evaluación de expresión genera eventos, y una sola operación de `DataRow` puede generar varios eventos `ListChanged` y `PropertyChanged` cuando se ven afectadas columnas de expresión, que posiblemente incluyen varios eventos para la misma columna de expresión.</span><span class="sxs-lookup"><span data-stu-id="b7231-153">Each expression evaluation raises events, and a single `DataRow` operation can raise multiple `ListChanged` and `PropertyChanged` events when expression columns are affected, possibly including multiple events for the same expression column.</span></span>  
  
> [!WARNING]
> <span data-ttu-id="b7231-154">No inicie una excepción <xref:System.NullReferenceException> dentro del controlador de eventos `RowChanged`.</span><span class="sxs-lookup"><span data-stu-id="b7231-154">Do not throw a <xref:System.NullReferenceException> within the `RowChanged` event handler.</span></span> <span data-ttu-id="b7231-155">Si se inicia una excepción <xref:System.NullReferenceException> dentro del evento `RowChanged` de un objeto `DataTable`, el objeto `DataTable` resultará dañado.</span><span class="sxs-lookup"><span data-stu-id="b7231-155">If a <xref:System.NullReferenceException> is thrown within the `RowChanged` event of a `DataTable`, then the `DataTable` will be corrupted.</span></span>  
  
### <a name="example"></a><span data-ttu-id="b7231-156">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="b7231-156">Example</span></span>  

 <span data-ttu-id="b7231-157">En el ejemplo siguiente se muestra cómo crear controladores de eventos para los eventos `RowChanged`, `RowChanging`, `RowDeleted`, `RowDeleting`, `ColumnChanged`, `ColumnChanging`, `TableNewRow`, `TableCleared` y `TableClearing`.</span><span class="sxs-lookup"><span data-stu-id="b7231-157">The following example demonstrates how to create event handlers for the `RowChanged`, `RowChanging`, `RowDeleted`, `RowDeleting`, `ColumnChanged`, `ColumnChanging`, `TableNewRow`, `TableCleared`, and `TableClearing` events.</span></span> <span data-ttu-id="b7231-158">Cada controlador de eventos muestra resultado en la ventana de la consola cuando se activa.</span><span class="sxs-lookup"><span data-stu-id="b7231-158">Each event handler displays output in the console window when it is fired.</span></span>  
  
 [!code-csharp[DataWorks DataTable.Events#1](../../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks DataTable.Events/CS/source.cs#1)]
 [!code-vb[DataWorks DataTable.Events#1](../../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks DataTable.Events/VB/source.vb#1)]  
  
## <a name="see-also"></a><span data-ttu-id="b7231-159">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b7231-159">See also</span></span>

- [<span data-ttu-id="b7231-160">Manipular datos en un objeto DataTable</span><span class="sxs-lookup"><span data-stu-id="b7231-160">Manipulating Data in a DataTable</span></span>](manipulating-data-in-a-datatable.md)
- [<span data-ttu-id="b7231-161">Controlar eventos de DataAdapter</span><span class="sxs-lookup"><span data-stu-id="b7231-161">Handling DataAdapter Events</span></span>](../handling-dataadapter-events.md)
- [<span data-ttu-id="b7231-162">Controlar eventos de DataSet</span><span class="sxs-lookup"><span data-stu-id="b7231-162">Handling DataSet Events</span></span>](handling-dataset-events.md)
- [<span data-ttu-id="b7231-163">Información general de ADO.NET</span><span class="sxs-lookup"><span data-stu-id="b7231-163">ADO.NET Overview</span></span>](../ado-net-overview.md)
