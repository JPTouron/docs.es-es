---
title: Autorización y permisos en SQL Server
description: Obtenga información acerca de cómo conceder permisos explícitamente para hacer que los objetos de base de datos que cree sean accesibles para los usuarios de SQL Server con ADO.NET.
ms.date: 03/30/2017
ms.assetid: d340405c-91f4-4837-a3cc-a238ee89888a
ms.openlocfilehash: 748d40ff2c64ae59f43e6296ef591efcb5ff9831
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91197500"
---
# <a name="authorization-and-permissions-in-sql-server"></a><span data-ttu-id="b2666-103">Autorización y permisos en SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2666-103">Authorization and Permissions in SQL Server</span></span>

<span data-ttu-id="b2666-104">Al crear objetos de base de datos, se deben conceder permisos de forma explícita para que los usuarios tengan acceso a ellos.</span><span class="sxs-lookup"><span data-stu-id="b2666-104">When you create database objects, you must explicitly grant permissions to make them accessible to users.</span></span> <span data-ttu-id="b2666-105">Cada objeto susceptible de protegerse tiene permisos que se pueden otorgar a una entidad de seguridad mediante instrucciones de permiso.</span><span class="sxs-lookup"><span data-stu-id="b2666-105">Every securable object has permissions that can be granted to a principal using permission statements.</span></span>  
  
## <a name="the-principle-of-least-privilege"></a><span data-ttu-id="b2666-106">Principio de los privilegios mínimos</span><span class="sxs-lookup"><span data-stu-id="b2666-106">The Principle of Least Privilege</span></span>  

 <span data-ttu-id="b2666-107">Desarrollar una aplicación utilizando un enfoque basado en cuenta de usuario de privilegios mínimos (LUA) constituye una parte importante de una estrategia de defensa exhaustiva contra las amenazas a la seguridad.</span><span class="sxs-lookup"><span data-stu-id="b2666-107">Developing an application using a least-privileged user account (LUA) approach is an important part of a defensive, in-depth strategy for countering security threats.</span></span> <span data-ttu-id="b2666-108">El enfoque LUA garantiza que los usuarios siguen el principio de los privilegios mínimos y siempre inician sesión con cuentas de usuario limitadas.</span><span class="sxs-lookup"><span data-stu-id="b2666-108">The LUA approach ensures that users follow the principle of least privilege and always log on with limited user accounts.</span></span> <span data-ttu-id="b2666-109">Las tareas administrativas se realizan utilizando roles fijos del servidor y el uso del rol fijo del servidor `sysadmin` es muy restringido.</span><span class="sxs-lookup"><span data-stu-id="b2666-109">Administrative tasks are broken out using fixed server roles, and the use of the `sysadmin` fixed server role is severely restricted.</span></span>  
  
 <span data-ttu-id="b2666-110">Cuando conceda permisos a usuarios de base de datos, siga siempre el principio de los privilegios mínimos.</span><span class="sxs-lookup"><span data-stu-id="b2666-110">Always follow the principle of least privilege when granting permissions to database users.</span></span> <span data-ttu-id="b2666-111">Otorgue a usuarios y roles los mínimos permisos necesarios para que puedan realizar una tarea concreta.</span><span class="sxs-lookup"><span data-stu-id="b2666-111">Grant the minimum permissions necessary to a user or role to accomplish a given task.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="b2666-112">Cuado se desarrolla o prueba una aplicación utilizando el enfoque LUA, se aumenta el grado de dificultad del proceso de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="b2666-112">Developing and testing an application using the LUA approach adds a degree of difficulty to the development process.</span></span> <span data-ttu-id="b2666-113">Resulta más fácil crear objetos y escribir código cuando se inicia sesión como administrador del sistema o propietario de la base de datos que cuando se utiliza una cuenta LUA.</span><span class="sxs-lookup"><span data-stu-id="b2666-113">It is easier to create objects and write code while logged on as a system administrator or database owner than it is using a LUA account.</span></span> <span data-ttu-id="b2666-114">Sin embargo, el desarrollo de aplicaciones con cuentas de privilegios elevados puede ofuscar el impacto de funcionalidades reducidas cuando usuarios con privilegios de nivel bajo intentan ejecutar una aplicación que requiere permisos elevados para funcionar correctamente.</span><span class="sxs-lookup"><span data-stu-id="b2666-114">However, developing applications using a highly privileged account can obfuscate the impact of reduced functionality when least privileged users attempt to run an application that requires elevated permissions in order to function correctly.</span></span> <span data-ttu-id="b2666-115">Otorgar a los usuarios permisos excesivos para recuperar funcionalidades perdidas puede exponer a la aplicación a posibles ataques.</span><span class="sxs-lookup"><span data-stu-id="b2666-115">Granting excessive permissions to users in order to reacquire lost functionality can leave your application vulnerable to attack.</span></span> <span data-ttu-id="b2666-116">El diseño, desarrollo y prueba de una aplicación en la que se ha iniciado sesión con una cuenta LUA impone un enfoque disciplinado del planeamiento de la seguridad que evita sorpresas desagradables, así como la tentación de recurrir a la solución rápida de otorgar privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="b2666-116">Designing, developing and testing your application logged on with a LUA account enforces a disciplined approach to security planning that eliminates unpleasant surprises and the temptation to grant elevated privileges as a quick fix.</span></span> <span data-ttu-id="b2666-117">Puede utilizar un inicio de sesión de SQL Server para realizar pruebas, incluso aunque la aplicación esté pensada para implementarse con autenticación de Windows.</span><span class="sxs-lookup"><span data-stu-id="b2666-117">You can use a SQL Server login for testing even if your application is intended to deploy using Windows authentication.</span></span>  
  
## <a name="role-based-permissions"></a><span data-ttu-id="b2666-118">Permisos basados en roles</span><span class="sxs-lookup"><span data-stu-id="b2666-118">Role-Based Permissions</span></span>  

 <span data-ttu-id="b2666-119">Otorgar permisos a roles en lugar de a usuarios simplifica la administración de la seguridad.</span><span class="sxs-lookup"><span data-stu-id="b2666-119">Granting permissions to roles rather than to users simplifies security administration.</span></span> <span data-ttu-id="b2666-120">Los conjuntos de permisos asignados a roles los heredan todos los miembros del rol.</span><span class="sxs-lookup"><span data-stu-id="b2666-120">Permission sets that are assigned to roles are inherited by all members of the role.</span></span> <span data-ttu-id="b2666-121">Es más fácil agregar o quitar usuarios de un rol que volver a crear conjuntos de permisos distintos para cada usuario.</span><span class="sxs-lookup"><span data-stu-id="b2666-121">It is easier to add or remove users from a role than it is to recreate separate permission sets for individual users.</span></span> <span data-ttu-id="b2666-122">Las roles se pueden anidar. Sin embargo, la existencia de demasiados niveles de anidamiento puede reducir el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="b2666-122">Roles can be nested; however, too many levels of nesting can degrade performance.</span></span> <span data-ttu-id="b2666-123">También puede agregar usuarios a roles fijos de bases de datos para simplificar los permisos de asignación.</span><span class="sxs-lookup"><span data-stu-id="b2666-123">You can also add users to fixed database roles to simplify assigning permissions.</span></span>  
  
 <span data-ttu-id="b2666-124">Puede conceder permisos en el nivel de esquema.</span><span class="sxs-lookup"><span data-stu-id="b2666-124">You can grant permissions at the schema level.</span></span> <span data-ttu-id="b2666-125">Los usuarios heredan automáticamente los permisos en todos los objetos nuevos creados en el esquema; no es necesario otorgar permisos cuando se crean objetos nuevos.</span><span class="sxs-lookup"><span data-stu-id="b2666-125">Users automatically inherit permissions on all new objects created in the schema; you do not need to grant permissions as new objects are created.</span></span>  
  
## <a name="permissions-through-procedural-code"></a><span data-ttu-id="b2666-126">Permisos a mediante código basado en procedimiento</span><span class="sxs-lookup"><span data-stu-id="b2666-126">Permissions Through Procedural Code</span></span>  

 <span data-ttu-id="b2666-127">El encapsulamiento del acceso a los datos a través de módulos tales como procedimientos almacenados y funciones definidas por el usuario brinda un nivel de protección adicional a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b2666-127">Encapsulating data access through modules such as stored procedures and user-defined functions provides an additional layer of protection around your application.</span></span> <span data-ttu-id="b2666-128">Se puede evitar que los usuarios interactúen directamente con objetos de la base de datos otorgando permisos solo a procedimientos almacenados o funciones, y denegando permisos a objetos subyacentes tales como tablas.</span><span class="sxs-lookup"><span data-stu-id="b2666-128">You can prevent users from directly interacting with database objects by granting permissions only to stored procedures or functions while denying permissions to underlying objects such as tables.</span></span> <span data-ttu-id="b2666-129">SQL Server lo consigue mediante encadenamiento de propiedad.</span><span class="sxs-lookup"><span data-stu-id="b2666-129">SQL Server achieves this by ownership chaining.</span></span>  
  
## <a name="permission-statements"></a><span data-ttu-id="b2666-130">Instrucciones de permiso</span><span class="sxs-lookup"><span data-stu-id="b2666-130">Permission Statements</span></span>  

 <span data-ttu-id="b2666-131">En la siguiente tabla se describen las tres instrucciones de permiso de Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="b2666-131">The three Transact-SQL permission statements are described in the following table.</span></span>  
  
|<span data-ttu-id="b2666-132">Instrucción de permiso</span><span class="sxs-lookup"><span data-stu-id="b2666-132">Permission Statement</span></span>|<span data-ttu-id="b2666-133">Descripción</span><span class="sxs-lookup"><span data-stu-id="b2666-133">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="b2666-134">GRANT</span><span class="sxs-lookup"><span data-stu-id="b2666-134">GRANT</span></span>|<span data-ttu-id="b2666-135">Concede un permiso.</span><span class="sxs-lookup"><span data-stu-id="b2666-135">Grants a permission.</span></span>|  
|<span data-ttu-id="b2666-136">REVOKE</span><span class="sxs-lookup"><span data-stu-id="b2666-136">REVOKE</span></span>|<span data-ttu-id="b2666-137">Revoca un permiso.</span><span class="sxs-lookup"><span data-stu-id="b2666-137">Revokes a permission.</span></span> <span data-ttu-id="b2666-138">Este es el estado predeterminado de un objeto nuevo.</span><span class="sxs-lookup"><span data-stu-id="b2666-138">This is the default state of a new object.</span></span> <span data-ttu-id="b2666-139">Un permiso revocado a un usuario o rol se puede heredar de otros grupos o roles a los que está asignada la entidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b2666-139">A permission revoked from a user or role can still be inherited from other groups or roles to which the principal is assigned.</span></span>|  
|<span data-ttu-id="b2666-140">DENEGAR</span><span class="sxs-lookup"><span data-stu-id="b2666-140">DENY</span></span>|<span data-ttu-id="b2666-141">DENY revoca un permiso de manera que no pueda ser heredado.</span><span class="sxs-lookup"><span data-stu-id="b2666-141">DENY revokes a permission so that it cannot be inherited.</span></span> <span data-ttu-id="b2666-142">DENY tiene prioridad sobre todos los permisos, pero no se aplica a propietarios de objeto o miembros de `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="b2666-142">DENY takes precedence over all permissions, except DENY does not apply to object owners or members of `sysadmin`.</span></span> <span data-ttu-id="b2666-143">Si deniega permisos a un objeto en el rol `public`, se los deniega igualmente a todos los usuarios y roles excepto a los propietarios del objeto y a los miembros de `sysadmin`.</span><span class="sxs-lookup"><span data-stu-id="b2666-143">If you DENY permissions on an object to the `public` role it is denied to all users and roles except for object owners and `sysadmin` members.</span></span>|  
  
- <span data-ttu-id="b2666-144">La instrucción GRANT puede asignar permisos a un grupo o rol que puede ser heredada por los usuarios de la base de datos.</span><span class="sxs-lookup"><span data-stu-id="b2666-144">The GRANT statement can assign permissions to a group or role that can be inherited by database users.</span></span> <span data-ttu-id="b2666-145">No obstante, la instrucción DENY tiene prioridad sobre el resto de las instrucciones de permiso.</span><span class="sxs-lookup"><span data-stu-id="b2666-145">However, the DENY statement takes precedence over all other permission statements.</span></span> <span data-ttu-id="b2666-146">Por ello, un usuario al que se le ha denegado un permiso no puede heredarlo de otro rol.</span><span class="sxs-lookup"><span data-stu-id="b2666-146">Therefore, a user who has been denied a permission cannot inherit it from another role.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b2666-147">A los miembros del rol fijo del servidor `sysadmin` y a los propietarios de objetos no se les pueden denegar permisos.</span><span class="sxs-lookup"><span data-stu-id="b2666-147">Members of the `sysadmin` fixed server role and object owners cannot be denied permissions.</span></span>  
  
## <a name="ownership-chains"></a><span data-ttu-id="b2666-148">Cadenas de propiedad</span><span class="sxs-lookup"><span data-stu-id="b2666-148">Ownership Chains</span></span>  

 <span data-ttu-id="b2666-149">SQL Server garantiza que solamente puedan tener acceso a los objetos las entidades de seguridad a las que se les han concedido permisos.</span><span class="sxs-lookup"><span data-stu-id="b2666-149">SQL Server ensures that only principals that have been granted permission can access objects.</span></span> <span data-ttu-id="b2666-150">Cuando varios objetos de base de datos tienen acceso el uno al otro, la secuencia se conoce como "cadena".</span><span class="sxs-lookup"><span data-stu-id="b2666-150">When multiple database objects access each other, the sequence is known as a chain.</span></span> <span data-ttu-id="b2666-151">Cuando SQL Server atraviesa los vínculos de la cadena, evalúa los permisos de manera diferente a como lo haría si estuviera obteniendo acceso a cada elemento separadamente.</span><span class="sxs-lookup"><span data-stu-id="b2666-151">When SQL Server is traversing the links in the chain, it evaluates permissions differently than it would if it were accessing each item separately.</span></span> <span data-ttu-id="b2666-152">Cuando se obtiene acceso a un objeto a través de una cadena, SQL Server primero compara al propietario del objeto con el propietario del objeto de llamada (el vínculo anterior de la cadena).</span><span class="sxs-lookup"><span data-stu-id="b2666-152">When an object is accessed through a chain, SQL Server first compares the object's owner to the owner of the calling object (the previous link in the chain).</span></span> <span data-ttu-id="b2666-153">Si ambos objetos tienen el mismo propietario, los permisos del objeto al que se hace referencia no se comprueban.</span><span class="sxs-lookup"><span data-stu-id="b2666-153">If both objects have the same owner, permissions on the referenced object are not checked.</span></span> <span data-ttu-id="b2666-154">Siempre que un objeto obtiene acceso a otro objeto que tiene un propietario distinto, la cadena de propiedad se rompe y SQL Server debe comprobar el contexto de seguridad del llamador.</span><span class="sxs-lookup"><span data-stu-id="b2666-154">Whenever an object accesses another object that has a different owner, the ownership chain is broken and SQL Server must check the caller's security context.</span></span>  
  
## <a name="procedural-code-and-ownership-chaining"></a><span data-ttu-id="b2666-155">Código basado en procedimiento y encadenamiento de propiedad</span><span class="sxs-lookup"><span data-stu-id="b2666-155">Procedural Code and Ownership Chaining</span></span>  

 <span data-ttu-id="b2666-156">Suponga que a un usuario se le otorgan permisos para ejecutar en un procedimiento almacenado que selecciona datos desde una tabla.</span><span class="sxs-lookup"><span data-stu-id="b2666-156">Suppose that a user is granted execute permissions on a stored procedure that selects data from a table.</span></span> <span data-ttu-id="b2666-157">Si el procedimiento almacenado y la tabla tienen el mismo propietario, el usuario no necesita ningún permiso en la tabla y se le pueden incluso denegar permisos.</span><span class="sxs-lookup"><span data-stu-id="b2666-157">If the stored procedure and the table have the same owner, the user doesn't need to be granted any permissions on the table and can even be denied permissions.</span></span> <span data-ttu-id="b2666-158">Sin embargo, si el procedimiento almacenado y la tabla tienen distintos propietarios, SQL Server debe comprobar los permisos del usuario en la tabla antes de permitirle el acceso a los datos.</span><span class="sxs-lookup"><span data-stu-id="b2666-158">However, if the stored procedure and the table have different owners, SQL Server must check the user's permissions on the table before allowing access to the data.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b2666-159">El encadenamiento de propiedad no se aplica en el caso de las instrucciones de SQL dinámico.</span><span class="sxs-lookup"><span data-stu-id="b2666-159">Ownership chaining does not apply in the case of dynamic SQL statements.</span></span> <span data-ttu-id="b2666-160">Para llamar a un procedimiento que ejecuta una instrucción SQL, el llamador debe tener permiso de acceso a las tablas subyacentes, lo que deja a su aplicación expuesta a posibles ataques de inyección SQL.</span><span class="sxs-lookup"><span data-stu-id="b2666-160">To call a procedure that executes an SQL statement, the caller must be granted permissions on the underlying tables, leaving your application vulnerable to SQL Injection attack.</span></span> <span data-ttu-id="b2666-161">SQL Server proporciona nuevos mecanismos, como suplantación y módulos de firma con certificados, que no requieren otorgar permisos en las tablas subyacentes.</span><span class="sxs-lookup"><span data-stu-id="b2666-161">SQL Server provides new mechanisms, such as impersonation and signing modules with certificates, that do not require granting permissions on the underlying tables.</span></span> <span data-ttu-id="b2666-162">Estos mecanismos se pueden utilizar también con procedimientos almacenados CLR.</span><span class="sxs-lookup"><span data-stu-id="b2666-162">These can also be used with CLR stored procedures.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="b2666-163">Recursos externos</span><span class="sxs-lookup"><span data-stu-id="b2666-163">External Resources</span></span>  

 <span data-ttu-id="b2666-164">Para obtener más información, vea los recursos siguientes.</span><span class="sxs-lookup"><span data-stu-id="b2666-164">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="b2666-165">Recurso</span><span class="sxs-lookup"><span data-stu-id="b2666-165">Resource</span></span>|<span data-ttu-id="b2666-166">Descripción</span><span class="sxs-lookup"><span data-stu-id="b2666-166">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="b2666-167">Permisos</span><span class="sxs-lookup"><span data-stu-id="b2666-167">Permissions</span></span>](/sql/relational-databases/security/permissions-database-engine)|<span data-ttu-id="b2666-168">Contiene temas que describen la jerarquía de permisos, las vistas de catálogo y permisos de servidores fijos y roles de bases de datos.</span><span class="sxs-lookup"><span data-stu-id="b2666-168">Contains topics describing permissions hierarchy, catalog views, and permissions of fixed server and database roles.</span></span>|
  
## <a name="see-also"></a><span data-ttu-id="b2666-169">Consulte también</span><span class="sxs-lookup"><span data-stu-id="b2666-169">See also</span></span>

- [<span data-ttu-id="b2666-170">Proteger aplicaciones de ADO.NET</span><span class="sxs-lookup"><span data-stu-id="b2666-170">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="b2666-171">Escenarios de seguridad de aplicaciones en SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2666-171">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="b2666-172">Autenticación en SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2666-172">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="b2666-173">Roles de servidor y base de datos en SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2666-173">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="b2666-174">Propiedad y separación de esquemas de usuario en SQL Server</span><span class="sxs-lookup"><span data-stu-id="b2666-174">Ownership and User-Schema Separation in SQL Server</span></span>](ownership-and-user-schema-separation-in-sql-server.md)
- [<span data-ttu-id="b2666-175">Información general de ADO.NET</span><span class="sxs-lookup"><span data-stu-id="b2666-175">ADO.NET Overview</span></span>](../ado-net-overview.md)
