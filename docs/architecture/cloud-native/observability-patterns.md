---
title: Patrones de observación
description: Patrones de observación para aplicaciones nativas de la nube
ms.date: 08/10/2020
ms.openlocfilehash: 2a6ef0e58f1e20667167042614768b099f640858
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90539858"
---
# <a name="observability-patterns"></a><span data-ttu-id="2a131-103">Patrones de observación</span><span class="sxs-lookup"><span data-stu-id="2a131-103">Observability patterns</span></span>

<span data-ttu-id="2a131-104">Al igual que los patrones se han desarrollado para ayudar en el diseño del código de las aplicaciones, hay patrones para las aplicaciones operativas de una forma confiable.</span><span class="sxs-lookup"><span data-stu-id="2a131-104">Just as patterns have been developed to aid in the layout of code in applications, there are patterns for operating applications in a reliable way.</span></span> <span data-ttu-id="2a131-105">Han surgido tres patrones útiles para el mantenimiento de las aplicaciones: **registro**, **supervisión**y **alertas**.</span><span class="sxs-lookup"><span data-stu-id="2a131-105">Three useful patterns in maintaining applications have emerged: **logging**, **monitoring**, and **alerts**.</span></span>

## <a name="when-to-use-logging"></a><span data-ttu-id="2a131-106">Cuándo usar el registro</span><span class="sxs-lookup"><span data-stu-id="2a131-106">When to use logging</span></span>

<span data-ttu-id="2a131-107">Sea cual sea el cuidado que tengamos, las aplicaciones casi siempre se comportan de maneras inesperadas en producción.</span><span class="sxs-lookup"><span data-stu-id="2a131-107">No matter how careful we are, applications almost always behave in unexpected ways in production.</span></span> <span data-ttu-id="2a131-108">Cuando los usuarios informan de problemas con una aplicación, resulta útil poder ver lo que estaba ocurriendo con la aplicación cuando se produjo el problema.</span><span class="sxs-lookup"><span data-stu-id="2a131-108">When users report problems with an application, it's useful to be able to see what was going on with the app when the problem occurred.</span></span> <span data-ttu-id="2a131-109">Una de las formas más probadas y verdaderas de capturar información sobre lo que hace una aplicación mientras se está ejecutando es hacer que la aplicación anote lo que está haciendo.</span><span class="sxs-lookup"><span data-stu-id="2a131-109">One of the most tried and true ways of capturing information about what an application is doing while it's running is to have the application write down what it's doing.</span></span> <span data-ttu-id="2a131-110">Este proceso se conoce como registro.</span><span class="sxs-lookup"><span data-stu-id="2a131-110">This process is known as logging.</span></span> <span data-ttu-id="2a131-111">En cualquier momento en que se produzcan errores o problemas en la producción, el objetivo debe ser reproducir las condiciones en las que se produjeron los errores, en un entorno que no sea de producción.</span><span class="sxs-lookup"><span data-stu-id="2a131-111">Anytime failures or problems occur in production, the goal should be to reproduce the conditions under which the failures occurred, in a non-production environment.</span></span> <span data-ttu-id="2a131-112">Tener un buen registro en su lugar proporciona una guía básica para que los desarrolladores puedan seguir con el fin de duplicar problemas en un entorno que se pueda probar y experimentar con.</span><span class="sxs-lookup"><span data-stu-id="2a131-112">Having good logging in place provides a roadmap for developers to follow in order to duplicate problems in an environment that can be tested and experimented with.</span></span>

### <a name="challenges-when-logging-with-cloud-native-applications"></a><span data-ttu-id="2a131-113">Desafíos al registrar con aplicaciones nativas de la nube</span><span class="sxs-lookup"><span data-stu-id="2a131-113">Challenges when logging with cloud-native applications</span></span>

<span data-ttu-id="2a131-114">En las aplicaciones tradicionales, los archivos de registro se almacenan normalmente en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="2a131-114">In traditional applications, log files are typically stored on the local machine.</span></span> <span data-ttu-id="2a131-115">De hecho, en sistemas operativos similares a Unix, hay una estructura de carpetas definida para contener los registros, normalmente en `/var/log` .</span><span class="sxs-lookup"><span data-stu-id="2a131-115">In fact, on Unix-like operating systems, there's a folder structure defined to hold any logs, typically under `/var/log`.</span></span>

<span data-ttu-id="2a131-116">![Registro en un archivo en una aplicación monolítica. ](./media/single-monolith-logging.png)
 **Figura 7-1**.</span><span class="sxs-lookup"><span data-stu-id="2a131-116">![Logging to a file in a monolithic app.](./media/single-monolith-logging.png)
**Figure 7-1**.</span></span> <span data-ttu-id="2a131-117">Registro en un archivo en una aplicación monolítica.</span><span class="sxs-lookup"><span data-stu-id="2a131-117">Logging to a file in a monolithic app.</span></span>

<span data-ttu-id="2a131-118">La utilidad del registro en un archivo plano en un solo equipo se reduce enormemente en un entorno de nube.</span><span class="sxs-lookup"><span data-stu-id="2a131-118">The usefulness of logging to a flat file on a single machine is vastly reduced in a cloud environment.</span></span> <span data-ttu-id="2a131-119">Es posible que las aplicaciones que producen registros no tengan acceso al disco local o que el disco local sea muy transitorio, ya que los contenedores se ordenan en torno a las máquinas físicas.</span><span class="sxs-lookup"><span data-stu-id="2a131-119">Applications producing logs may not have access to the local disk or the local disk may be highly transient as containers are shuffled around physical machines.</span></span> <span data-ttu-id="2a131-120">Incluso un simple escalado vertical de aplicaciones monolíticas en varios nodos puede hacer que sea difícil encontrar el archivo de registro basado en archivos adecuado.</span><span class="sxs-lookup"><span data-stu-id="2a131-120">Even simple scaling up of monolithic applications across multiple nodes can make it challenging to locate the appropriate file-based log file.</span></span>

<span data-ttu-id="2a131-121">![Registro en archivos en una aplicación monolítica escalada. ](./media/multiple-node-monolith-logging.png)
 **Figura 7-2**.</span><span class="sxs-lookup"><span data-stu-id="2a131-121">![Logging to files in a scaled monolithic app.](./media/multiple-node-monolith-logging.png)
**Figure 7-2**.</span></span> <span data-ttu-id="2a131-122">Registro en archivos en una aplicación monolítica escalada.</span><span class="sxs-lookup"><span data-stu-id="2a131-122">Logging to files in a scaled monolithic app.</span></span>

<span data-ttu-id="2a131-123">Las aplicaciones nativas en la nube desarrolladas mediante una arquitectura de microservicios también presentan algunos desafíos para los registradores basados en archivos.</span><span class="sxs-lookup"><span data-stu-id="2a131-123">Cloud-native applications developed using a microservices architecture also pose some challenges for file-based loggers.</span></span> <span data-ttu-id="2a131-124">Las solicitudes de usuario ahora pueden abarcar varios servicios que se ejecutan en equipos diferentes y pueden incluir funciones sin servidor sin acceso a un sistema de archivos local.</span><span class="sxs-lookup"><span data-stu-id="2a131-124">User requests may now span multiple services that are run on different machines and may include serverless functions with no access to a local file system at all.</span></span> <span data-ttu-id="2a131-125">Sería muy difícil poner en correlación los registros de un usuario o una sesión en estos muchos servicios y máquinas.</span><span class="sxs-lookup"><span data-stu-id="2a131-125">It would be very challenging to correlate the logs from a user or a session across these many services and machines.</span></span>

<span data-ttu-id="2a131-126">![Registro en archivos locales en una aplicación de microservicios. ](./media/local-log-file-per-service.png)
 **Figura 7-3**.</span><span class="sxs-lookup"><span data-stu-id="2a131-126">![Logging to local files in a microservices app.](./media/local-log-file-per-service.png)
**Figure 7-3**.</span></span> <span data-ttu-id="2a131-127">Registro en archivos locales en una aplicación de microservicios.</span><span class="sxs-lookup"><span data-stu-id="2a131-127">Logging to local files in a microservices app.</span></span>

<span data-ttu-id="2a131-128">Por último, el número de usuarios en algunas aplicaciones nativas de la nube es alto.</span><span class="sxs-lookup"><span data-stu-id="2a131-128">Finally, the number of users in some cloud-native applications is high.</span></span> <span data-ttu-id="2a131-129">Imagine que cada usuario genera cien líneas de mensajes de registro cuando inicia sesión en una aplicación.</span><span class="sxs-lookup"><span data-stu-id="2a131-129">Imagine that each user generates a hundred lines of log messages when they log into an application.</span></span> <span data-ttu-id="2a131-130">En aislamiento, que es administrable, pero que se multiplican por más de 100.000 usuarios y el volumen de registros es lo suficientemente grande como para admitir el uso eficaz de los registros.</span><span class="sxs-lookup"><span data-stu-id="2a131-130">In isolation, that is manageable, but multiply that over 100,000 users and the volume of logs becomes large enough that specialized tools are needed to support effective use of the logs.</span></span>

### <a name="logging-in-cloud-native-applications"></a><span data-ttu-id="2a131-131">Inicio de sesión en aplicaciones nativas en la nube</span><span class="sxs-lookup"><span data-stu-id="2a131-131">Logging in cloud-native applications</span></span>

<span data-ttu-id="2a131-132">Cada lenguaje de programación tiene herramientas que permiten escribir registros y, por lo general, la sobrecarga de escribir estos registros es baja.</span><span class="sxs-lookup"><span data-stu-id="2a131-132">Every programming language has tooling that permits writing logs, and typically the overhead for writing these logs is low.</span></span> <span data-ttu-id="2a131-133">Muchas de las bibliotecas de registro de proporcionan el registro de diferentes tipos de críticas, que se pueden optimizar en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="2a131-133">Many of the logging libraries provide logging different kinds of criticalities, which can be tuned at run time.</span></span> <span data-ttu-id="2a131-134">Por ejemplo, la [biblioteca Serilog](https://serilog.net/) es una conocida biblioteca de registro estructurado para .net que proporciona los siguientes niveles de registro:</span><span class="sxs-lookup"><span data-stu-id="2a131-134">For instance, the [Serilog library](https://serilog.net/) is a popular structured logging library for .NET that provides the following logging levels:</span></span>

* <span data-ttu-id="2a131-135">Verbose</span><span class="sxs-lookup"><span data-stu-id="2a131-135">Verbose</span></span>
* <span data-ttu-id="2a131-136">Depurar</span><span class="sxs-lookup"><span data-stu-id="2a131-136">Debug</span></span>
* <span data-ttu-id="2a131-137">Information</span><span class="sxs-lookup"><span data-stu-id="2a131-137">Information</span></span>
* <span data-ttu-id="2a131-138">Advertencia</span><span class="sxs-lookup"><span data-stu-id="2a131-138">Warning</span></span>
* <span data-ttu-id="2a131-139">Error</span><span class="sxs-lookup"><span data-stu-id="2a131-139">Error</span></span>
* <span data-ttu-id="2a131-140">Crítico</span><span class="sxs-lookup"><span data-stu-id="2a131-140">Fatal</span></span>

<span data-ttu-id="2a131-141">Estos niveles de registro diferentes proporcionan granularidad en el registro.</span><span class="sxs-lookup"><span data-stu-id="2a131-141">These different log levels provide granularity in logging.</span></span> <span data-ttu-id="2a131-142">Cuando la aplicación funciona correctamente en producción, puede estar configurada para que solo se registren mensajes importantes.</span><span class="sxs-lookup"><span data-stu-id="2a131-142">When the application is functioning properly in production, it may be configured to only log important messages.</span></span> <span data-ttu-id="2a131-143">Cuando el comportamiento de la aplicación es correcto, se puede aumentar el nivel de registro para que se recopilen registros más detallados.</span><span class="sxs-lookup"><span data-stu-id="2a131-143">When the application is misbehaving, then the log level can be increased so more verbose logs are gathered.</span></span> <span data-ttu-id="2a131-144">Esto equilibra el rendimiento frente a la facilidad de depuración.</span><span class="sxs-lookup"><span data-stu-id="2a131-144">This balances performance against ease of debugging.</span></span>

<span data-ttu-id="2a131-145">El alto rendimiento de las herramientas de registro y el tunability de nivel de detalle deben animar a los desarrolladores a registrar con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="2a131-145">The high performance of logging tools and the tunability of verbosity should encourage developers to log frequently.</span></span> <span data-ttu-id="2a131-146">Muchos favorecen un patrón de registro de la entrada y la salida de cada método.</span><span class="sxs-lookup"><span data-stu-id="2a131-146">Many favor a pattern of logging the entry and exit of each method.</span></span> <span data-ttu-id="2a131-147">Este enfoque puede parecer un exceso de carga, pero es poco frecuente que los desarrolladores quieran menos registro.</span><span class="sxs-lookup"><span data-stu-id="2a131-147">This approach may sound like overkill, but it's infrequent that developers will wish for less logging.</span></span> <span data-ttu-id="2a131-148">De hecho, no es raro realizar implementaciones con el único fin de agregar el registro en torno a un método problemático.</span><span class="sxs-lookup"><span data-stu-id="2a131-148">In fact, it's not uncommon to perform deployments for the sole purpose of adding logging around a problematic method.</span></span> <span data-ttu-id="2a131-149">Error en el lado de un registro demasiado grande y no en demasiado pequeño.</span><span class="sxs-lookup"><span data-stu-id="2a131-149">Err on the side of too much logging and not on too little.</span></span> <span data-ttu-id="2a131-150">Se pueden usar algunas herramientas para proporcionar automáticamente este tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="2a131-150">Some tools can be used to automatically provide this kind of logging.</span></span>

<span data-ttu-id="2a131-151">Debido a los desafíos asociados al uso de registros basados en archivos en aplicaciones nativas en la nube, se prefieren registros centralizados.</span><span class="sxs-lookup"><span data-stu-id="2a131-151">Because of the challenges associated with using file-based logs in cloud-native apps, centralized logs are preferred.</span></span> <span data-ttu-id="2a131-152">Las aplicaciones recopilan los registros y se envían a una aplicación de registro central que indexa y almacena los registros.</span><span class="sxs-lookup"><span data-stu-id="2a131-152">Logs are collected by the applications and shipped to a central logging application which indexes and stores the logs.</span></span> <span data-ttu-id="2a131-153">Esta clase de sistema puede introducir decenas de gigabytes de registros todos los días.</span><span class="sxs-lookup"><span data-stu-id="2a131-153">This class of system can ingest tens of gigabytes of logs every day.</span></span>

<span data-ttu-id="2a131-154">También resulta útil seguir algunas prácticas estándar al compilar el registro que abarca muchos servicios.</span><span class="sxs-lookup"><span data-stu-id="2a131-154">It's also helpful to follow some standard practices when building logging that spans many services.</span></span> <span data-ttu-id="2a131-155">Por ejemplo, la generación de un [identificador de correlación](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) al principio de una interacción larga y, a continuación, su registro en cada mensaje relacionado con dicha interacción, facilita la búsqueda de todos los mensajes relacionados.</span><span class="sxs-lookup"><span data-stu-id="2a131-155">For instance, generating a [correlation ID](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) at the start of a lengthy interaction, and then logging it in each message that is related to that interaction, makes it easier to search for all related messages.</span></span> <span data-ttu-id="2a131-156">Una solo necesita buscar un único mensaje y extraer el identificador de correlación para buscar todos los mensajes relacionados.</span><span class="sxs-lookup"><span data-stu-id="2a131-156">One need only find a single message and extract the correlation ID to find all the related messages.</span></span> <span data-ttu-id="2a131-157">Otro ejemplo es asegurarse de que el formato del registro es el mismo para todos los servicios, sea cual sea el lenguaje o la biblioteca de registro que usa.</span><span class="sxs-lookup"><span data-stu-id="2a131-157">Another example is ensuring that the log format is the same for every service, whatever the language or logging library it uses.</span></span> <span data-ttu-id="2a131-158">Esta estandarización hace que la lectura de registros sea mucho más sencilla.</span><span class="sxs-lookup"><span data-stu-id="2a131-158">This standardization makes reading logs much easier.</span></span> <span data-ttu-id="2a131-159">En la figura 7-4 se muestra cómo una arquitectura de microservicios puede aprovechar el registro centralizado como parte de su flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="2a131-159">Figure 7-4 demonstrates how a microservices architecture can leverage centralized logging as part of its workflow.</span></span>

<span data-ttu-id="2a131-160">![Los registros de varios orígenes se ingestan en un almacén de registro centralizado. ](./media/centralized-logging.png)
 **Figura 7-4**.</span><span class="sxs-lookup"><span data-stu-id="2a131-160">![Logs from various sources are ingested into a centralized log store.](./media/centralized-logging.png)
**Figure 7-4**.</span></span> <span data-ttu-id="2a131-161">Los registros de varios orígenes se ingestan en un almacén de registro centralizado.</span><span class="sxs-lookup"><span data-stu-id="2a131-161">Logs from various sources are ingested into a centralized log store.</span></span>

## <a name="challenges-with-detecting-and-responding-to-potential-app-health-issues"></a><span data-ttu-id="2a131-162">Desafíos con la detección y respuesta a posibles problemas de estado de las aplicaciones</span><span class="sxs-lookup"><span data-stu-id="2a131-162">Challenges with detecting and responding to potential app health issues</span></span>

<span data-ttu-id="2a131-163">Algunas aplicaciones no son críticas.</span><span class="sxs-lookup"><span data-stu-id="2a131-163">Some applications aren't mission critical.</span></span> <span data-ttu-id="2a131-164">Quizás solo se usan internamente y, cuando se produce un problema, el usuario puede ponerse en contacto con el equipo responsable y se puede reiniciar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2a131-164">Maybe they're only used internally, and when a problem occurs, the user can contact the team responsible and the application can be restarted.</span></span> <span data-ttu-id="2a131-165">Sin embargo, los clientes a menudo tienen mayores expectativas para las aplicaciones que consumen.</span><span class="sxs-lookup"><span data-stu-id="2a131-165">However, customers often have higher expectations for the applications they consume.</span></span> <span data-ttu-id="2a131-166">Debe saber cuándo se producen problemas en la aplicación *antes* de que los usuarios realicen la notificación.</span><span class="sxs-lookup"><span data-stu-id="2a131-166">You should know when problems occur with your application *before* users do, or before users notify you.</span></span> <span data-ttu-id="2a131-167">De lo contrario, lo primero que conoce sobre un problema puede ser cuando observa una avalancha enfadada de publicaciones de medios sociales que desactivan su aplicación o incluso su organización.</span><span class="sxs-lookup"><span data-stu-id="2a131-167">Otherwise, the first you know about a problem may be when you notice an angry deluge of social media posts deriding your application or even your organization.</span></span>

<span data-ttu-id="2a131-168">Algunos escenarios que es posible que tenga que tener en cuenta son:</span><span class="sxs-lookup"><span data-stu-id="2a131-168">Some scenarios you may need to consider include:</span></span>

- <span data-ttu-id="2a131-169">Un servicio de la aplicación sigue produciendo errores y reiniciando, lo que da lugar a respuestas lentas intermitentes.</span><span class="sxs-lookup"><span data-stu-id="2a131-169">One service in your application keeps failing and restarting, resulting in intermittent slow responses.</span></span>
- <span data-ttu-id="2a131-170">En algunas ocasiones del día, el tiempo de respuesta de la aplicación es lento.</span><span class="sxs-lookup"><span data-stu-id="2a131-170">At some times of the day, your application's response time is slow.</span></span>
- <span data-ttu-id="2a131-171">Después de una implementación reciente, se ha recorrido la carga en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="2a131-171">After a recent deployment, load on the database has tripled.</span></span>

<span data-ttu-id="2a131-172">La supervisión, que se implementa correctamente, puede permitirle conocer las condiciones que provocarán problemas, lo que le permitirá abordar las condiciones subyacentes antes de que se produzca un impacto significativo en el usuario.</span><span class="sxs-lookup"><span data-stu-id="2a131-172">Implemented properly, monitoring can let you know about conditions that will lead to problems, letting you address underlying conditions before they result in any significant user impact.</span></span>

### <a name="monitoring-cloud-native-apps"></a><span data-ttu-id="2a131-173">Supervisión de aplicaciones nativas en la nube</span><span class="sxs-lookup"><span data-stu-id="2a131-173">Monitoring cloud-native apps</span></span>

<span data-ttu-id="2a131-174">Algunos sistemas de registro centralizados adoptan un rol adicional para recopilar la telemetría fuera de los registros puros.</span><span class="sxs-lookup"><span data-stu-id="2a131-174">Some centralized logging systems take on an additional role of collecting telemetry outside of pure logs.</span></span> <span data-ttu-id="2a131-175">Pueden recopilar métricas, como el tiempo para ejecutar una consulta de base de datos, el tiempo medio de respuesta de un servidor Web, e incluso los promedios de carga de la CPU y la presión de memoria que muestra el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="2a131-175">They can collect metrics, such as time to run a database query, average response time from a web server, and even CPU load averages and memory pressure as reported by the operating system.</span></span> <span data-ttu-id="2a131-176">Junto con los registros, estos sistemas pueden proporcionar una vista holística del estado de los nodos del sistema y de la aplicación en su conjunto.</span><span class="sxs-lookup"><span data-stu-id="2a131-176">In conjunction with the logs, these systems can provide a holistic view of the health of nodes in the system and the application as a whole.</span></span>

<span data-ttu-id="2a131-177">Las capacidades de recopilación de métricas de las herramientas de supervisión también se pueden alimentar manualmente desde dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2a131-177">The metric-gathering capabilities of the monitoring tools can also be fed manually from within the application.</span></span> <span data-ttu-id="2a131-178">Los flujos de negocio que son de especial interés, como los nuevos usuarios que se suscriben o los pedidos que se colocan, se pueden instrumentar de forma que incrementen un contador en el sistema de supervisión central.</span><span class="sxs-lookup"><span data-stu-id="2a131-178">Business flows that are of particular interest such as new users signing up or orders being placed, may be instrumented such that they increment a counter in the central monitoring system.</span></span> <span data-ttu-id="2a131-179">Esto desbloquea las herramientas de supervisión para no solo supervisar el estado de la aplicación, sino también el estado de la empresa.</span><span class="sxs-lookup"><span data-stu-id="2a131-179">This unlocks the monitoring tools to not only monitor the health of the application but the health of the business.</span></span>

<span data-ttu-id="2a131-180">Las consultas se pueden construir en las herramientas de agregación de registros para buscar determinadas estadísticas o patrones, que se pueden mostrar en forma gráfica en los paneles personalizados.</span><span class="sxs-lookup"><span data-stu-id="2a131-180">Queries can be constructed in the log aggregation tools to look for certain statistics or patterns, which can then be displayed in graphical form, on custom dashboards.</span></span> <span data-ttu-id="2a131-181">Con frecuencia, los equipos invertirán en pantallas grandes montadas en pared que giran por las estadísticas relacionadas con una aplicación.</span><span class="sxs-lookup"><span data-stu-id="2a131-181">Frequently, teams will invest in large, wall-mounted displays that rotate through the statistics related to an application.</span></span> <span data-ttu-id="2a131-182">De este modo, es fácil ver los problemas a medida que se producen.</span><span class="sxs-lookup"><span data-stu-id="2a131-182">This way, it's simple to see the problems as they occur.</span></span>

<span data-ttu-id="2a131-183">Las herramientas de supervisión nativas de la nube proporcionan telemetría en tiempo real e información sobre las aplicaciones, independientemente de si son aplicaciones monolíticas de un solo proceso o arquitecturas de microservicios distribuidas.</span><span class="sxs-lookup"><span data-stu-id="2a131-183">Cloud-native monitoring tools provide real-time telemetry and insight into apps regardless of whether they're single-process monolithic applications or distributed microservice architectures.</span></span> <span data-ttu-id="2a131-184">Incluyen herramientas que permiten la recopilación de datos de la aplicación, así como herramientas para consultar y Mostrar información sobre el estado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="2a131-184">They include tools that allow collection of data from the app as well as tools for querying and displaying information about the app's health.</span></span>

## <a name="challenges-with-reacting-to-critical-problems-in-cloud-native-apps"></a><span data-ttu-id="2a131-185">Desafíos relacionados con la reacción ante problemas críticos en aplicaciones nativas en la nube</span><span class="sxs-lookup"><span data-stu-id="2a131-185">Challenges with reacting to critical problems in cloud-native apps</span></span>

<span data-ttu-id="2a131-186">Si necesita reaccionar ante problemas con la aplicación, necesita alguna manera de alertar al personal adecuado.</span><span class="sxs-lookup"><span data-stu-id="2a131-186">If you need to react to problems with your application, you need some way to alert the right personnel.</span></span> <span data-ttu-id="2a131-187">Este es el tercer patrón de observación de aplicaciones nativas en la nube y depende del registro y la supervisión.</span><span class="sxs-lookup"><span data-stu-id="2a131-187">This is the third cloud-native application observability pattern and depends on logging and monitoring.</span></span> <span data-ttu-id="2a131-188">La aplicación debe tener el inicio de sesión para permitir que se diagnostiquen los problemas y, en algunos casos, para alimentar en las herramientas de supervisión.</span><span class="sxs-lookup"><span data-stu-id="2a131-188">Your application needs to have logging in place to allow problems to be diagnosed, and in some cases to feed into monitoring tools.</span></span> <span data-ttu-id="2a131-189">Necesita supervisión para agregar métricas de aplicación y datos de mantenimiento en un solo lugar.</span><span class="sxs-lookup"><span data-stu-id="2a131-189">It needs monitoring to aggregate application metrics and health data in one place.</span></span> <span data-ttu-id="2a131-190">Una vez que se ha establecido, se pueden crear reglas que desencadenarán alertas cuando determinadas métricas se encuentren fuera de los niveles aceptables.</span><span class="sxs-lookup"><span data-stu-id="2a131-190">Once this has been established, rules can be created that will trigger alerts when certain metrics fall outside of acceptable levels.</span></span>

<span data-ttu-id="2a131-191">Por lo general, las alertas se superponen por encima de la supervisión de modo que determinadas condiciones desencadenen las alertas adecuadas para notificar a los miembros del equipo de problemas urgentes.</span><span class="sxs-lookup"><span data-stu-id="2a131-191">Generally, alerts are layered on top of monitoring such that certain conditions trigger appropriate alerts to notify team members of urgent problems.</span></span> <span data-ttu-id="2a131-192">Algunos escenarios que pueden requerir alertas son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="2a131-192">Some scenarios that may require alerts include:</span></span>

- <span data-ttu-id="2a131-193">Uno de los servicios de la aplicación no responde después de un tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="2a131-193">One of your application's services is not responding after 1 minute of downtime.</span></span>
- <span data-ttu-id="2a131-194">La aplicación devuelve respuestas HTTP incorrectas a más del 1% de las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="2a131-194">Your application is returning unsuccessful HTTP responses to more than 1% of requests.</span></span>
- <span data-ttu-id="2a131-195">El tiempo medio de respuesta de la aplicación para los puntos de conexión de clave supera los 2000 ms.</span><span class="sxs-lookup"><span data-stu-id="2a131-195">Your application's average response time for key endpoints exceeds 2000 ms.</span></span>

### <a name="alerts-in-cloud-native-apps"></a><span data-ttu-id="2a131-196">Alertas en aplicaciones nativas de la nube</span><span class="sxs-lookup"><span data-stu-id="2a131-196">Alerts in cloud-native apps</span></span>

<span data-ttu-id="2a131-197">Puede crear consultas en las herramientas de supervisión para buscar condiciones de error conocidas.</span><span class="sxs-lookup"><span data-stu-id="2a131-197">You can craft queries against the monitoring tools to look for known failure conditions.</span></span> <span data-ttu-id="2a131-198">Por ejemplo, las consultas podrían buscar en los registros entrantes indicaciones del código de Estado HTTP 500, que indica un problema en un servidor Web.</span><span class="sxs-lookup"><span data-stu-id="2a131-198">For instance, queries could search through the incoming logs for indications of HTTP status code 500, which indicates a problem on a web server.</span></span> <span data-ttu-id="2a131-199">En cuanto se detecta uno de estos, se puede enviar un mensaje de correo electrónico o un SMS al propietario del servicio de origen que puede comenzar a investigar.</span><span class="sxs-lookup"><span data-stu-id="2a131-199">As soon as one of these is detected, then an e-mail or an SMS could be sent to the owner of the originating service who can begin to investigate.</span></span>

<span data-ttu-id="2a131-200">Sin embargo, normalmente, un solo error 500 no es suficiente para determinar que se ha producido un problema.</span><span class="sxs-lookup"><span data-stu-id="2a131-200">Typically, though, a single 500 error isn't enough to determine that a problem has occurred.</span></span> <span data-ttu-id="2a131-201">Podría significar que un usuario escribió incorrectamente su contraseña o escribió algunos datos mal formados.</span><span class="sxs-lookup"><span data-stu-id="2a131-201">It could mean that a user mistyped their password or entered some malformed data.</span></span> <span data-ttu-id="2a131-202">Las consultas de alerta se pueden diseñar para que solo se activen cuando se detecte un número mayor que el promedio de errores 500.</span><span class="sxs-lookup"><span data-stu-id="2a131-202">The alert queries can be crafted to only fire when a larger than average number of 500 errors are detected.</span></span>

<span data-ttu-id="2a131-203">Uno de los patrones más dañinos en las alertas es activar demasiadas alertas para que los usuarios lo investiguen.</span><span class="sxs-lookup"><span data-stu-id="2a131-203">One of the most damaging patterns in alerting is to fire too many alerts for humans to investigate.</span></span> <span data-ttu-id="2a131-204">Los propietarios de servicios se Desensitized rápidamente a los errores que se han investigado anteriormente y se han descubierto que son benignos.</span><span class="sxs-lookup"><span data-stu-id="2a131-204">Service owners will rapidly become desensitized to errors that they've previously investigated and found to be benign.</span></span> <span data-ttu-id="2a131-205">A continuación, cuando se produzcan errores verdaderos, se perderán en el ruido de cientos de falsos positivos.</span><span class="sxs-lookup"><span data-stu-id="2a131-205">Then, when true errors occur, they'll be lost in the noise of hundreds of false positives.</span></span> <span data-ttu-id="2a131-206">El Parable del [chico que Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) se suele indicar a los niños para advertirles de este riesgo.</span><span class="sxs-lookup"><span data-stu-id="2a131-206">The parable of the [Boy Who Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) is frequently told to children to warn them of this very danger.</span></span> <span data-ttu-id="2a131-207">Es importante asegurarse de que las alertas que se activan son indicativas de un problema real.</span><span class="sxs-lookup"><span data-stu-id="2a131-207">It's important to ensure that the alerts that do fire are indicative of a real problem.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2a131-208">[Anterior](monitoring-health.md)
>[Siguiente](logging-with-elastic-stack.md)</span><span class="sxs-lookup"><span data-stu-id="2a131-208">[Previous](monitoring-health.md)
[Next](logging-with-elastic-stack.md)</span></span>
