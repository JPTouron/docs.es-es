---
title: Escalado de contenedores y aplicaciones sin servidor
description: Escalado de aplicaciones nativas en la nube con Azure Kubernetes Service para satisfacer la demanda de los usuarios.
ms.date: 05/13/2020
ms.openlocfilehash: a5e1e8df785fd08901d9be41c0a06db35e09296b
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613725"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="d44b2-103">Escalado de contenedores y aplicaciones sin servidor</span><span class="sxs-lookup"><span data-stu-id="d44b2-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="d44b2-104">Hay dos formas de escalar una aplicación: hacia arriba o hacia fuera. El primero hace referencia a agregar capacidad a un solo recurso, mientras que el último hace referencia a la adición de más recursos para aumentar la capacidad.</span><span class="sxs-lookup"><span data-stu-id="d44b2-104">There are two ways to scale an application: up or out. The former refers to adding capacity to a single resource, while the latter refers to adding more resources to increase capacity.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="d44b2-105">Solución simple: escalado vertical</span><span class="sxs-lookup"><span data-stu-id="d44b2-105">The simple solution: scaling up</span></span>

<span data-ttu-id="d44b2-106">La actualización de un servidor host existente con mayor CPU, memoria, velocidad de e/s de disco y velocidad de e/s de red se conoce como *escalado*vertical.</span><span class="sxs-lookup"><span data-stu-id="d44b2-106">Upgrading an existing host server with increased CPU, memory, disk I/O speed, and network I/O speed is known as *scaling up*.</span></span> <span data-ttu-id="d44b2-107">El escalado vertical de una aplicación nativa en la nube implica la elección de más recursos para el proveedor en la nube.</span><span class="sxs-lookup"><span data-stu-id="d44b2-107">Scaling up a cloud-native application involves choosing more capable resources from the cloud vendor.</span></span> <span data-ttu-id="d44b2-108">Por ejemplo, puede tener un nuevo grupo de nodos con máquinas virtuales de mayor tamaño en el clúster de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d44b2-108">For example, you can a new node pool with larger VMs in your Kubernetes cluster.</span></span> <span data-ttu-id="d44b2-109">A continuación, migre los servicios en contenedores al nuevo grupo.</span><span class="sxs-lookup"><span data-stu-id="d44b2-109">Then, migrate your containerized services to the new pool.</span></span>

<span data-ttu-id="d44b2-110">Las aplicaciones sin servidor se escalan verticalmente eligiendo el [plan de funciones Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) o los tamaños de instancia Premium de un plan de App Service dedicado.</span><span class="sxs-lookup"><span data-stu-id="d44b2-110">Serverless apps scale up by choosing the [premium Functions plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) or premium instance sizes from a dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="d44b2-111">Escalado horizontal de aplicaciones nativas en la nube</span><span class="sxs-lookup"><span data-stu-id="d44b2-111">Scaling out cloud-native apps</span></span>

<span data-ttu-id="d44b2-112">A menudo, las aplicaciones nativas en la nube experimentan grandes fluctuaciones en la demanda y requieren una escala en el aviso de un momento.</span><span class="sxs-lookup"><span data-stu-id="d44b2-112">Cloud-native applications often experience large fluctuations in demand and require scale on a moment's notice.</span></span> <span data-ttu-id="d44b2-113">Favorecen el escalado horizontal. El escalado horizontal se realiza horizontalmente agregando equipos adicionales (denominados nodos) o instancias de aplicación a un clúster existente.</span><span class="sxs-lookup"><span data-stu-id="d44b2-113">They favor scaling out. Scaling out is done horizontally by adding additional machines (called nodes) or application instances to an existing cluster.</span></span> <span data-ttu-id="d44b2-114">En Kubernetes, se puede escalar manualmente ajustando los valores de configuración de la aplicación (por ejemplo, [escalando un grupo de nodos](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) o mediante el escalado automático.</span><span class="sxs-lookup"><span data-stu-id="d44b2-114">In Kubernetes, you can scale manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through autoscaling.</span></span>

<span data-ttu-id="d44b2-115">Los clústeres de AKS se pueden escalar automáticamente de una de estas dos maneras:</span><span class="sxs-lookup"><span data-stu-id="d44b2-115">AKS clusters can autoscale in one of two ways:</span></span>

<span data-ttu-id="d44b2-116">En primer lugar, el [escalador automático del Pod horizontal](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) supervisa la demanda de recursos y escala automáticamente las réplicas de POD para que se cumplan.</span><span class="sxs-lookup"><span data-stu-id="d44b2-116">First, the [Horizontal Pod Autoscaler](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale#autoscale-pods) monitors resource demand and automatically scales your POD replicas to meet it.</span></span> <span data-ttu-id="d44b2-117">Cuando aumenta el tráfico, se aprovisionan réplicas adicionales automáticamente para escalar horizontalmente los servicios.</span><span class="sxs-lookup"><span data-stu-id="d44b2-117">When traffic increases, additional replicas are automatically provisioned to scale out your services.</span></span> <span data-ttu-id="d44b2-118">Del mismo modo, cuando la demanda disminuye, se quitan del escalado en los servicios.</span><span class="sxs-lookup"><span data-stu-id="d44b2-118">Likewise, when demand decreases, they're removed to scale-in your services.</span></span> <span data-ttu-id="d44b2-119">Defina la métrica en la que se va a escalar, por ejemplo, el uso de la CPU.</span><span class="sxs-lookup"><span data-stu-id="d44b2-119">You define the metric on which to scale, for example, CPU usage.</span></span> <span data-ttu-id="d44b2-120">También puede especificar el número mínimo y máximo de réplicas que se van a ejecutar.</span><span class="sxs-lookup"><span data-stu-id="d44b2-120">You can also specify the minimum and maximum number of replicas to run.</span></span> <span data-ttu-id="d44b2-121">AKS supervisa esa métrica y escala en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="d44b2-121">AKS monitors that metric and scales accordingly.</span></span>

<span data-ttu-id="d44b2-122">A continuación, la característica de [escalado automático del clúster de AKS](https://docs.microsoft.com/azure/aks/cluster-autoscaler) le permite escalar automáticamente los nodos de proceso en un clúster de Kubernetes para satisfacer la demanda.</span><span class="sxs-lookup"><span data-stu-id="d44b2-122">Next, the [AKS Cluster Autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) feature enables you to automatically scale compute nodes across a Kubernetes cluster to meet demand.</span></span> <span data-ttu-id="d44b2-123">Con él, puede Agregar automáticamente nuevas máquinas virtuales al conjunto de escalado de máquinas virtuales de Azure subyacente siempre que se necesite más capacidad de proceso de.</span><span class="sxs-lookup"><span data-stu-id="d44b2-123">With it, you can automatically add new VMs to the underlying Azure Virtual Machine Scale Set whenever more compute capacity of is required.</span></span> <span data-ttu-id="d44b2-124">También quita los nodos cuando ya no son necesarios.</span><span class="sxs-lookup"><span data-stu-id="d44b2-124">It also removes nodes when no longer required.</span></span>

<span data-ttu-id="d44b2-125">En la figura 3-13 se muestra la relación entre estos dos servicios de escalado.</span><span class="sxs-lookup"><span data-stu-id="d44b2-125">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Escalado horizontal de un plan de App Service.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="d44b2-127">**Figura 3-13**.</span><span class="sxs-lookup"><span data-stu-id="d44b2-127">**Figure 3-13**.</span></span> <span data-ttu-id="d44b2-128">Escalado horizontal de un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="d44b2-128">Scaling out an App Service plan.</span></span>

<span data-ttu-id="d44b2-129">En conjunto, ambos garantizan un número óptimo de instancias de contenedor y nodos de proceso para admitir la demanda fluctuante.</span><span class="sxs-lookup"><span data-stu-id="d44b2-129">Working together, both ensure an optimal number of container instances and compute nodes to support fluctuating demand.</span></span> <span data-ttu-id="d44b2-130">El escalador automático del Pod horizontal optimiza el número de pods requeridos.</span><span class="sxs-lookup"><span data-stu-id="d44b2-130">The horizontal pod autoscaler optimizes the number of pods required.</span></span> <span data-ttu-id="d44b2-131">El escalador automático del clúster optimiza el número de nodos necesarios.</span><span class="sxs-lookup"><span data-stu-id="d44b2-131">The cluster autoscaler optimizes the number of nodes required.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="d44b2-132">Escalado de Azure Functions</span><span class="sxs-lookup"><span data-stu-id="d44b2-132">Scaling Azure Functions</span></span>

<span data-ttu-id="d44b2-133">Azure Functions escalar horizontalmente de forma automática a petición.</span><span class="sxs-lookup"><span data-stu-id="d44b2-133">Azure Functions automatically scale out upon demand.</span></span> <span data-ttu-id="d44b2-134">Los recursos del servidor se asignan y se quitan dinámicamente según el número de eventos desencadenados.</span><span class="sxs-lookup"><span data-stu-id="d44b2-134">Server resources are dynamically allocated and removed based on the number of triggered events.</span></span> <span data-ttu-id="d44b2-135">Solo se cobran los recursos de proceso consumidos cuando se ejecutan las funciones.</span><span class="sxs-lookup"><span data-stu-id="d44b2-135">You're only charged for compute resources consumed when your functions run.</span></span> <span data-ttu-id="d44b2-136">La facturación se basa en el número de ejecuciones, el tiempo de ejecución y la memoria usada.</span><span class="sxs-lookup"><span data-stu-id="d44b2-136">Billing is based upon the number of executions, execution time, and memory used.</span></span>

<span data-ttu-id="d44b2-137">Aunque el plan de consumo predeterminado proporciona una solución económica y escalable para la mayoría de las aplicaciones, la opción Premium permite a los desarrolladores disponer de flexibilidad para los requisitos de Azure Functions personalizados.</span><span class="sxs-lookup"><span data-stu-id="d44b2-137">While the default consumption plan provides an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span> <span data-ttu-id="d44b2-138">La actualización al plan Premium proporciona control sobre los tamaños de instancia, instancias previamente preparadas (para evitar retrasos de inicio en frío) y máquinas virtuales dedicadas.</span><span class="sxs-lookup"><span data-stu-id="d44b2-138">Upgrading to the premium plan provides control over instance sizes, pre-warmed instances (to avoid cold start delays), and dedicated VMs.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d44b2-139">[Anterior](deploy-containers-azure.md)
>[Siguiente](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="d44b2-139">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
