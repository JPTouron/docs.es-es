---
title: Aprovechamiento de funciones sin servidor
description: Aprovechamiento de Azure Functions sin servidor en aplicaciones nativas de la nube
ms.date: 05/13/2020
ms.openlocfilehash: 8e5c60d29cd8d635f79f42c232b33f060949e2b5
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91155372"
---
# <a name="leveraging-serverless-functions"></a><span data-ttu-id="a32f5-103">Aprovechamiento de funciones sin servidor</span><span class="sxs-lookup"><span data-stu-id="a32f5-103">Leveraging serverless functions</span></span>

<span data-ttu-id="a32f5-104">En el espectro desde la administración de máquinas físicas hasta el aprovechamiento de funcionalidades de la nube, las vidas sin servidor se encuentran en el extremo extremo.</span><span class="sxs-lookup"><span data-stu-id="a32f5-104">In the spectrum from managing physical machines to leveraging cloud capabilities, serverless lives at the extreme end.</span></span> <span data-ttu-id="a32f5-105">Su única responsabilidad es el código y solo pagará cuando se ejecute el código.</span><span class="sxs-lookup"><span data-stu-id="a32f5-105">Your only responsibility is your code, and you only pay when your code runs.</span></span> <span data-ttu-id="a32f5-106">Azure Functions proporciona una manera de crear funcionalidades sin servidor en las aplicaciones nativas de la nube.</span><span class="sxs-lookup"><span data-stu-id="a32f5-106">Azure Functions provides a way to build serverless capabilities into your cloud-native applications.</span></span>

## <a name="what-is-serverless"></a><span data-ttu-id="a32f5-107">¿Qué significa sin servidor?</span><span class="sxs-lookup"><span data-stu-id="a32f5-107">What is serverless?</span></span>

<span data-ttu-id="a32f5-108">Sin servidor es un modelo de servicio relativamente nuevo de informática en la nube.</span><span class="sxs-lookup"><span data-stu-id="a32f5-108">Serverless is a relatively new service model of cloud computing.</span></span> <span data-ttu-id="a32f5-109">No significa que los servidores sean opcionales: el código se sigue ejecutando en un servidor en algún lugar.</span><span class="sxs-lookup"><span data-stu-id="a32f5-109">It doesn't mean that servers are optional - your code still runs on a server somewhere.</span></span> <span data-ttu-id="a32f5-110">La diferencia es que el equipo de aplicaciones ya no se preocupa por la administración de la infraestructura de servidor.</span><span class="sxs-lookup"><span data-stu-id="a32f5-110">The distinction is that the application team no longer concerns itself with managing server infrastructure.</span></span> <span data-ttu-id="a32f5-111">En su lugar, el proveedor de la nube es el propietario de esta responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="a32f5-111">Instead, the cloud vendor own this responsibility.</span></span> <span data-ttu-id="a32f5-112">El equipo de desarrollo aumenta su productividad al ofrecer soluciones empresariales a los clientes, no a la infraestructura.</span><span class="sxs-lookup"><span data-stu-id="a32f5-112">The development team increases its productivity by delivering business solutions to customers, not plumbing.</span></span>

<span data-ttu-id="a32f5-113">La informática sin servidor usa contenedores sin estado desencadenados por eventos para hospedar los servicios.</span><span class="sxs-lookup"><span data-stu-id="a32f5-113">Serverless computing uses event-triggered stateless containers to host your services.</span></span> <span data-ttu-id="a32f5-114">Se pueden escalar horizontalmente y en para satisfacer la demanda según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="a32f5-114">They can scale out and in to meet demand as-needed.</span></span> <span data-ttu-id="a32f5-115">Las plataformas sin servidor como Azure Functions tienen una estrecha integración con otros servicios de Azure, como colas, eventos y almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="a32f5-115">Serverless platforms like Azure Functions have tight integration with other Azure services like queues, events, and storage.</span></span>

## <a name="what-challenges-are-solved-by-serverless"></a><span data-ttu-id="a32f5-116">¿Qué desafíos resuelve sin servidor?</span><span class="sxs-lookup"><span data-stu-id="a32f5-116">What challenges are solved by serverless?</span></span>

<span data-ttu-id="a32f5-117">Las plataformas sin servidor solucionan muchos problemas costosos y lentos:</span><span class="sxs-lookup"><span data-stu-id="a32f5-117">Serverless platforms address many time-consuming and expensive concerns:</span></span>

- <span data-ttu-id="a32f5-118">Comprar máquinas y licencias de software</span><span class="sxs-lookup"><span data-stu-id="a32f5-118">Purchasing machines and software licenses</span></span>
- <span data-ttu-id="a32f5-119">Alojamiento, protección, configuración y mantenimiento de los equipos y sus requisitos de red, alimentación y A/C</span><span class="sxs-lookup"><span data-stu-id="a32f5-119">Housing, securing, configuring, and maintaining the machines and their networking, power, and A/C requirements</span></span>
- <span data-ttu-id="a32f5-120">Revisión y actualización de sistemas operativos y software</span><span class="sxs-lookup"><span data-stu-id="a32f5-120">Patching and upgrading operating systems and software</span></span>
- <span data-ttu-id="a32f5-121">Configuración de servidores web o servicios de equipo para hospedar software de aplicación</span><span class="sxs-lookup"><span data-stu-id="a32f5-121">Configuring web servers or machine services to host application software</span></span>
- <span data-ttu-id="a32f5-122">Configuración de software de aplicaciones en su plataforma</span><span class="sxs-lookup"><span data-stu-id="a32f5-122">Configuring application software within its platform</span></span>

<span data-ttu-id="a32f5-123">Muchas empresas asignan grandes presupuestos para admitir la infraestructura de hardware.</span><span class="sxs-lookup"><span data-stu-id="a32f5-123">Many companies allocate large budgets to support hardware infrastructure concerns.</span></span> <span data-ttu-id="a32f5-124">Pasar a la nube puede ayudar a reducir estos costos. desplazar las aplicaciones a sin servidor puede ayudar a eliminarlas.</span><span class="sxs-lookup"><span data-stu-id="a32f5-124">Moving to the cloud can help reduce these costs; shifting applications to serverless can help eliminate them.</span></span>

## <a name="what-is-the-difference-between-a-microservice-and-a-serverless-function"></a><span data-ttu-id="a32f5-125">¿Cuál es la diferencia entre un microservicio y una función sin servidor?</span><span class="sxs-lookup"><span data-stu-id="a32f5-125">What is the difference between a microservice and a serverless function?</span></span>

<span data-ttu-id="a32f5-126">Normalmente, un microservicio encapsula una funcionalidad empresarial, como un carro de la compra de un sitio de comercio electrónico en línea.</span><span class="sxs-lookup"><span data-stu-id="a32f5-126">Typically, a microservice encapsulates a business capability, such as a shopping cart for an online eCommerce site.</span></span> <span data-ttu-id="a32f5-127">Expone varias operaciones que permiten a un usuario administrar su experiencia de compra.</span><span class="sxs-lookup"><span data-stu-id="a32f5-127">It exposes multiple operations that enable a user to manage their shopping experience.</span></span> <span data-ttu-id="a32f5-128">Sin embargo, una función es un pequeño bloque ligero de código que ejecuta una operación de un solo propósito en respuesta a un evento.</span><span class="sxs-lookup"><span data-stu-id="a32f5-128">A function, however, is a small, lightweight block of code that executes a single-purpose operation in response to an event.</span></span>
<span data-ttu-id="a32f5-129">Los microservicios se crean normalmente para responder a las solicitudes, a menudo desde una interfaz.</span><span class="sxs-lookup"><span data-stu-id="a32f5-129">Microservices are typically constructed to respond to requests, often from an interface.</span></span> <span data-ttu-id="a32f5-130">Las solicitudes pueden estar basadas en REST o gRPC de HTTP.</span><span class="sxs-lookup"><span data-stu-id="a32f5-130">Requests can be HTTP Rest- or gRPC-based.</span></span> <span data-ttu-id="a32f5-131">Los servicios sin servidor responden a los eventos.</span><span class="sxs-lookup"><span data-stu-id="a32f5-131">Serverless services respond to events.</span></span> <span data-ttu-id="a32f5-132">Su arquitectura orientada a eventos es ideal para procesar tareas en segundo plano de ejecución breve.</span><span class="sxs-lookup"><span data-stu-id="a32f5-132">Its event-driven architecture is ideal for processing short-running, background tasks.</span></span>

## <a name="what-scenarios-are-appropriate-for-serverless"></a><span data-ttu-id="a32f5-133">¿Qué escenarios son adecuados para sin servidor?</span><span class="sxs-lookup"><span data-stu-id="a32f5-133">What scenarios are appropriate for serverless?</span></span>

<span data-ttu-id="a32f5-134">Sin servidor expone funciones individuales de ejecución breve que se invocan en respuesta a un desencadenador.</span><span class="sxs-lookup"><span data-stu-id="a32f5-134">Serverless exposes individual short-running functions that are invoked in response to a trigger.</span></span> <span data-ttu-id="a32f5-135">Esto hace que sean ideales para el procesamiento de tareas en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="a32f5-135">This makes them ideal for processing background tasks.</span></span>

<span data-ttu-id="a32f5-136">Es posible que una aplicación necesite enviar un correo electrónico como un paso de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a32f5-136">An application might need to send an email as a step in a workflow.</span></span> <span data-ttu-id="a32f5-137">En lugar de enviar la notificación como parte de una solicitud de microservicio, coloque los detalles del mensaje en una cola.</span><span class="sxs-lookup"><span data-stu-id="a32f5-137">Instead of sending the notification as part of a microservice request, place the message details onto a queue.</span></span> <span data-ttu-id="a32f5-138">Una función de Azure puede quitar el mensaje de la cola y enviar el correo electrónico de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="a32f5-138">An Azure Function can dequeue the message and asynchronously send the email.</span></span> <span data-ttu-id="a32f5-139">Esto podría mejorar el rendimiento y la escalabilidad del microservicio.</span><span class="sxs-lookup"><span data-stu-id="a32f5-139">Doing so could improve the performance and scalability of the microservice.</span></span> <span data-ttu-id="a32f5-140">La [nivelación de la carga basada en cola](/azure/architecture/patterns/queue-based-load-leveling) se puede implementar para evitar cuellos de botella relacionados con el envío de los mensajes de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="a32f5-140">[Queue-based load leveling](/azure/architecture/patterns/queue-based-load-leveling) can be implemented to avoid bottlenecks related to sending the emails.</span></span> <span data-ttu-id="a32f5-141">Además, este servicio independiente podría reutilizarse como una utilidad en muchas aplicaciones diferentes.</span><span class="sxs-lookup"><span data-stu-id="a32f5-141">Additionally, this stand-alone service could be reused as a utility across many different applications.</span></span>

<span data-ttu-id="a32f5-142">La mensajería asincrónica de las colas y los temas es un patrón común para desencadenar funciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="a32f5-142">Asynchronous messaging from queues and topics is a common pattern to trigger serverless functions.</span></span> <span data-ttu-id="a32f5-143">Sin embargo, otros eventos pueden desencadenar Azure Functions, como los cambios realizados en Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="a32f5-143">However, Azure Functions can be triggered by other events, such as changes to Azure Blob Storage.</span></span> <span data-ttu-id="a32f5-144">Un servicio que admite cargas de imágenes puede tener una función de Azure responsable de optimizar el tamaño de la imagen.</span><span class="sxs-lookup"><span data-stu-id="a32f5-144">A service that supports image uploads could have an Azure Function responsible for optimizing the image size.</span></span> <span data-ttu-id="a32f5-145">La función se puede activar directamente mediante inserciones en Azure Blob Storage, lo que mantiene la complejidad de las operaciones de microservicios.</span><span class="sxs-lookup"><span data-stu-id="a32f5-145">The function could be triggered directly by inserts into Azure Blob Storage, keeping complexity out of the microservice operations.</span></span>

<span data-ttu-id="a32f5-146">Muchos servicios tienen procesos de ejecución prolongada como parte de sus flujos de trabajo.</span><span class="sxs-lookup"><span data-stu-id="a32f5-146">Many services have long-running processes as part of their workflows.</span></span> <span data-ttu-id="a32f5-147">A menudo, estas tareas se realizan como parte de la interacción del usuario con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a32f5-147">Often these tasks are done as part of the user's interaction with the application.</span></span> <span data-ttu-id="a32f5-148">Estas tareas pueden obligar al usuario a esperar, lo que afecta negativamente a su experiencia.</span><span class="sxs-lookup"><span data-stu-id="a32f5-148">These tasks can force the user to wait, negatively impacting their experience.</span></span> <span data-ttu-id="a32f5-149">La informática sin servidor proporciona una excelente manera de trasladar tareas más lentas fuera del bucle de interacción del usuario.</span><span class="sxs-lookup"><span data-stu-id="a32f5-149">Serverless computing provides a great way to move slower tasks outside of the user interaction loop.</span></span> <span data-ttu-id="a32f5-150">Estas tareas se pueden escalar con la demanda sin necesidad de escalar toda la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a32f5-150">These tasks can scale with demand without requiring the entire application to scale.</span></span>

## <a name="when-should-you-avoid-serverless"></a><span data-ttu-id="a32f5-151">¿Cuándo debe evitarse el servidor?</span><span class="sxs-lookup"><span data-stu-id="a32f5-151">When should you avoid serverless?</span></span>

<span data-ttu-id="a32f5-152">Las soluciones sin servidor se aprovisionan y escalan a petición.</span><span class="sxs-lookup"><span data-stu-id="a32f5-152">Serverless solutions provision and scale on demand.</span></span> <span data-ttu-id="a32f5-153">Cuando se invoca una instancia nueva, los inicios en frío son un problema común.</span><span class="sxs-lookup"><span data-stu-id="a32f5-153">When a new instance is invoked, cold starts are a common issue.</span></span> <span data-ttu-id="a32f5-154">Un inicio en frío es el período de tiempo que se tarda en aprovisionar esta instancia.</span><span class="sxs-lookup"><span data-stu-id="a32f5-154">A cold start is the period of time it takes to provision this instance.</span></span> <span data-ttu-id="a32f5-155">Normalmente, este retraso puede ser algunos segundos, pero puede ser más largo en función de varios factores.</span><span class="sxs-lookup"><span data-stu-id="a32f5-155">Normally, this delay might be a few seconds, but can be longer depending on various factors.</span></span> <span data-ttu-id="a32f5-156">Una vez aprovisionado, una instancia única se mantiene activa siempre que reciba solicitudes periódicas.</span><span class="sxs-lookup"><span data-stu-id="a32f5-156">Once provisioned, a single instance is kept alive as long as it receives periodic requests.</span></span> <span data-ttu-id="a32f5-157">Sin embargo, si se llama a un servicio con menos frecuencia, Azure puede quitarlo de la memoria y requerir un inicio en frío cuando se revoque.</span><span class="sxs-lookup"><span data-stu-id="a32f5-157">But, if a service is called less frequently, Azure may remove it from memory and require a cold start when reinvoked.</span></span> <span data-ttu-id="a32f5-158">Los inicios en frío también son necesarios cuando una función se escala horizontalmente a una nueva instancia.</span><span class="sxs-lookup"><span data-stu-id="a32f5-158">Cold starts are also required when a function scales out to a new instance.</span></span>

<span data-ttu-id="a32f5-159">En la figura 3-10 se muestra un patrón de inicio en frío.</span><span class="sxs-lookup"><span data-stu-id="a32f5-159">Figure 3-10 shows a cold-start pattern.</span></span> <span data-ttu-id="a32f5-160">Tenga en cuenta los pasos adicionales necesarios cuando la aplicación esté en frío.</span><span class="sxs-lookup"><span data-stu-id="a32f5-160">Note the extra steps required when the app is cold.</span></span>

<span data-ttu-id="a32f5-161">![En frío frente a Inicio en caliente, ](./media/cold-start-warm-start.png)
 **figura 3-10**.</span><span class="sxs-lookup"><span data-stu-id="a32f5-161">![Cold versus warm start](./media/cold-start-warm-start.png)
**Figure 3-10**.</span></span> <span data-ttu-id="a32f5-162">Inicio en frío frente a Inicio en caliente.</span><span class="sxs-lookup"><span data-stu-id="a32f5-162">Cold start versus warm start.</span></span>

<span data-ttu-id="a32f5-163">Para evitar que el frío se inicie por completo, puede cambiar de un [plan de consumo a un plan dedicado](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span><span class="sxs-lookup"><span data-stu-id="a32f5-163">To avoid cold starts entirely, you might switch from a [consumption plan to a dedicated plan](https://azure.microsoft.com/blog/understanding-serverless-cold-start/).</span></span> <span data-ttu-id="a32f5-164">También puede configurar una o varias [instancias previamente preparadas](/azure/azure-functions/functions-premium-plan#pre-warmed-instances) con la actualización del plan Premium.</span><span class="sxs-lookup"><span data-stu-id="a32f5-164">You can also configure one or more [pre-warmed instances](/azure/azure-functions/functions-premium-plan#pre-warmed-instances) with the premium plan upgrade.</span></span> <span data-ttu-id="a32f5-165">En estos casos, cuando necesite agregar otra instancia, ya está activa y lista para ir.</span><span class="sxs-lookup"><span data-stu-id="a32f5-165">In these cases, when you need to add another instance, it's already up and ready to go.</span></span> <span data-ttu-id="a32f5-166">Estas opciones pueden ayudar a mitigar el problema de inicio en frío asociado a la informática sin servidor.</span><span class="sxs-lookup"><span data-stu-id="a32f5-166">These options can help mitigate the cold start issue associated with serverless computing.</span></span>

<span data-ttu-id="a32f5-167">Los proveedores de nube facturan sin servidor según el tiempo de ejecución de proceso y la memoria consumida.</span><span class="sxs-lookup"><span data-stu-id="a32f5-167">Cloud providers bill for serverless based on compute execution time and consumed memory.</span></span> <span data-ttu-id="a32f5-168">Las operaciones de ejecución prolongada o las cargas de trabajo de consumo de memoria alta no son siempre las mejores candidatas para sin servidor.</span><span class="sxs-lookup"><span data-stu-id="a32f5-168">Long running operations or high memory consumption workloads aren't always the best candidates for serverless.</span></span> <span data-ttu-id="a32f5-169">Las funciones sin servidor favorecen pequeños fragmentos de trabajo que pueden completarse rápidamente.</span><span class="sxs-lookup"><span data-stu-id="a32f5-169">Serverless functions favor small chunks of work that can complete quickly.</span></span> <span data-ttu-id="a32f5-170">La mayoría de las plataformas sin servidor requieren funciones individuales para completarse en unos minutos.</span><span class="sxs-lookup"><span data-stu-id="a32f5-170">Most serverless platforms require individual functions to complete within a few minutes.</span></span> <span data-ttu-id="a32f5-171">Azure Functions tiene como valor predeterminado una duración de tiempo de espera de 5 minutos, que puede configurarse hasta 10 minutos.</span><span class="sxs-lookup"><span data-stu-id="a32f5-171">Azure Functions defaults to a 5-minute time-out duration, which can be configured up to 10 minutes.</span></span> <span data-ttu-id="a32f5-172">El plan de Azure Functions Premium también puede mitigar este problema y establecer de forma predeterminada los tiempos de espera en 30 minutos con un límite superior ilimitado que se pueda configurar.</span><span class="sxs-lookup"><span data-stu-id="a32f5-172">The Azure Functions premium plan can mitigate this issue as well, defaulting time-outs to 30 minutes with an unbounded higher limit that can be configured.</span></span> <span data-ttu-id="a32f5-173">El tiempo de proceso no es la hora del calendario.</span><span class="sxs-lookup"><span data-stu-id="a32f5-173">Compute time isn't calendar time.</span></span> <span data-ttu-id="a32f5-174">Las funciones más avanzadas que usan [Azure durable Functions Framework](/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) pueden pausar la ejecución en un curso de varios días.</span><span class="sxs-lookup"><span data-stu-id="a32f5-174">More advanced functions using the [Azure Durable Functions framework](/azure/azure-functions/durable/durable-functions-overview?tabs=csharp) may pause execution over a course of several days.</span></span> <span data-ttu-id="a32f5-175">La facturación se basa en el tiempo de ejecución real: cuando la función se activa y reanuda el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="a32f5-175">The billing is based on actual execution time - when the function wakes up and resumes processing.</span></span>

<span data-ttu-id="a32f5-176">Por último, el uso de Azure Functions para las tareas de la aplicación agrega complejidad.</span><span class="sxs-lookup"><span data-stu-id="a32f5-176">Finally, leveraging Azure Functions for application tasks adds complexity.</span></span> <span data-ttu-id="a32f5-177">Es aconsejable diseñar primero la aplicación con un diseño modular y de acoplamiento flexible.</span><span class="sxs-lookup"><span data-stu-id="a32f5-177">It's wise to first architect your application with a modular, loosely coupled design.</span></span> <span data-ttu-id="a32f5-178">A continuación, identifique si hay beneficios que el servidor no pueda ofrecer y justifique la complejidad adicional.</span><span class="sxs-lookup"><span data-stu-id="a32f5-178">Then, identify if there are benefits serverless would offer that justify the additional complexity.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="a32f5-179">[Anterior](leverage-containers-orchestrators.md)
>[Siguiente](combine-containers-serverless-approaches.md)</span><span class="sxs-lookup"><span data-stu-id="a32f5-179">[Previous](leverage-containers-orchestrators.md)
[Next](combine-containers-serverless-approaches.md)</span></span>
