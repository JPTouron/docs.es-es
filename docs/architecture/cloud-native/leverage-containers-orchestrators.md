---
title: Aprovechamiento de contenedores y orquestadores
description: Aprovechar los contenedores de Docker y los orquestadores de Kubernetes en Azure
ms.date: 05/13/2020
ms.openlocfilehash: 5d0b7f41caecb3422a4416514de2fdd54e94539a
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613928"
---
# <a name="leveraging-containers-and-orchestrators"></a><span data-ttu-id="748ed-103">Aprovechamiento de contenedores y orquestadores</span><span class="sxs-lookup"><span data-stu-id="748ed-103">Leveraging containers and orchestrators</span></span>

<span data-ttu-id="748ed-104">Los contenedores y los orquestadores están diseñados para solucionar problemas comunes a los enfoques de implementación monolíticas.</span><span class="sxs-lookup"><span data-stu-id="748ed-104">Containers and orchestrators are designed to solve problems common to monolithic deployment approaches.</span></span>

## <a name="challenges-with-monolithic-deployments"></a><span data-ttu-id="748ed-105">Desafíos con las implementaciones monolíticas</span><span class="sxs-lookup"><span data-stu-id="748ed-105">Challenges with monolithic deployments</span></span>

<span data-ttu-id="748ed-106">Tradicionalmente, la mayoría de las aplicaciones se han implementado como una sola unidad.</span><span class="sxs-lookup"><span data-stu-id="748ed-106">Traditionally, most applications have been deployed as a single unit.</span></span> <span data-ttu-id="748ed-107">Estas aplicaciones se conocen como monolito.</span><span class="sxs-lookup"><span data-stu-id="748ed-107">Such applications are referred to as a monolith.</span></span> <span data-ttu-id="748ed-108">Este enfoque general de la implementación de aplicaciones como unidades únicas incluso si están compuestas de varios módulos o ensamblados se conoce como arquitectura monolítica, como se muestra en la figura 3-1.</span><span class="sxs-lookup"><span data-stu-id="748ed-108">This general approach of deploying applications as single units even if they're composed of multiple modules or assemblies is known as monolithic architecture, as shown in Figure 3-1.</span></span>

![Arquitectura monolítica.](./media/monolithic-design.png)

<span data-ttu-id="748ed-110">**Figura 3-1**.</span><span class="sxs-lookup"><span data-stu-id="748ed-110">**Figure 3-1**.</span></span> <span data-ttu-id="748ed-111">Arquitectura monolítica.</span><span class="sxs-lookup"><span data-stu-id="748ed-111">Monolithic architecture.</span></span>

<span data-ttu-id="748ed-112">Aunque tienen la ventaja de simplicidad, las arquitecturas monolíticas se enfrentan a una serie de desafíos:</span><span class="sxs-lookup"><span data-stu-id="748ed-112">Although they have the benefit of simplicity, monolithic architectures face a number of challenges:</span></span>

### <a name="deployment"></a><span data-ttu-id="748ed-113">Implementación</span><span class="sxs-lookup"><span data-stu-id="748ed-113">Deployment</span></span>

<span data-ttu-id="748ed-114">Las aplicaciones monolíticas requieren una implementación completa de toda la aplicación, incluso si solo se ha realizado un pequeño cambio.</span><span class="sxs-lookup"><span data-stu-id="748ed-114">Monolithic applications require a full deployment of the entire application, even if only a small change has been made.</span></span> <span data-ttu-id="748ed-115">Las implementaciones completas pueden ser costosas y propensas a errores.</span><span class="sxs-lookup"><span data-stu-id="748ed-115">Full deployments can be expensive and error prone.</span></span> <span data-ttu-id="748ed-116">Además, requieren un reinicio de la aplicación, lo que afecta temporalmente a la falta de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="748ed-116">Additionally, they require a restart of the application, which temporarily impacts unavailability.</span></span>

### <a name="scaling"></a><span data-ttu-id="748ed-117">Ampliación</span><span class="sxs-lookup"><span data-stu-id="748ed-117">Scaling</span></span>

<span data-ttu-id="748ed-118">Una aplicación monolítica se hospeda por completo en una sola instancia de máquina, lo que a menudo requiere hardware de alta capacidad.</span><span class="sxs-lookup"><span data-stu-id="748ed-118">A monolithic application is hosted entirely on a single machine instance, often requiring high-capability hardware.</span></span> <span data-ttu-id="748ed-119">Si alguna parte del monolito requiere escalado, se debe implementar otra copia de toda la aplicación en otro equipo.</span><span class="sxs-lookup"><span data-stu-id="748ed-119">If any part of the monolith requires scaling, another copy of the entire application must be deployed to another machine.</span></span> <span data-ttu-id="748ed-120">Con un monolito, no es posible escalar los componentes de la aplicación de forma individual; es todo o nada.</span><span class="sxs-lookup"><span data-stu-id="748ed-120">With a monolith, you can't scale application components individually - it's all or nothing.</span></span> <span data-ttu-id="748ed-121">El escalado de componentes que no requieren escalado produce un uso de recursos ineficaz y costoso.</span><span class="sxs-lookup"><span data-stu-id="748ed-121">Scaling components that don't require scaling results in inefficient and costly resource usage.</span></span>

### <a name="environment"></a><span data-ttu-id="748ed-122">Entorno</span><span class="sxs-lookup"><span data-stu-id="748ed-122">Environment</span></span>

<span data-ttu-id="748ed-123">Las aplicaciones monolíticas suelen implementarse en un entorno de hospedaje con un sistema operativo, un tiempo de ejecución y dependencias de biblioteca preinstalados.</span><span class="sxs-lookup"><span data-stu-id="748ed-123">Monolithic applications are typically deployed to a hosting environment with a pre-installed operating system, runtime, and library dependencies.</span></span> <span data-ttu-id="748ed-124">Es posible que este entorno no coincida con el momento en el que se desarrolló o probó la aplicación.</span><span class="sxs-lookup"><span data-stu-id="748ed-124">This environment may not match that upon which the application was developed or tested.</span></span> <span data-ttu-id="748ed-125">Las incoherencias entre entornos de aplicación son una fuente común de problemas en las implementaciones monolíticas.</span><span class="sxs-lookup"><span data-stu-id="748ed-125">Inconsistencies across application environments are a common source of problems for monolithic deployments.</span></span>

### <a name="coupling"></a><span data-ttu-id="748ed-126">Socia</span><span class="sxs-lookup"><span data-stu-id="748ed-126">Coupling</span></span>

<span data-ttu-id="748ed-127">Es probable que una aplicación monolítica experimente un acoplamiento alto entre sus componentes funcionales.</span><span class="sxs-lookup"><span data-stu-id="748ed-127">A monolithic application is likely to experience high coupling across its functional components.</span></span> <span data-ttu-id="748ed-128">Sin límites estrictos, los cambios del sistema suelen producir efectos secundarios no deseados y costosos.</span><span class="sxs-lookup"><span data-stu-id="748ed-128">Without hard boundaries, system changes often result in unintended and costly side effects.</span></span> <span data-ttu-id="748ed-129">Las nuevas características y correcciones se vuelven difíciles de implementar y requieren mucho tiempo.</span><span class="sxs-lookup"><span data-stu-id="748ed-129">New features/fixes become tricky, time-consuming, and expensive to implement.</span></span> <span data-ttu-id="748ed-130">Las actualizaciones requieren pruebas exhaustivas.</span><span class="sxs-lookup"><span data-stu-id="748ed-130">Updates require extensive testing.</span></span> <span data-ttu-id="748ed-131">El acoplamiento también dificulta la refactorización de los componentes o el intercambio en implementaciones alternativas.</span><span class="sxs-lookup"><span data-stu-id="748ed-131">Coupling also makes it difficult to refactor components or swap in alternative implementations.</span></span> <span data-ttu-id="748ed-132">Incluso cuando se construye con una separación estricta de problemas, la arquitectura de erosión se establece en, ya que la base de código monolítica se deteriora con "casos especiales".</span><span class="sxs-lookup"><span data-stu-id="748ed-132">Even when constructed with a strict separation of concerns, architectural erosion sets in as the monolithic code base deteriorates with never-ending "special cases."</span></span>

### <a name="platform-lock-in"></a><span data-ttu-id="748ed-133">Bloqueo de plataforma</span><span class="sxs-lookup"><span data-stu-id="748ed-133">Platform lock-in</span></span>

<span data-ttu-id="748ed-134">Una aplicación monolítica se construye con una sola pila de tecnología.</span><span class="sxs-lookup"><span data-stu-id="748ed-134">A monolithic application is constructed with a single technology stack.</span></span> <span data-ttu-id="748ed-135">A la vez que ofrece uniformidad, este compromiso puede convertirse en una barrera para la innovación.</span><span class="sxs-lookup"><span data-stu-id="748ed-135">While offering uniformity, this commitment can become a barrier to innovation.</span></span> <span data-ttu-id="748ed-136">Las nuevas características y componentes se crearán con la pila actual de la aplicación, incluso si las tecnologías más modernas pueden ser una mejor opción.</span><span class="sxs-lookup"><span data-stu-id="748ed-136">New features and components will be built using the application's current stack - even when more modern technologies may be a better choice.</span></span> <span data-ttu-id="748ed-137">Un riesgo a largo plazo es que la pila de tecnología esté obsoleta y obsoleta.</span><span class="sxs-lookup"><span data-stu-id="748ed-137">A longer-term risk is your technology stack becoming outdated and obsolete.</span></span> <span data-ttu-id="748ed-138">Rediseñar una aplicación completa en una plataforma nueva y más moderna es más costosa y arriesgada.</span><span class="sxs-lookup"><span data-stu-id="748ed-138">Rearchitecting an entire application to a new, more modern platform is at best expensive and risky.</span></span>

## <a name="what-are-the-benefits-of-containers-and-orchestrators"></a><span data-ttu-id="748ed-139">¿Cuáles son las ventajas de los contenedores y los orquestadores?</span><span class="sxs-lookup"><span data-stu-id="748ed-139">What are the benefits of containers and orchestrators?</span></span>

<span data-ttu-id="748ed-140">Presentamos los contenedores en el capítulo 1.</span><span class="sxs-lookup"><span data-stu-id="748ed-140">We introduced containers in Chapter 1.</span></span> <span data-ttu-id="748ed-141">Hemos resaltado el modo en que Cloud Native Computing Foundation (CNCF) clasifica la inclusión en contenedores como el primer paso de su [mapa de rastros nativo](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) de la nube para empresas que comienzan su viaje nativo en la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-141">We highlighted how the Cloud Native Computing Foundation (CNCF) ranks containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span> <span data-ttu-id="748ed-142">En esta sección se describen las ventajas de los contenedores.</span><span class="sxs-lookup"><span data-stu-id="748ed-142">In this section, we discuss the benefits of containers.</span></span>

<span data-ttu-id="748ed-143">Docker es la plataforma de administración de contenedores más conocida.</span><span class="sxs-lookup"><span data-stu-id="748ed-143">Docker is the most popular container management platform.</span></span> <span data-ttu-id="748ed-144">Funciona con contenedores en Linux o Windows.</span><span class="sxs-lookup"><span data-stu-id="748ed-144">It works with containers on both Linux or Windows.</span></span> <span data-ttu-id="748ed-145">Los contenedores proporcionan entornos de aplicación independientes pero reproducibles que se ejecutan de la misma manera en cualquier sistema.</span><span class="sxs-lookup"><span data-stu-id="748ed-145">Containers provide separate but reproducible application environments that run the same way on any system.</span></span> <span data-ttu-id="748ed-146">Este aspecto hace que sean perfectos para el desarrollo y el hospedaje de servicios nativos de la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-146">This aspect makes them perfect for developing and hosting cloud-native services.</span></span> <span data-ttu-id="748ed-147">Los contenedores están aislados entre sí.</span><span class="sxs-lookup"><span data-stu-id="748ed-147">Containers are isolated from one another.</span></span> <span data-ttu-id="748ed-148">Dos contenedores del mismo hardware del host pueden tener diferentes versiones de software, sin causar conflictos.</span><span class="sxs-lookup"><span data-stu-id="748ed-148">Two containers on the same host hardware can have different versions of software, without causing conflicts.</span></span>

<span data-ttu-id="748ed-149">Los contenedores se definen mediante archivos simples basados en texto que se convierten en artefactos del proyecto y se protegen en el control de código fuente.</span><span class="sxs-lookup"><span data-stu-id="748ed-149">Containers are defined by simple text-based files that become project artifacts and are checked into source control.</span></span> <span data-ttu-id="748ed-150">Mientras que los servidores completos y las máquinas virtuales requieren un esfuerzo manual para actualizar, los contenedores se controlan fácilmente con la versión.</span><span class="sxs-lookup"><span data-stu-id="748ed-150">While full servers and virtual machines require manual effort to update, containers are easily version-controlled.</span></span> <span data-ttu-id="748ed-151">Las aplicaciones compiladas para ejecutarse en contenedores se pueden desarrollar, probar e implementar mediante herramientas automatizadas como parte de una canalización de compilación.</span><span class="sxs-lookup"><span data-stu-id="748ed-151">Apps built to run in containers can be developed, tested, and deployed using automated tools as part of a build pipeline.</span></span>

<span data-ttu-id="748ed-152">Los contenedores son inmutables.</span><span class="sxs-lookup"><span data-stu-id="748ed-152">Containers are immutable.</span></span> <span data-ttu-id="748ed-153">Una vez definido un contenedor, puede volver a crearlo y ejecutarlo exactamente de la misma manera.</span><span class="sxs-lookup"><span data-stu-id="748ed-153">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="748ed-154">Esta inmutabilidad se presta a un diseño basado en componentes.</span><span class="sxs-lookup"><span data-stu-id="748ed-154">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="748ed-155">Si algunas partes de una aplicación evolucionan de forma diferente a otras, ¿por qué volver a implementar toda la aplicación cuando se puede implementar solo los elementos que cambian con más frecuencia?</span><span class="sxs-lookup"><span data-stu-id="748ed-155">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="748ed-156">Las distintas características y aspectos transversales de una aplicación se pueden dividir en unidades independientes.</span><span class="sxs-lookup"><span data-stu-id="748ed-156">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="748ed-157">En la figura 3-2 se muestra cómo una aplicación monolítica puede aprovechar las ventajas de los contenedores y los microservicios mediante la delegación de ciertas características o funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="748ed-157">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="748ed-158">La funcionalidad restante en la propia aplicación también se ha contenedor.</span><span class="sxs-lookup"><span data-stu-id="748ed-158">The remaining functionality in the app itself has also been containerized.</span></span>

<span data-ttu-id="748ed-159">Los contenedores son inmutables.</span><span class="sxs-lookup"><span data-stu-id="748ed-159">Containers are immutable.</span></span> <span data-ttu-id="748ed-160">Una vez definido un contenedor, puede volver a crearlo y ejecutarlo exactamente de la misma manera.</span><span class="sxs-lookup"><span data-stu-id="748ed-160">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="748ed-161">Esta inmutabilidad se presta a un diseño basado en componentes.</span><span class="sxs-lookup"><span data-stu-id="748ed-161">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="748ed-162">Si algunas partes de una aplicación evolucionan de forma diferente a otras, ¿por qué volver a implementar toda la aplicación cuando se puede implementar solo los elementos que cambian con más frecuencia?</span><span class="sxs-lookup"><span data-stu-id="748ed-162">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="748ed-163">Las distintas características y aspectos transversales de una aplicación se pueden dividir en unidades independientes.</span><span class="sxs-lookup"><span data-stu-id="748ed-163">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="748ed-164">En la figura 3-2 se muestra cómo una aplicación monolítica puede aprovechar las ventajas de los contenedores y los microservicios mediante la delegación de ciertas características o funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="748ed-164">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="748ed-165">La funcionalidad restante en la propia aplicación también se ha contenedor.</span><span class="sxs-lookup"><span data-stu-id="748ed-165">The remaining functionality in the app itself has also been containerized.</span></span>

![Dividir una aplicación monolítica para usar microservicios en el back-end.](./media/cloud-native-design.png)

<span data-ttu-id="748ed-167">**Figura 3-2**.</span><span class="sxs-lookup"><span data-stu-id="748ed-167">**Figure 3-2**.</span></span> <span data-ttu-id="748ed-168">Descomponer una aplicación monolítica para adoptar microservicios.</span><span class="sxs-lookup"><span data-stu-id="748ed-168">Decomposing a monolithic app to embrace microservices.</span></span>

<span data-ttu-id="748ed-169">Cada servicio en la nube nativo se compila e implementa en un contenedor independiente.</span><span class="sxs-lookup"><span data-stu-id="748ed-169">Each cloud-native service is built and deployed in a separate container.</span></span> <span data-ttu-id="748ed-170">Cada se puede actualizar según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="748ed-170">Each can update as needed.</span></span> <span data-ttu-id="748ed-171">Los servicios individuales se pueden hospedar en nodos con recursos adecuados para cada servicio.</span><span class="sxs-lookup"><span data-stu-id="748ed-171">Individual services can be hosted on nodes with resources appropriate to each service.</span></span> <span data-ttu-id="748ed-172">El entorno en el que se ejecuta cada servicio es inmutable, compartido entre los entornos de desarrollo, pruebas y producción, y con una versión sencilla.</span><span class="sxs-lookup"><span data-stu-id="748ed-172">The environment each service runs in is immutable, shared across dev, test, and production environments, and easily versioned.</span></span> <span data-ttu-id="748ed-173">El acoplamiento entre distintas áreas de la aplicación se produce explícitamente como llamadas o mensajes entre servicios, no las dependencias en tiempo de compilación dentro del monolito.</span><span class="sxs-lookup"><span data-stu-id="748ed-173">Coupling between different areas of the application occurs explicitly as calls or messages between services, not compile-time dependencies within the monolith.</span></span> <span data-ttu-id="748ed-174">También puede elegir la tecnología que mejor se adapte a una funcionalidad determinada sin necesidad de realizar cambios en el resto de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="748ed-174">You can also choose the technology that best suites a given capability without requiring changes to the rest of the app.</span></span>

<span data-ttu-id="748ed-175">Los servicios en contenedores requieren una administración automatizada.</span><span class="sxs-lookup"><span data-stu-id="748ed-175">Containerized services require automated management.</span></span> <span data-ttu-id="748ed-176">No sería factible administrar manualmente un gran conjunto de contenedores implementados de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="748ed-176">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="748ed-177">Por ejemplo, considere las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="748ed-177">For example, consider the following tasks:</span></span>

- <span data-ttu-id="748ed-178">¿Cómo se aprovisionarán las instancias de contenedor en un clúster de muchas máquinas?</span><span class="sxs-lookup"><span data-stu-id="748ed-178">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="748ed-179">Una vez implementado, ¿cómo se detectarán los contenedores y se comunicarán entre sí?</span><span class="sxs-lookup"><span data-stu-id="748ed-179">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="748ed-180">¿Cómo se pueden escalar o reducir horizontalmente los contenedores a petición?</span><span class="sxs-lookup"><span data-stu-id="748ed-180">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="748ed-181">¿Cómo se supervisa el estado de cada contenedor?</span><span class="sxs-lookup"><span data-stu-id="748ed-181">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="748ed-182">¿Cómo se protege un contenedor frente a errores de hardware y software?</span><span class="sxs-lookup"><span data-stu-id="748ed-182">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="748ed-183">¿Cómo se actualizan los contenedores de una aplicación activa sin tiempo de inactividad?</span><span class="sxs-lookup"><span data-stu-id="748ed-183">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="748ed-184">Los orquestadores de contenedores abordan y automatizan estos y otros problemas.</span><span class="sxs-lookup"><span data-stu-id="748ed-184">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="748ed-185">En el sistema ecológico nativo de la nube, Kubernetes se ha convertido en el orquestador de contenedores de facto.</span><span class="sxs-lookup"><span data-stu-id="748ed-185">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="748ed-186">Es una plataforma de código abierto administrada por Cloud Native Computing Foundation (CNCF).</span><span class="sxs-lookup"><span data-stu-id="748ed-186">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="748ed-187">Kubernetes automatiza la implementación, el escalado y los aspectos operativos de las cargas de trabajo en contenedores en un clúster de máquinas.</span><span class="sxs-lookup"><span data-stu-id="748ed-187">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="748ed-188">Sin embargo, instalar y administrar Kubernetes es muy complejo.</span><span class="sxs-lookup"><span data-stu-id="748ed-188">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="748ed-189">Un enfoque mucho mejor es aprovechar Kubernetes como servicio administrado de un proveedor en la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-189">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="748ed-190">La nube de Azure incluye una plataforma Kubernetes totalmente administrada titulada [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="748ed-190">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="748ed-191">AKS abstrae la complejidad y la sobrecarga operativa de la administración de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-191">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="748ed-192">Utilice Kubernetes como servicio en la nube; Microsoft asume la responsabilidad de administrarla y respaldarla.</span><span class="sxs-lookup"><span data-stu-id="748ed-192">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="748ed-193">AKS también se integra estrechamente con otros servicios de Azure y herramientas de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="748ed-193">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="748ed-194">AKS es una tecnología basada en clústeres.</span><span class="sxs-lookup"><span data-stu-id="748ed-194">AKS is a cluster-based technology.</span></span> <span data-ttu-id="748ed-195">Un grupo de máquinas virtuales federadas, o nodos, se implementa en la nube de Azure.</span><span class="sxs-lookup"><span data-stu-id="748ed-195">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="748ed-196">Juntos, forman un entorno de alta disponibilidad o un clúster.</span><span class="sxs-lookup"><span data-stu-id="748ed-196">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="748ed-197">El clúster aparece como una entidad única y sin problemas para la aplicación nativa en la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-197">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="748ed-198">En el capó, AKS implementa los servicios en contenedores en estos nodos después de una estrategia predefinida que distribuye uniformemente la carga.</span><span class="sxs-lookup"><span data-stu-id="748ed-198">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

<span data-ttu-id="748ed-199">Los servicios en contenedores requieren una administración automatizada.</span><span class="sxs-lookup"><span data-stu-id="748ed-199">Containerized services require automated management.</span></span> <span data-ttu-id="748ed-200">No sería factible administrar manualmente un gran conjunto de contenedores implementados de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="748ed-200">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="748ed-201">Por ejemplo, considere las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="748ed-201">For example, consider the following tasks:</span></span>

- <span data-ttu-id="748ed-202">¿Cómo se aprovisionarán las instancias de contenedor en un clúster de muchas máquinas?</span><span class="sxs-lookup"><span data-stu-id="748ed-202">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="748ed-203">Una vez implementado, ¿cómo se detectarán los contenedores y se comunicarán entre sí?</span><span class="sxs-lookup"><span data-stu-id="748ed-203">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="748ed-204">¿Cómo se pueden escalar o reducir horizontalmente los contenedores a petición?</span><span class="sxs-lookup"><span data-stu-id="748ed-204">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="748ed-205">¿Cómo se supervisa el estado de cada contenedor?</span><span class="sxs-lookup"><span data-stu-id="748ed-205">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="748ed-206">¿Cómo se protege un contenedor frente a errores de hardware y software?</span><span class="sxs-lookup"><span data-stu-id="748ed-206">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="748ed-207">¿Cómo se actualizan los contenedores de una aplicación activa sin tiempo de inactividad?</span><span class="sxs-lookup"><span data-stu-id="748ed-207">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="748ed-208">Los orquestadores de contenedores abordan y automatizan estos y otros problemas.</span><span class="sxs-lookup"><span data-stu-id="748ed-208">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="748ed-209">En el sistema ecológico nativo de la nube, Kubernetes se ha convertido en el orquestador de contenedores de facto.</span><span class="sxs-lookup"><span data-stu-id="748ed-209">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="748ed-210">Es una plataforma de código abierto administrada por Cloud Native Computing Foundation (CNCF).</span><span class="sxs-lookup"><span data-stu-id="748ed-210">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="748ed-211">Kubernetes automatiza la implementación, el escalado y los aspectos operativos de las cargas de trabajo en contenedores en un clúster de máquinas.</span><span class="sxs-lookup"><span data-stu-id="748ed-211">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="748ed-212">Sin embargo, instalar y administrar Kubernetes es muy complejo.</span><span class="sxs-lookup"><span data-stu-id="748ed-212">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="748ed-213">Un enfoque mucho mejor es aprovechar Kubernetes como servicio administrado de un proveedor en la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-213">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="748ed-214">La nube de Azure incluye una plataforma Kubernetes totalmente administrada titulada [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="748ed-214">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="748ed-215">AKS abstrae la complejidad y la sobrecarga operativa de la administración de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-215">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="748ed-216">Utilice Kubernetes como servicio en la nube; Microsoft asume la responsabilidad de administrarla y respaldarla.</span><span class="sxs-lookup"><span data-stu-id="748ed-216">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="748ed-217">AKS también se integra estrechamente con otros servicios de Azure y herramientas de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="748ed-217">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="748ed-218">AKS es una tecnología basada en clústeres.</span><span class="sxs-lookup"><span data-stu-id="748ed-218">AKS is a cluster-based technology.</span></span> <span data-ttu-id="748ed-219">Un grupo de máquinas virtuales federadas, o nodos, se implementa en la nube de Azure.</span><span class="sxs-lookup"><span data-stu-id="748ed-219">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="748ed-220">Juntos, forman un entorno de alta disponibilidad o un clúster.</span><span class="sxs-lookup"><span data-stu-id="748ed-220">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="748ed-221">El clúster aparece como una entidad única y sin problemas para la aplicación nativa en la nube.</span><span class="sxs-lookup"><span data-stu-id="748ed-221">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="748ed-222">En el capó, AKS implementa los servicios en contenedores en estos nodos después de una estrategia predefinida que distribuye uniformemente la carga.</span><span class="sxs-lookup"><span data-stu-id="748ed-222">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

## <a name="what-are-the-scaling-benefits"></a><span data-ttu-id="748ed-223">¿Cuáles son las ventajas de escalado?</span><span class="sxs-lookup"><span data-stu-id="748ed-223">What are the scaling benefits?</span></span>

<span data-ttu-id="748ed-224">Los servicios basados en contenedores pueden aprovechar las ventajas de escalado que proporcionan las herramientas de orquestación como Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-224">Services built on containers can leverage scaling benefits provided by orchestration tools like Kubernetes.</span></span> <span data-ttu-id="748ed-225">Los contenedores de diseño solo lo saben.</span><span class="sxs-lookup"><span data-stu-id="748ed-225">By design containers only know about themselves.</span></span> <span data-ttu-id="748ed-226">Una vez que tenga varios contenedores que necesiten trabajar juntos, debe organizarlos en un nivel superior.</span><span class="sxs-lookup"><span data-stu-id="748ed-226">Once you have multiple containers that need to work together, you should organize them at a higher level.</span></span> <span data-ttu-id="748ed-227">La organización de un gran número de contenedores y sus dependencias compartidas, como la configuración de red, es donde se encuentran las herramientas de orquestación para ahorrar el día.</span><span class="sxs-lookup"><span data-stu-id="748ed-227">Organizing large numbers of containers and their shared dependencies, such as network configuration, is where orchestration tools come in to save the day!</span></span> <span data-ttu-id="748ed-228">Kubernetes crea una capa de abstracción a través de grupos de contenedores y los organiza en *pods*.</span><span class="sxs-lookup"><span data-stu-id="748ed-228">Kubernetes creates an abstraction layer over groups of containers and organizes them into *pods*.</span></span> <span data-ttu-id="748ed-229">Los pods se ejecutan en equipos de trabajo a los que se hace referencia como *nodos*.</span><span class="sxs-lookup"><span data-stu-id="748ed-229">Pods run on worker machines referred to as *nodes*.</span></span> <span data-ttu-id="748ed-230">Esta estructura organizada se conoce como *clúster*.</span><span class="sxs-lookup"><span data-stu-id="748ed-230">This organized structure is referred to as a *cluster*.</span></span> <span data-ttu-id="748ed-231">En la figura 3-3 se muestran los distintos componentes de un clúster de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-231">Figure 3-3 shows the different components of a Kubernetes cluster.</span></span>

<span data-ttu-id="748ed-232">![Componentes del clúster de Kubernetes. ](./media/kubernetes-cluster-components.png)
 **Figura 3-3**.</span><span class="sxs-lookup"><span data-stu-id="748ed-232">![Kubernetes cluster components.](./media/kubernetes-cluster-components.png)
**Figure 3-3**.</span></span> <span data-ttu-id="748ed-233">Componentes del clúster de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-233">Kubernetes cluster components.</span></span>

<span data-ttu-id="748ed-234">Escalar cargas de trabajo en contenedores es una característica clave de los orquestadores de contenedores.</span><span class="sxs-lookup"><span data-stu-id="748ed-234">Scaling containerized workloads is a key feature of container orchestrators.</span></span> <span data-ttu-id="748ed-235">AKS admite el escalado automático en dos dimensiones: instancias de contenedor y nodos de proceso.</span><span class="sxs-lookup"><span data-stu-id="748ed-235">AKS supports automatic scaling across two dimensions: Container instances and compute nodes.</span></span> <span data-ttu-id="748ed-236">Juntos proporcionan a AKS la capacidad de responder de forma rápida y eficaz a los picos de demanda y agregar recursos adicionales.</span><span class="sxs-lookup"><span data-stu-id="748ed-236">Together they give AKS the ability to quickly and efficiently respond to spikes in demand and add additional resources.</span></span> <span data-ttu-id="748ed-237">Veremos el escalado en AKS más adelante en este capítulo.</span><span class="sxs-lookup"><span data-stu-id="748ed-237">We discuss scaling in AKS later in this chapter.</span></span>

### <a name="declarative-versus-imperative"></a><span data-ttu-id="748ed-238">Declarativos e imperativos</span><span class="sxs-lookup"><span data-stu-id="748ed-238">Declarative versus imperative</span></span>

<span data-ttu-id="748ed-239">Kubernetes admite la configuración declarativa e imperativa.</span><span class="sxs-lookup"><span data-stu-id="748ed-239">Kubernetes supports both declarative and imperative configuration.</span></span> <span data-ttu-id="748ed-240">El enfoque imperativo implica la ejecución de varios comandos que indican a Kubernetes qué hacer para cada paso del proceso.</span><span class="sxs-lookup"><span data-stu-id="748ed-240">The imperative approach involves running various commands that tell Kubernetes what to do each step of the way.</span></span> <span data-ttu-id="748ed-241">Ejecute esta imagen.</span><span class="sxs-lookup"><span data-stu-id="748ed-241">Run this image.</span></span> <span data-ttu-id="748ed-242">Elimine este Pod.</span><span class="sxs-lookup"><span data-stu-id="748ed-242">Delete this pod.</span></span> <span data-ttu-id="748ed-243">Exponga este puerto.</span><span class="sxs-lookup"><span data-stu-id="748ed-243">Expose this port.</span></span> <span data-ttu-id="748ed-244">Con el enfoque declarativo, se crea un archivo de configuración, denominado manifiesto, para describir lo que se desea en lugar de lo que se debe hacer.</span><span class="sxs-lookup"><span data-stu-id="748ed-244">With the declarative approach, you create a configuration file, called a manifest, to describe what you want instead of what to do.</span></span> <span data-ttu-id="748ed-245">Kubernetes lee el manifiesto y transforma el estado final deseado en el estado final real.</span><span class="sxs-lookup"><span data-stu-id="748ed-245">Kubernetes reads the manifest and transforms your desired end state into actual end state.</span></span>

<span data-ttu-id="748ed-246">Los comandos imperativos son excelentes para el aprendizaje y la experimentación interactiva.</span><span class="sxs-lookup"><span data-stu-id="748ed-246">Imperative commands are great for learning and interactive experimentation.</span></span> <span data-ttu-id="748ed-247">Sin embargo, querrá crear mediante declaración los archivos de manifiesto de Kubernetes para adoptar una infraestructura como enfoque de código, lo que proporciona implementaciones confiables y repetibles.</span><span class="sxs-lookup"><span data-stu-id="748ed-247">However, you'll want to declaratively create Kubernetes manifest files to embrace an infrastructure as code approach, providing for reliable and repeatable deployments.</span></span> <span data-ttu-id="748ed-248">El archivo de manifiesto se convierte en un artefacto del proyecto y se usa en la canalización de CI/CD para automatizar las implementaciones de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-248">The manifest file becomes a project artifact and is used in your CI/CD pipeline for automating Kubernetes deployments.</span></span>

<span data-ttu-id="748ed-249">Si ya ha configurado el clúster mediante comandos imperativos, puede exportar un manifiesto declarativo mediante el uso de `kubectl get svc SERVICENAME -o yaml > service.yaml` .</span><span class="sxs-lookup"><span data-stu-id="748ed-249">If you've already configured your cluster using imperative commands, you can export a declarative manifest by using `kubectl get svc SERVICENAME -o yaml > service.yaml`.</span></span> <span data-ttu-id="748ed-250">Este comando genera un manifiesto similar al que se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="748ed-250">This command produces a manifest similar to one shown below:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: "2019-09-13T13:58:47Z"
  labels:
    component: apiserver
    provider: kubernetes
  name: kubernetes
  namespace: default
  resourceVersion: "153"
  selfLink: /api/v1/namespaces/default/services/kubernetes
  uid: 9b1fac62-d62e-11e9-8968-00155d38010d
spec:
  clusterIP: 10.96.0.1
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 6443
  sessionAffinity: None
  type: ClusterIP
status:
  loadBalancer: {}
```

<span data-ttu-id="748ed-251">Al usar la configuración declarativa, puede obtener una vista previa de los cambios que se realizarán antes de confirmarlos mediante el uso de `kubectl diff -f FOLDERNAME` en la carpeta donde se encuentran los archivos de configuración.</span><span class="sxs-lookup"><span data-stu-id="748ed-251">When using declarative configuration, you can preview the changes that will be made before committing them by using `kubectl diff -f FOLDERNAME` against the folder where your configuration files are located.</span></span> <span data-ttu-id="748ed-252">Una vez que esté seguro de que desea aplicar los cambios, ejecute `kubectl apply -f FOLDERNAME` .</span><span class="sxs-lookup"><span data-stu-id="748ed-252">Once you're sure you want to apply the changes, run `kubectl apply -f FOLDERNAME`.</span></span> <span data-ttu-id="748ed-253">Agregue `-R` para procesar recursivamente una jerarquía de carpetas.</span><span class="sxs-lookup"><span data-stu-id="748ed-253">Add `-R` to recursively process a folder hierarchy.</span></span>

<span data-ttu-id="748ed-254">También puede usar la configuración declarativa con otras características de Kubernetes, una de las cuales se implementa.</span><span class="sxs-lookup"><span data-stu-id="748ed-254">You can also use declarative configuration with other Kubernetes features, one of which being deployments.</span></span> <span data-ttu-id="748ed-255">Las implementaciones declarativas ayudan a administrar versiones, actualizaciones y escalado.</span><span class="sxs-lookup"><span data-stu-id="748ed-255">Declarative deployments help manage releases, updates, and scaling.</span></span> <span data-ttu-id="748ed-256">Indican al controlador de implementación de Kubernetes cómo implementar nuevos cambios, escalar horizontalmente la carga o revertir a una revisión anterior.</span><span class="sxs-lookup"><span data-stu-id="748ed-256">They instruct the Kubernetes deployment controller on how to deploy new changes, scale out load, or roll back to a previous revision.</span></span> <span data-ttu-id="748ed-257">Si un clúster es inestable, una implementación declarativa devolverá automáticamente el clúster a un estado deseado.</span><span class="sxs-lookup"><span data-stu-id="748ed-257">If a cluster is unstable, a declarative deployment will automatically return the cluster back to a desired state.</span></span> <span data-ttu-id="748ed-258">Por ejemplo, si un nodo debe bloquearse, el mecanismo de implementación volverá a implementar un reemplazo para alcanzar el estado deseado.</span><span class="sxs-lookup"><span data-stu-id="748ed-258">For example, if a node should crash, the deployment mechanism will redeploy a replacement to achieve your desired state</span></span>

<span data-ttu-id="748ed-259">El uso de la configuración declarativa permite representar la infraestructura como código que se puede proteger y controlar con versiones junto con el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="748ed-259">Using declarative configuration allows infrastructure to be represented as code that can be checked in and versioned alongside the application code.</span></span> <span data-ttu-id="748ed-260">Proporciona un control de cambios mejorado y una mejor compatibilidad con la implementación continua mediante una canalización de compilación e implementación.</span><span class="sxs-lookup"><span data-stu-id="748ed-260">It provides improved change control and better support for continuous deployment using a build and deploy pipeline.</span></span>

## <a name="what-scenarios-are-ideal-for-containers-and-orchestrators"></a><span data-ttu-id="748ed-261">¿Qué escenarios son ideales para contenedores y orquestadores?</span><span class="sxs-lookup"><span data-stu-id="748ed-261">What scenarios are ideal for containers and orchestrators?</span></span>

<span data-ttu-id="748ed-262">Los siguientes escenarios son ideales para el uso de contenedores y orquestadores.</span><span class="sxs-lookup"><span data-stu-id="748ed-262">The following scenarios are ideal for using containers and orchestrators.</span></span>

### <a name="applications-requiring-high-uptime-and-scalability"></a><span data-ttu-id="748ed-263">Aplicaciones que requieren un alto tiempo de actividad y escalabilidad</span><span class="sxs-lookup"><span data-stu-id="748ed-263">Applications requiring high uptime and scalability</span></span>

<span data-ttu-id="748ed-264">Las aplicaciones individuales que tienen requisitos elevados de tiempo y escalabilidad son ideales para las arquitecturas nativas de la nube con microservicios, contenedores y orquestadores.</span><span class="sxs-lookup"><span data-stu-id="748ed-264">Individual applications that have high uptime and scalability requirements are ideal candidates for cloud-native architectures using microservices, containers, and orchestrators.</span></span> <span data-ttu-id="748ed-265">Se pueden desarrollar en contenedores, probar en entornos con versiones e implementarse en producción sin tiempo de inactividad.</span><span class="sxs-lookup"><span data-stu-id="748ed-265">They can be developed in containers, tested across versioned environments, and deployed into production with zero downtime.</span></span> <span data-ttu-id="748ed-266">El uso de clústeres de Kubernetes garantiza que estas aplicaciones también se pueden escalar a petición y recuperarse automáticamente de los errores de nodo.</span><span class="sxs-lookup"><span data-stu-id="748ed-266">The use of Kubernetes clusters ensures such apps can also scale on demand and recover automatically from node failures.</span></span>

### <a name="large-numbers-of-applications"></a><span data-ttu-id="748ed-267">Gran cantidad de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="748ed-267">Large numbers of applications</span></span>

<span data-ttu-id="748ed-268">Las organizaciones que implementan y mantienen un gran número de aplicaciones se benefician de los contenedores y los orquestadores.</span><span class="sxs-lookup"><span data-stu-id="748ed-268">Organizations that deploy and maintain large numbers of applications benefit from containers and orchestrators.</span></span> <span data-ttu-id="748ed-269">El esfuerzo por adelantado de la configuración de entornos en contenedor y clústeres de Kubernetes es principalmente un costo fijo.</span><span class="sxs-lookup"><span data-stu-id="748ed-269">The up front effort of setting up containerized environments and Kubernetes clusters is primarily a fixed cost.</span></span> <span data-ttu-id="748ed-270">La implementación, el mantenimiento y la actualización de aplicaciones individuales tiene un costo que varía con el número de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="748ed-270">Deploying, maintaining, and updating individual applications has a cost that varies with the number of applications.</span></span> <span data-ttu-id="748ed-271">Además de un pequeño número de aplicaciones, la complejidad de mantener las aplicaciones personalizadas manualmente supera el costo de la implementación de una solución mediante contenedores y orquestadores.</span><span class="sxs-lookup"><span data-stu-id="748ed-271">Beyond a small number of applications, the complexity of maintaining custom applications manually exceeds the cost of implementing a solution using containers and orchestrators.</span></span>

## <a name="when-should-you-avoid-using-containers-and-orchestrators"></a><span data-ttu-id="748ed-272">¿Cuándo debe evitarse el uso de contenedores y orquestadores?</span><span class="sxs-lookup"><span data-stu-id="748ed-272">When should you avoid using containers and orchestrators?</span></span>

<span data-ttu-id="748ed-273">Si no puede compilar la aplicación siguiendo los principios de la aplicación de doce factores, considere la posibilidad de evitar contenedores y orquestadores.</span><span class="sxs-lookup"><span data-stu-id="748ed-273">If you're unable to build your application following the Twelve-Factor App principles, you should consider avoiding containers and orchestrators.</span></span> <span data-ttu-id="748ed-274">En estos casos, considere la posibilidad de una plataforma de hospedaje basada en VM, o posiblemente de algún sistema híbrido.</span><span class="sxs-lookup"><span data-stu-id="748ed-274">In these cases, consider a VM-based hosting platform, or possibly some hybrid system.</span></span> <span data-ttu-id="748ed-275">Con él, siempre puede rotar determinados fragmentos de funcionalidad en contenedores independientes o incluso en funciones sin servidor.</span><span class="sxs-lookup"><span data-stu-id="748ed-275">With it, you can always spin off certain pieces of functionality into separate containers or even serverless functions.</span></span>

## <a name="development-resources"></a><span data-ttu-id="748ed-276">Recursos de desarrollo</span><span class="sxs-lookup"><span data-stu-id="748ed-276">Development resources</span></span>

<span data-ttu-id="748ed-277">En esta sección se muestra una breve lista de recursos de desarrollo que pueden ayudarle a empezar a usar contenedores y orquestadores para la siguiente aplicación.</span><span class="sxs-lookup"><span data-stu-id="748ed-277">This section shows a short list of development resources that may help you get started using containers and orchestrators for your next application.</span></span> <span data-ttu-id="748ed-278">Si busca instrucciones sobre cómo diseñar su aplicación de arquitectura de microservicios nativa en la nube, lea la guía de este libro, [microservicios de .net: arquitectura para aplicaciones .net en contenedor](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span><span class="sxs-lookup"><span data-stu-id="748ed-278">If you're looking for guidance on how to design your cloud-native microservices architecture app, read this book's companion, [.NET Microservices: Architecture for Containerized .NET Applications](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span></span>

### <a name="local-kubernetes-development"></a><span data-ttu-id="748ed-279">Desarrollo de Kubernetes local</span><span class="sxs-lookup"><span data-stu-id="748ed-279">Local Kubernetes Development</span></span>

<span data-ttu-id="748ed-280">Las implementaciones de Kubernetes proporcionan un gran valor en entornos de producción, pero también se pueden ejecutar localmente en el equipo de desarrollo.</span><span class="sxs-lookup"><span data-stu-id="748ed-280">Kubernetes deployments provide great value in production environments, but can also run locally on your development machine.</span></span> <span data-ttu-id="748ed-281">Aunque puede trabajar en microservicios individuales de forma independiente, puede haber ocasiones en las que necesite ejecutar todo el sistema de forma local, tal como se ejecutará cuando se implemente en producción.</span><span class="sxs-lookup"><span data-stu-id="748ed-281">While you may work on individual microservices independently, there may be times when you'll need to run the entire system locally - just as it will run when deployed to production.</span></span> <span data-ttu-id="748ed-282">Hay varias herramientas que pueden ayudar: Minikube y Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="748ed-282">There are several tools that can help: Minikube and Docker Desktop.</span></span> <span data-ttu-id="748ed-283">Visual Studio también proporciona herramientas para el desarrollo de Docker.</span><span class="sxs-lookup"><span data-stu-id="748ed-283">Visual Studio also provides tooling for Docker development.</span></span>

### <a name="minikube"></a><span data-ttu-id="748ed-284">Minikube</span><span class="sxs-lookup"><span data-stu-id="748ed-284">Minikube</span></span>

<span data-ttu-id="748ed-285">¿Qué es Minikube?</span><span class="sxs-lookup"><span data-stu-id="748ed-285">What is Minikube?</span></span> <span data-ttu-id="748ed-286">El proyecto Minikube indica "Minikube implementa un clúster de Kubernetes local en macOS, Linux y Windows".</span><span class="sxs-lookup"><span data-stu-id="748ed-286">The Minikube project says "Minikube implements a local Kubernetes cluster on macOS, Linux, and Windows."</span></span> <span data-ttu-id="748ed-287">Sus principales objetivos son "para ser la mejor herramienta para el desarrollo de aplicaciones de Kubernetes locales y para admitir todas las características de Kubernetes que caben".</span><span class="sxs-lookup"><span data-stu-id="748ed-287">Its primary goals are "to be the best tool for local Kubernetes application development and to support all Kubernetes features that fit."</span></span> <span data-ttu-id="748ed-288">La instalación de Minikube es independiente de Docker, pero Minikube admite hipervisores diferentes de los admitidos por Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="748ed-288">Installing Minikube is separate from Docker, but Minikube supports different hypervisors than Docker Desktop supports.</span></span> <span data-ttu-id="748ed-289">Las siguientes características de Kubernetes son compatibles actualmente con Minikube:</span><span class="sxs-lookup"><span data-stu-id="748ed-289">The following Kubernetes features are currently supported by Minikube:</span></span>

- <span data-ttu-id="748ed-290">DNS</span><span class="sxs-lookup"><span data-stu-id="748ed-290">DNS</span></span>
- <span data-ttu-id="748ed-291">NodePorts</span><span class="sxs-lookup"><span data-stu-id="748ed-291">NodePorts</span></span>
- <span data-ttu-id="748ed-292">ConfigMaps y secretos</span><span class="sxs-lookup"><span data-stu-id="748ed-292">ConfigMaps and secrets</span></span>
- <span data-ttu-id="748ed-293">Paneles</span><span class="sxs-lookup"><span data-stu-id="748ed-293">Dashboards</span></span>
- <span data-ttu-id="748ed-294">Runtimes de contenedor: Docker, RKT, CRI-O y contenedores</span><span class="sxs-lookup"><span data-stu-id="748ed-294">Container runtimes: Docker, rkt, CRI-O, and containerd</span></span>
- <span data-ttu-id="748ed-295">Habilitar la interfaz de red de contenedor (CNI)</span><span class="sxs-lookup"><span data-stu-id="748ed-295">Enabling Container Network Interface (CNI)</span></span>
- <span data-ttu-id="748ed-296">Entrada</span><span class="sxs-lookup"><span data-stu-id="748ed-296">Ingress</span></span>

<span data-ttu-id="748ed-297">Después de instalar Minikube, puede empezar a usarlo rápidamente mediante la ejecución del `minikube start` comando, que descarga una imagen e inicia el clúster de Kubernetes local.</span><span class="sxs-lookup"><span data-stu-id="748ed-297">After installing Minikube, you can quickly start using it by running the `minikube start` command, which downloads an image and start the local Kubernetes cluster.</span></span> <span data-ttu-id="748ed-298">Una vez iniciado el clúster, puede interactuar con él mediante los comandos estándar de Kubernetes `kubectl` .</span><span class="sxs-lookup"><span data-stu-id="748ed-298">Once the cluster is started, you interact with it using the standard Kubernetes `kubectl` commands.</span></span>

### <a name="docker-desktop"></a><span data-ttu-id="748ed-299">Docker Desktop</span><span class="sxs-lookup"><span data-stu-id="748ed-299">Docker Desktop</span></span>

<span data-ttu-id="748ed-300">También puede trabajar con Kubernetes directamente desde Docker Desktop en Windows.</span><span class="sxs-lookup"><span data-stu-id="748ed-300">You can also work with Kubernetes directly from Docker Desktop on Windows.</span></span> <span data-ttu-id="748ed-301">Es la única opción si usa contenedores de Windows y es una opción excelente para los contenedores que no son de Windows.</span><span class="sxs-lookup"><span data-stu-id="748ed-301">It is your only option if you're using Windows Containers, and is a great choice for non-Windows containers as well.</span></span> <span data-ttu-id="748ed-302">En la figura 3-4 se muestra cómo habilitar la compatibilidad con Kubernetes local cuando se ejecuta Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="748ed-302">Figure 3-4 shows how to enable local Kubernetes support when running Docker Desktop.</span></span>

![Configuración de Kubernetes en Docker Desktop](./media/docker-desktop-kubernetes.png)

<span data-ttu-id="748ed-304">**Figura 3-4**.</span><span class="sxs-lookup"><span data-stu-id="748ed-304">**Figure 3-4**.</span></span> <span data-ttu-id="748ed-305">Configuración de Kubernetes en Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="748ed-305">Configuring Kubernetes in Docker Desktop.</span></span>

<span data-ttu-id="748ed-306">Docker Desktop es la herramienta más popular para configurar y ejecutar aplicaciones en contenedores localmente.</span><span class="sxs-lookup"><span data-stu-id="748ed-306">Docker Desktop is the most popular tool for configuring and running containerized apps locally.</span></span> <span data-ttu-id="748ed-307">Al trabajar con Docker Desktop, puede desarrollar localmente con el mismo conjunto de imágenes de contenedor de Docker que va a implementar en producción.</span><span class="sxs-lookup"><span data-stu-id="748ed-307">When you work with Docker Desktop, you can develop locally against the exact same set of Docker container images that you'll deploy to production.</span></span> <span data-ttu-id="748ed-308">Docker Desktop está diseñado para "compilar, probar y enviar" aplicaciones en contenedores localmente.</span><span class="sxs-lookup"><span data-stu-id="748ed-308">Docker Desktop is designed to "build, test, and ship" containerized apps locally.</span></span> <span data-ttu-id="748ed-309">Es compatible con contenedores de Linux y Windows.</span><span class="sxs-lookup"><span data-stu-id="748ed-309">It supports both Linux and Windows containers.</span></span> <span data-ttu-id="748ed-310">Una vez que inserte las imágenes en un registro de imágenes, como Azure Container Registry o Docker Hub, AKS puede extraerlos e implementarlos en producción.</span><span class="sxs-lookup"><span data-stu-id="748ed-310">Once you push your images to an image registry, like Azure Container Registry or Docker Hub, AKS can pull and deploy them to production.</span></span>

### <a name="visual-studio-docker-tooling"></a><span data-ttu-id="748ed-311">Herramientas de Docker de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-311">Visual Studio Docker Tooling</span></span>

<span data-ttu-id="748ed-312">Visual Studio admite el desarrollo de Docker para aplicaciones basadas en Web.</span><span class="sxs-lookup"><span data-stu-id="748ed-312">Visual Studio supports Docker development for web-based applications.</span></span> <span data-ttu-id="748ed-313">Al crear una nueva aplicación de ASP.NET Core, tiene la opción de configurarla con compatibilidad con Docker, como se muestra en la figura 3-5.</span><span class="sxs-lookup"><span data-stu-id="748ed-313">When you create a new ASP.NET Core application, you have an option to configure it with Docker support, as shown in Figure 3-5.</span></span>

![Compatibilidad de Docker con Visual Studio](./media/visual-studio-enable-docker-support.png)

<span data-ttu-id="748ed-315">**Figura 3-5**.</span><span class="sxs-lookup"><span data-stu-id="748ed-315">**Figure 3-5**.</span></span> <span data-ttu-id="748ed-316">Compatibilidad de Docker con Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-316">Visual Studio Enable Docker Support</span></span>

<span data-ttu-id="748ed-317">Cuando se selecciona esta opción, el proyecto se crea con un `Dockerfile` en su raíz, que se puede usar para compilar y hospedar la aplicación en un contenedor de Docker.</span><span class="sxs-lookup"><span data-stu-id="748ed-317">When this option is selected, the project is created with a `Dockerfile` in its root, which can be used to build and host the app in a Docker container.</span></span> <span data-ttu-id="748ed-318">En la ilustración 3 se muestra un Dockerfile de ejemplo -6. git</span><span class="sxs-lookup"><span data-stu-id="748ed-318">An example Dockerfile is shown in Figure 3-6.git</span></span>

```docker
FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim AS base
WORKDIR /app
EXPOSE 80
EXPOSE 443

FROM mcr.microsoft.com/dotnet/core/sdk:3.1-buster AS build
WORKDIR /src
COPY ["eShopWeb/eShopWeb.csproj", "eShopWeb/"]
RUN dotnet restore "eShopWeb/eShopWeb.csproj"
COPY . .
WORKDIR "/src/eShopWeb"
RUN dotnet build "eShopWeb.csproj" -c Release -o /app/build

FROM build AS publish
RUN dotnet publish "eShopWeb.csproj" -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "eShopWeb.dll"]
```

<span data-ttu-id="748ed-319">**Figura 3-6**.</span><span class="sxs-lookup"><span data-stu-id="748ed-319">**Figure 3-6**.</span></span> <span data-ttu-id="748ed-320">Dockerfile generado por Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-320">Visual Studio generated Dockerfile</span></span>

<span data-ttu-id="748ed-321">El comportamiento predeterminado cuando se ejecuta la aplicación también se configura para usar Docker.</span><span class="sxs-lookup"><span data-stu-id="748ed-321">The default behavior when the app runs is configured to use Docker as well.</span></span> <span data-ttu-id="748ed-322">En la figura 3-7 se muestran las diferentes opciones de ejecución disponibles en un nuevo proyecto de ASP.NET Core creado con compatibilidad con Docker agregada.</span><span class="sxs-lookup"><span data-stu-id="748ed-322">Figure 3-7 shows the different run options available from a new ASP.NET Core project created with Docker support added.</span></span>

![Opciones de ejecución de Docker de Visual Studio](./media/visual-studio-docker-run-options.png)

<span data-ttu-id="748ed-324">**Figura 3-7**.</span><span class="sxs-lookup"><span data-stu-id="748ed-324">**Figure 3-7**.</span></span> <span data-ttu-id="748ed-325">Opciones de ejecución de Docker de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-325">Visual Studio Docker Run Options</span></span>

<span data-ttu-id="748ed-326">Además del desarrollo local, [Azure dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) proporciona una forma cómoda para que varios desarrolladores trabajen con sus propias configuraciones de Kubernetes en Azure.</span><span class="sxs-lookup"><span data-stu-id="748ed-326">In addition to local development, [Azure Dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) provides a convenient way for multiple developers to work with their own Kubernetes configurations within Azure.</span></span> <span data-ttu-id="748ed-327">Como puede ver en la figura 3-7, también puede ejecutar la aplicación en Azure Dev Spaces.</span><span class="sxs-lookup"><span data-stu-id="748ed-327">As you can see in Figure 3-7, you can also run the application in Azure Dev Spaces.</span></span>

<span data-ttu-id="748ed-328">Además, en cualquier momento puede Agregar compatibilidad con Docker a una aplicación de ASP.NET Core existente.</span><span class="sxs-lookup"><span data-stu-id="748ed-328">Also, at any time you can add Docker support to an existing ASP.NET Core application.</span></span> <span data-ttu-id="748ed-329">En el explorador de soluciones de Visual Studio, haga clic con el botón derecho en el proyecto y **agregue**  >  **compatibilidad con Docker**, como se muestra en la figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="748ed-329">From the Visual Studio Solution Explorer, right click on the project and **Add** > **Docker Support**, as shown in Figure 3-8.</span></span>

![Compatibilidad con Docker de Visual Studio](./media/visual-studio-add-docker-support.png)

<span data-ttu-id="748ed-331">**Figura 3-8**.</span><span class="sxs-lookup"><span data-stu-id="748ed-331">**Figure 3-8**.</span></span> <span data-ttu-id="748ed-332">Incorporación de compatibilidad con Docker a Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-332">Adding Docker support to Visual Studio</span></span>

<span data-ttu-id="748ed-333">También puede Agregar compatibilidad con orquestación de contenedores, que también se muestra en la figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="748ed-333">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="748ed-334">De forma predeterminada, el orquestador usa Kubernetes y Helm.</span><span class="sxs-lookup"><span data-stu-id="748ed-334">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="748ed-335">Una vez elegido el orquestador, `azds.yaml` se agrega un archivo a la raíz del proyecto y `charts` se agrega una carpeta que contiene los gráficos de Helm usados para configurar e implementar la aplicación en Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-335">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="748ed-336">En la figura 3-9 se muestran los archivos resultantes de un nuevo proyecto.</span><span class="sxs-lookup"><span data-stu-id="748ed-336">Figure 3-9 shows the resulting files in a new project.</span></span>

<span data-ttu-id="748ed-337">También puede Agregar compatibilidad con orquestación de contenedores, que también se muestra en la figura 3-8.</span><span class="sxs-lookup"><span data-stu-id="748ed-337">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="748ed-338">De forma predeterminada, el orquestador usa Kubernetes y Helm.</span><span class="sxs-lookup"><span data-stu-id="748ed-338">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="748ed-339">Una vez elegido el orquestador, `azds.yaml` se agrega un archivo a la raíz del proyecto y `charts` se agrega una carpeta que contiene los gráficos de Helm usados para configurar e implementar la aplicación en Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="748ed-339">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="748ed-340">En la figura 3-9 se muestran los archivos resultantes de un nuevo proyecto.</span><span class="sxs-lookup"><span data-stu-id="748ed-340">Figure 3-9 shows the resulting files in a new project.</span></span>

![Compatibilidad con agregar orquestador de Visual Studio](./media/visual-studio-add-orchestrator-support.png)

<span data-ttu-id="748ed-342">**Figura 3-9**.</span><span class="sxs-lookup"><span data-stu-id="748ed-342">**Figure 3-9**.</span></span> <span data-ttu-id="748ed-343">Agregar compatibilidad con orquestación a Visual Studio</span><span class="sxs-lookup"><span data-stu-id="748ed-343">Adding orchestration support to Visual Studio</span></span>

### <a name="visual-studio-code-docker-tooling"></a><span data-ttu-id="748ed-344">Visual Studio Code las herramientas de Docker</span><span class="sxs-lookup"><span data-stu-id="748ed-344">Visual Studio Code Docker Tooling</span></span>

<span data-ttu-id="748ed-345">Hay una serie de extensiones disponibles para Visual Studio Code que admiten el desarrollo de Docker.</span><span class="sxs-lookup"><span data-stu-id="748ed-345">There are a number of extensions available for Visual Studio Code that support Docker development.</span></span>

<span data-ttu-id="748ed-346">Microsoft proporciona la [extensión de Docker para Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span><span class="sxs-lookup"><span data-stu-id="748ed-346">Microsoft provides the [Docker for Visual Studio Code extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span></span> <span data-ttu-id="748ed-347">Esta extensión simplifica el proceso de agregar compatibilidad con contenedores a aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="748ed-347">This extension simplifies the process of adding container support to applications.</span></span> <span data-ttu-id="748ed-348">Scaffolding los archivos necesarios, compila imágenes de Docker y permite depurar la aplicación dentro de un contenedor.</span><span class="sxs-lookup"><span data-stu-id="748ed-348">It scaffolds required files, builds Docker images, and enables you to debug your app inside a container.</span></span> <span data-ttu-id="748ed-349">La extensión incluye un explorador visual que facilita la toma de medidas en contenedores e imágenes como iniciar, detener, inspeccionar, quitar, etc.</span><span class="sxs-lookup"><span data-stu-id="748ed-349">The extension features a visual explorer that makes it easy to take actions on containers and images such as start, stop, inspect, remove, and more.</span></span> <span data-ttu-id="748ed-350">La extensión también admite Docker Compose que permiten administrar varios contenedores en ejecución como una sola unidad.</span><span class="sxs-lookup"><span data-stu-id="748ed-350">The extension also supports Docker Compose enabling you to manage multiple running containers as a single unit.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="748ed-351">[Anterior](scale-applications.md)
>[Siguiente](leverage-serverless-functions.md)</span><span class="sxs-lookup"><span data-stu-id="748ed-351">[Previous](scale-applications.md)
[Next](leverage-serverless-functions.md)</span></span>
