---
title: Infraestructura de comunicación de la malla de servicio
description: Más información sobre cómo las tecnologías de la malla de servicio simplifican la comunicación de microservicios nativa en la nube
author: robvet
ms.date: 05/13/2020
ms.openlocfilehash: 39dc1ded06eb0b92a2a1b40cfe981d9bd49bf381
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2020
ms.locfileid: "91165954"
---
# <a name="service-mesh-communication-infrastructure"></a><span data-ttu-id="91cc1-103">Infraestructura de comunicación de la malla de servicio</span><span class="sxs-lookup"><span data-stu-id="91cc1-103">Service Mesh communication infrastructure</span></span>

<span data-ttu-id="91cc1-104">En este capítulo, hemos explorado los desafíos de la comunicación de microservicios.</span><span class="sxs-lookup"><span data-stu-id="91cc1-104">Throughout this chapter, we've explored the challenges of microservice communication.</span></span> <span data-ttu-id="91cc1-105">Dijimos que los equipos de desarrollo deben ser sensibles a la manera en que los servicios back-end se comunican entre sí.</span><span class="sxs-lookup"><span data-stu-id="91cc1-105">We said that development teams need to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="91cc1-106">Idealmente, la menor comunicación entre servicios, mejor.</span><span class="sxs-lookup"><span data-stu-id="91cc1-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="91cc1-107">Sin embargo, la prevención no siempre es posible, ya que los servicios back-end se basan a menudo en otro para completar las operaciones.</span><span class="sxs-lookup"><span data-stu-id="91cc1-107">However, avoidance isn't always possible as back-end services often rely on one another to complete operations.</span></span>

<span data-ttu-id="91cc1-108">Hemos explorado distintos enfoques para implementar la comunicación HTTP sincrónica y la mensajería asincrónica.</span><span class="sxs-lookup"><span data-stu-id="91cc1-108">We explored different approaches for implementing synchronous HTTP communication and asynchronous messaging.</span></span> <span data-ttu-id="91cc1-109">En cada uno de los casos, el desarrollador se sobrecarga con la implementación del código de comunicación.</span><span class="sxs-lookup"><span data-stu-id="91cc1-109">In each of the cases, the developer is burdened with implementing communication code.</span></span> <span data-ttu-id="91cc1-110">El código de comunicación es complejo y requiere mucho tiempo.</span><span class="sxs-lookup"><span data-stu-id="91cc1-110">Communication code is complex and time intensive.</span></span> <span data-ttu-id="91cc1-111">Las decisiones incorrectas pueden dar lugar a problemas de rendimiento importantes.</span><span class="sxs-lookup"><span data-stu-id="91cc1-111">Incorrect decisions can lead to significant performance issues.</span></span>

<span data-ttu-id="91cc1-112">Un enfoque más moderno para centros de comunicación de microservicios en torno a una tecnología nueva y que evoluciona rápidamente titulada *malla de servicio*.</span><span class="sxs-lookup"><span data-stu-id="91cc1-112">A more modern approach to microservice communication centers around a new and rapidly evolving technology entitled *Service Mesh*.</span></span> <span data-ttu-id="91cc1-113">Una [malla de servicio](https://www.nginx.com/blog/what-is-a-service-mesh/) es una capa de infraestructura configurable con capacidades integradas para administrar la comunicación entre servicios, la resistencia y muchas cuestiones transversales.</span><span class="sxs-lookup"><span data-stu-id="91cc1-113">A [service mesh](https://www.nginx.com/blog/what-is-a-service-mesh/) is a configurable infrastructure layer with built-in capabilities to handle service-to-service communication, resiliency, and many cross-cutting concerns.</span></span> <span data-ttu-id="91cc1-114">Traslada la responsabilidad de estas cuestiones fuera de los microservicios y a la capa de malla de servicio.</span><span class="sxs-lookup"><span data-stu-id="91cc1-114">It moves the responsibility for these concerns out of the microservices and into service mesh layer.</span></span> <span data-ttu-id="91cc1-115">La comunicación se abstrae de los microservicios.</span><span class="sxs-lookup"><span data-stu-id="91cc1-115">Communication is abstracted away from your microservices.</span></span>

<span data-ttu-id="91cc1-116">Un componente clave de una malla de servicio es un proxy.</span><span class="sxs-lookup"><span data-stu-id="91cc1-116">A key component of a service mesh is a proxy.</span></span> <span data-ttu-id="91cc1-117">En una aplicación nativa en la nube, una instancia de un proxy suele colocalizarse con cada microservicio.</span><span class="sxs-lookup"><span data-stu-id="91cc1-117">In a cloud-native application, an instance of a proxy is typically colocated with each microservice.</span></span> <span data-ttu-id="91cc1-118">Mientras se ejecutan en procesos independientes, los dos están estrechamente vinculados y comparten el mismo ciclo de vida.</span><span class="sxs-lookup"><span data-stu-id="91cc1-118">While they execute in separate processes, the two are closely linked and share the same lifecycle.</span></span> <span data-ttu-id="91cc1-119">Este patrón, conocido como el [patrón sidecar](/azure/architecture/patterns/sidecar), se muestra en la figura 4-24.</span><span class="sxs-lookup"><span data-stu-id="91cc1-119">This pattern, known as the [Sidecar pattern](/azure/architecture/patterns/sidecar), and is shown in Figure 4-24.</span></span>

![Malla de servicio con un coche lateral](./media/service-mesh-with-side-car.png)

<span data-ttu-id="91cc1-121">**Figura 4-24**.</span><span class="sxs-lookup"><span data-stu-id="91cc1-121">**Figure 4-24**.</span></span> <span data-ttu-id="91cc1-122">Malla de servicio con un coche lateral</span><span class="sxs-lookup"><span data-stu-id="91cc1-122">Service mesh with a side car</span></span>

<span data-ttu-id="91cc1-123">Observe en la figura anterior cómo interceptan los mensajes un proxy que se ejecuta junto con cada microservicio.</span><span class="sxs-lookup"><span data-stu-id="91cc1-123">Note in the previous figure how messages are intercepted by a proxy that runs alongside each microservice.</span></span> <span data-ttu-id="91cc1-124">Cada proxy se puede configurar con reglas de tráfico específicas del microservicio.</span><span class="sxs-lookup"><span data-stu-id="91cc1-124">Each proxy can be configured with traffic rules specific to the microservice.</span></span> <span data-ttu-id="91cc1-125">Comprende los mensajes y los puede enrutar a través de los servicios y del mundo exterior.</span><span class="sxs-lookup"><span data-stu-id="91cc1-125">It understands messages and can route them across your services and the outside world.</span></span>

<span data-ttu-id="91cc1-126">Junto con la administración de la comunicación de servicio a servicio, la malla de servicio proporciona compatibilidad para la detección de servicios y el equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="91cc1-126">Along with managing service-to-service communication, the Service Mesh provides support for service discovery and load balancing.</span></span>

<span data-ttu-id="91cc1-127">Una vez configurada, una malla de servicio es muy funcional.</span><span class="sxs-lookup"><span data-stu-id="91cc1-127">Once configured, a service mesh is highly functional.</span></span> <span data-ttu-id="91cc1-128">La malla recupera un grupo de instancias correspondiente de un punto de conexión de detección de servicios.</span><span class="sxs-lookup"><span data-stu-id="91cc1-128">The mesh retrieves a corresponding pool of instances from a service discovery endpoint.</span></span> <span data-ttu-id="91cc1-129">Envía una solicitud a una instancia de servicio específica, registrando la latencia y el tipo de respuesta del resultado.</span><span class="sxs-lookup"><span data-stu-id="91cc1-129">It sends a request to a specific service instance, recording the latency and response type of the result.</span></span> <span data-ttu-id="91cc1-130">Elige la instancia más probable de que devuelva una respuesta rápida basada en diferentes factores, incluida la latencia observada para las solicitudes recientes.</span><span class="sxs-lookup"><span data-stu-id="91cc1-130">It chooses the instance most likely to return a fast response based on different factors, including the observed latency for recent requests.</span></span>

<span data-ttu-id="91cc1-131">Una malla de servicio administra el tráfico, la comunicación y los problemas de red en el nivel de aplicación.</span><span class="sxs-lookup"><span data-stu-id="91cc1-131">A service mesh manages traffic, communication, and networking concerns at the application level.</span></span> <span data-ttu-id="91cc1-132">Comprende mensajes y solicitudes.</span><span class="sxs-lookup"><span data-stu-id="91cc1-132">It understands messages and requests.</span></span> <span data-ttu-id="91cc1-133">Una malla de servicio normalmente se integra con un orquestador de contenedores.</span><span class="sxs-lookup"><span data-stu-id="91cc1-133">A service mesh typically integrates with a container orchestrator.</span></span> <span data-ttu-id="91cc1-134">Kubernetes admite una arquitectura extensible en la que se puede Agregar una malla de servicio.</span><span class="sxs-lookup"><span data-stu-id="91cc1-134">Kubernetes supports an extensible architecture in which a service mesh can be added.</span></span>

<span data-ttu-id="91cc1-135">En el capítulo 6, profundizaremos en las tecnologías de la malla de servicio, incluida una explicación sobre su arquitectura y las implementaciones de código abierto disponibles.</span><span class="sxs-lookup"><span data-stu-id="91cc1-135">In chapter 6, we deep-dive into Service Mesh technologies including a discussion on its architecture and available open-source implementations.</span></span>

## <a name="summary"></a><span data-ttu-id="91cc1-136">Resumen</span><span class="sxs-lookup"><span data-stu-id="91cc1-136">Summary</span></span>

<span data-ttu-id="91cc1-137">En este capítulo, analizamos patrones de comunicación nativos de la nube.</span><span class="sxs-lookup"><span data-stu-id="91cc1-137">In this chapter, we discussed cloud-native communication patterns.</span></span> <span data-ttu-id="91cc1-138">Comenzamos examinando cómo se comunican los clientes front-end con los microservicios de back-end.</span><span class="sxs-lookup"><span data-stu-id="91cc1-138">We started by examining how front-end clients communicate with back-end microservices.</span></span> <span data-ttu-id="91cc1-139">A lo largo del proceso, hablamos sobre las plataformas de puerta de enlace de API y la comunicación en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="91cc1-139">Along the way, we talked about API Gateway platforms and real-time communication.</span></span> <span data-ttu-id="91cc1-140">A continuación, veremos cómo se comunican los microservicios con otros servicios de back-end.</span><span class="sxs-lookup"><span data-stu-id="91cc1-140">We then looked at how microservices communicate with other back-end services.</span></span> <span data-ttu-id="91cc1-141">Analizamos la comunicación HTTP sincrónica y la mensajería asincrónica a través de los servicios.</span><span class="sxs-lookup"><span data-stu-id="91cc1-141">We looked at both synchronous HTTP communication and asynchronous messaging across services.</span></span> <span data-ttu-id="91cc1-142">Hemos tratado gRPC, una próxima tecnología en el mundo de la nube nativa.</span><span class="sxs-lookup"><span data-stu-id="91cc1-142">We covered gRPC, an upcoming technology in the cloud-native world.</span></span> <span data-ttu-id="91cc1-143">Por último, se presentó una nueva tecnología de la malla de servicio con un nuevo y rápido desarrollo que puede agilizar la comunicación con microservicios.</span><span class="sxs-lookup"><span data-stu-id="91cc1-143">Finally, we introduced a new and rapidly evolving technology entitled Service Mesh that can streamline microservice communication.</span></span>

<span data-ttu-id="91cc1-144">Especial énfasis en los servicios de Azure administrados que pueden ayudar a implementar la comunicación en los sistemas nativos de la nube:</span><span class="sxs-lookup"><span data-stu-id="91cc1-144">Special emphasis was on managed Azure services that can help implement communication in cloud-native systems:</span></span>

- [<span data-ttu-id="91cc1-145">Introducción a Puerta de enlace de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="91cc1-145">Azure Application Gateway</span></span>](/azure/application-gateway/overview)
- [<span data-ttu-id="91cc1-146">Azure API Management</span><span class="sxs-lookup"><span data-stu-id="91cc1-146">Azure API Management</span></span>](https://azure.microsoft.com/services/api-management/)
- [<span data-ttu-id="91cc1-147">Servicio Azure SignalR</span><span class="sxs-lookup"><span data-stu-id="91cc1-147">Azure SignalR Service</span></span>](https://azure.microsoft.com/services/signalr-service/)
- [<span data-ttu-id="91cc1-148">Colas de Azure Storage</span><span class="sxs-lookup"><span data-stu-id="91cc1-148">Azure Storage Queues</span></span>](/azure/storage/queues/storage-queues-introduction)
- [<span data-ttu-id="91cc1-149">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="91cc1-149">Azure Service Bus</span></span>](/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="91cc1-150">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="91cc1-150">Azure Event Grid</span></span>](/azure/event-grid/overview)
- [<span data-ttu-id="91cc1-151">Centro de eventos de Azure</span><span class="sxs-lookup"><span data-stu-id="91cc1-151">Azure Event Hub</span></span>](https://azure.microsoft.com/services/event-hubs/)

<span data-ttu-id="91cc1-152">A continuación, nos trasladamos a los datos distribuidos en los sistemas nativos de la nube y a las ventajas y los desafíos que presenta.</span><span class="sxs-lookup"><span data-stu-id="91cc1-152">We next move to distributed data in cloud-native systems and the benefits and challenges that it presents.</span></span>

### <a name="references"></a><span data-ttu-id="91cc1-153">Referencias</span><span class="sxs-lookup"><span data-stu-id="91cc1-153">References</span></span>

- [<span data-ttu-id="91cc1-154">Microservicios de .NET: arquitectura para aplicaciones .NET en contenedor</span><span class="sxs-lookup"><span data-stu-id="91cc1-154">.NET Microservices: Architecture for Containerized .NET applications</span></span>](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook)

- [<span data-ttu-id="91cc1-155">Diseño de la comunicación entre servicios para microservicios</span><span class="sxs-lookup"><span data-stu-id="91cc1-155">Designing Interservice Communication for Microservices</span></span>](/azure/architecture/microservices/design/interservice-communication)

- [<span data-ttu-id="91cc1-156">Azure Signalr Service, un servicio totalmente administrado para agregar funcionalidad en tiempo real</span><span class="sxs-lookup"><span data-stu-id="91cc1-156">Azure SignalR Service, a fully managed service to add real-time functionality</span></span>](https://azure.microsoft.com/blog/azure-signalr-service-a-fully-managed-service-to-add-real-time-functionality/)

- [<span data-ttu-id="91cc1-157">Controlador de entrada de puerta de enlace de API de Azure</span><span class="sxs-lookup"><span data-stu-id="91cc1-157">Azure API Gateway Ingress Controller</span></span>](https://azure.github.io/application-gateway-kubernetes-ingress/)

- [<span data-ttu-id="91cc1-158">Acerca de la entrada en Azure Kubernetes Service (AKS)</span><span class="sxs-lookup"><span data-stu-id="91cc1-158">About Ingress in Azure Kubernetes Service (AKS)</span></span>](https://vincentlauzon.com/2018/10/10/about-ingress-in-azure-kubernetes-service-aks/)

- [<span data-ttu-id="91cc1-159">Documentación de gRPC</span><span class="sxs-lookup"><span data-stu-id="91cc1-159">gRPC Documentation</span></span>](https://grpc.io/docs/guides/)

- [<span data-ttu-id="91cc1-160">gRPC para desarrolladores de WCF</span><span class="sxs-lookup"><span data-stu-id="91cc1-160">gRPC for WCF Developers</span></span>](../grpc-for-wcf-developers/index.md)

- [<span data-ttu-id="91cc1-161">Comparación de los servicios de gRPC con las API de HTTP</span><span class="sxs-lookup"><span data-stu-id="91cc1-161">Comparing gRPC Services with HTTP APIs</span></span>](/aspnet/core/grpc/comparison?view=aspnetcore-3.0)

- [<span data-ttu-id="91cc1-162">Creación de servicios de gRPC con vídeo de .NET</span><span class="sxs-lookup"><span data-stu-id="91cc1-162">Building gRPC Services with .NET video</span></span>](https://channel9.msdn.com/Shows/The-Cloud-Native-Show/Building-Microservices-with-gRPC-and-NET)

>[!div class="step-by-step"]
><span data-ttu-id="91cc1-163">[Anterior](grpc.md)
>[Siguiente](distributed-data.md)</span><span class="sxs-lookup"><span data-stu-id="91cc1-163">[Previous](grpc.md)
[Next](distributed-data.md)</span></span>
