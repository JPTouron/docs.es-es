---
title: Seguridad de LINQ to XML (C#)
description: Obtenga información sobre los problemas de seguridad asociados a LINQ to XML, incluida orientación sobre cómo minimizar el grado de exposición a esos problemas de seguridad.
ms.date: 07/20/2015
ms.assetid: ef2c0dc9-ecf9-4c17-b24e-144184ab725f
ms.openlocfilehash: dc9fd13f19dcf6d9cbbb2b0b7608009cc4da1108
ms.sourcegitcommit: 87cfeb69226fef01acb17c56c86f978f4f4a13db
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/24/2020
ms.locfileid: "87165320"
---
# <a name="linq-to-xml-security-c"></a><span data-ttu-id="dc8b6-103">Seguridad de LINQ to XML (C#)</span><span class="sxs-lookup"><span data-stu-id="dc8b6-103">LINQ to XML Security (C#)</span></span>
<span data-ttu-id="dc8b6-104">Este tema describe los problemas de seguridad asociados a LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-104">This topic describes security issues associated with LINQ to XML.</span></span> <span data-ttu-id="dc8b6-105">Además, proporciona algunas indicaciones para reducir la exposición a esos problemas de seguridad.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-105">In addition, it provides some guidance for mitigating security exposure.</span></span>  
  
## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="dc8b6-106">Información general de seguridad de LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="dc8b6-106">LINQ to XML Security Overview</span></span>  
 <span data-ttu-id="dc8b6-107">LINQ to XML se ha diseñado más para la comodidad de programación que para aplicaciones de servidor con estrictos requisitos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-107">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="dc8b6-108">La mayoría de escenarios XML consisten en el procesamiento de documentos XML de confianza en lugar del procesamiento de documentos XML que no son de confianza que se suben a un servidor.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-108">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="dc8b6-109">LINQ to XML está optimizado para esos escenarios.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-109">LINQ to XML is optimized for these scenarios.</span></span>  
  
 <span data-ttu-id="dc8b6-110">Si debe procesar datos que no son de confianza de orígenes desconocidos, Microsoft recomienda usar una instancia de la clase <xref:System.Xml.XmlReader> que se ha configurado para filtrar ataques de denegación de servicio (DoS) XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-110">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>  
  
 <span data-ttu-id="dc8b6-111">Si ha configurado <xref:System.Xml.XmlReader> para mitigar los ataques de denegación de servicio, puede usar ese lector para rellenar un árbol de LINQ to XML y seguir sacando provecho de las mejoras de productividad del programador de LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-111">If you have configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="dc8b6-112">Muchas técnicas de mitigación del riesgo implican crear lectores configurados para mitigar el problema de seguridad y crear a continuación instancias de un árbol XML mediante el lector configurado.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-112">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>  
  
 <span data-ttu-id="dc8b6-113">XML es intrínsecamente vulnerable a ataques de denegación de servicio porque los documentos no tienen límite en el tamaño, la profundidad, el tamaño de nombre de elemento, etc.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-113">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="dc8b6-114">Independientemente del componente que use para procesar XML, siempre debería estar preparado para reciclar el dominio de la aplicación si utiliza demasiados recursos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-114">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>  
  
## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="dc8b6-115">Reducción del riesgo de ataques de XML, XSD, XPath y XSLT</span><span class="sxs-lookup"><span data-stu-id="dc8b6-115">Mitigation of XML, XSD, XPath, and XSLT Attacks</span></span>  
 <span data-ttu-id="dc8b6-116">LINQ to XML se compila sobre <xref:System.Xml.XmlReader> y <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-116">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="dc8b6-117">LINQ to XML admite XSD y XPath mediante métodos de extensión en los espacios de nombres <xref:System.Xml.Schema?displayProperty=nameWithType> y <xref:System.Xml.XPath?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-117">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="dc8b6-118">El uso de las clases <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator> y <xref:System.Xml.XmlWriter> combinado con LINQ to XML, puede invocar XSLT para transformar árboles XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-118">Using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>  
  
 <span data-ttu-id="dc8b6-119">Cuando trabaja en un entorno menos seguro, existen varios problemas de seguridad asociados con XML y con el uso de clases en <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType> y <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-119">If you are operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="dc8b6-120">Algunos de los problemas son:</span><span class="sxs-lookup"><span data-stu-id="dc8b6-120">These issues include, but are not limited to, the following:</span></span>  
  
- <span data-ttu-id="dc8b6-121">XSD, XPath y XSLT son lenguajes basados en cadenas en los que puede especificar operaciones que consumen mucho tiempo o memoria.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-121">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="dc8b6-122">Es responsabilidad de los programadores que toman cadenas XSD, XPath o XSLT de orígenes que no son de confianza validar que dichas cadenas no son malintencionadas o supervisar y reducir la posibilidad de que la evaluación de esas cadenas provoque un consumo excesivo de recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-122">It is the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings are not malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>  
  
- <span data-ttu-id="dc8b6-123">Los esquemas XSD (incluyendo los esquemas alineadas) son intrínsecamente vulnerables a ataques de denegación de servicio. No se deben aceptar esquemas de orígenes que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-123">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you should not accept schemas from untrusted sources.</span></span>  
  
- <span data-ttu-id="dc8b6-124">XSD y XSLT pueden incluir referencias a otros archivos y esas referencias pueden producir ataques entre dominios y zonas.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-124">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="dc8b6-125">Las entidades externas de DTD pueden tener como resultado ataques entre dominios y zonas.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-125">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>  
  
- <span data-ttu-id="dc8b6-126">Las DTD son vulnerables a ataques de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-126">DTDs are vulnerable to denial of service attacks.</span></span>  
  
- <span data-ttu-id="dc8b6-127">Los documentos XML con una profundidad excepcional pueden plantear problemas de denegación de servicio. Es posible que desee limitar la profundidad de documentos XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-127">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>  
  
- <span data-ttu-id="dc8b6-128">No se admiten componentes como, por ejemplo, objetos <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager> y <xref:System.Xml.XmlResolver>, de ensamblados que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-128">Do not accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>  
  
- <span data-ttu-id="dc8b6-129">Lectura de datos en fragmentos para mitigar ataques de documentos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-129">Read data in chunks to mitigate large document attacks.</span></span>  
  
- <span data-ttu-id="dc8b6-130">Los bloques de scripts de las hojas de estilos XSLT pueden dar lugar a varios ataques.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-130">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>  
  
- <span data-ttu-id="dc8b6-131">Validar cuidadosamente antes de crear expresiones XPath dinámicas.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-131">Validate carefully before constructing dynamic XPath expressions.</span></span>  
  
## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="dc8b6-132">Problemas de seguridad de LINQ to XML</span><span class="sxs-lookup"><span data-stu-id="dc8b6-132">LINQ to XML Security Issues</span></span>  
 <span data-ttu-id="dc8b6-133">Los problemas de seguridad de este tema no se presentan en ningún orden específico.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-133">The security issues in this topic are not presented in any particular order.</span></span> <span data-ttu-id="dc8b6-134">Todos los problemas son importantes y deben solucionarse de forma adecuada.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-134">All issues are important and should be addressed as appropriate.</span></span>  
  
 <span data-ttu-id="dc8b6-135">Un ataque de elevación de privilegios que tiene éxito proporciona a un ensamblado malintencionado más control sobre su entorno.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-135">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="dc8b6-136">Un ataque de elevación de privilegios que tiene éxito puede tener como resultado una revelación de datos, una denegación de servicio, etc.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-136">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>  
  
 <span data-ttu-id="dc8b6-137">Las aplicaciones no deben revelar datos a los usuarios que no están autorizados a verlos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-137">Applications should not disclose data to users who are not authorized to see that data.</span></span>  
  
 <span data-ttu-id="dc8b6-138">Los ataques de denegación de servicio hacen que el analizador XML o LINQ to XML consuman excesiva memoria o tiempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-138">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="dc8b6-139">Los ataques de denegación de servicio se consideran menos graves que los ataques de elevación de privilegios o los ataques de revelación de datos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-139">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="dc8b6-140">No obstante, son importantes en un escenario en el que un servidor debe procesar documentos XML de orígenes que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-140">However, they are important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>  
  
### <a name="exceptions-and-error-messages-might-reveal-data"></a><span data-ttu-id="dc8b6-141">Las excepciones y los mensajes de error pueden revelar datos</span><span class="sxs-lookup"><span data-stu-id="dc8b6-141">Exceptions and Error Messages Might Reveal Data</span></span>  
 <span data-ttu-id="dc8b6-142">La descripción de un error puede revelar datos como la transformación de datos, los nombres de archivos o los detalles de implementación.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-142">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="dc8b6-143">Los mensajes de error no se deben mostrar a los autores de la llamada que no son de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-143">Error messages should not be exposed to callers that are not trusted.</span></span> <span data-ttu-id="dc8b6-144">Debe detectar todos los errores e notificarlos con sus propios mensajes de error.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-144">You should catch all errors and report errors with your own custom error messages.</span></span>  
  
### <a name="do-not-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="dc8b6-145">No llamar a CodeAccessPermissions.Assert en un controlador de eventos</span><span class="sxs-lookup"><span data-stu-id="dc8b6-145">Do Not Call CodeAccessPermissions.Assert in an Event Handler</span></span>  
 <span data-ttu-id="dc8b6-146">Un ensamblado puede tener más o menos permisos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-146">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="dc8b6-147">Un ensamblado con más permisos cuenta con un mayor control sobre el equipo y sus entornos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-147">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>  
  
 <span data-ttu-id="dc8b6-148">Si el código de un ensamblado con más permisos llama a <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> en un controlador de eventos y, a continuación, el árbol XML se pasa a un ensamblado malintencionado que tiene permisos restringidos, el ensamblado malintencionado puede hacer que se genere un evento.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-148">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="dc8b6-149">Como el evento ejecuta código que está en el ensamblado con más permisos, el ensamblado malintencionado funcionará con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-149">Because the event runs code that is in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>  
  
 <span data-ttu-id="dc8b6-150">Microsoft recomienda no llamar nunca a <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> en un controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-150">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>  
  
### <a name="dtds-are-not-secure"></a><span data-ttu-id="dc8b6-151">Las DTD no son seguras</span><span class="sxs-lookup"><span data-stu-id="dc8b6-151">DTDs are Not Secure</span></span>  
 <span data-ttu-id="dc8b6-152">Las entidades de DTD son inseguras intrínsecamente.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-152">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="dc8b6-153">Un documento XML malintencionado que contiene DTD puede hacer que el analizador use toda la memoria y todo el tiempo de CPU, lo que provocaría un ataque de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-153">It is possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="dc8b6-154">Por lo tanto, en LINQ to XML, el procesamiento de DTD está desactivado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-154">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="dc8b6-155">No debe aceptar DTD de orígenes que no sean de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-155">You should not accept DTDs from untrusted sources.</span></span>  
  
 <span data-ttu-id="dc8b6-156">Un ejemplo de DTD aceptadas de orígenes que no son de confianza es una aplicación web que permite a los usuarios cargar un archivo XML que hace referencia a una DTD y un archivo de DTD.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-156">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="dc8b6-157">Al validar el archivo, una DTD malintencionada puede ejecutar un ataque de denegación de servicio en el servidor.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-157">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="dc8b6-158">Otro ejemplo de DTD aceptadas de orígenes que no son de confianza es hacer referencia a una DTD en un recurso compartido de red que también permite el acceso FTP anónimo.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-158">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>  
  
### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="dc8b6-159">Evitar la asignación excesiva de búfer</span><span class="sxs-lookup"><span data-stu-id="dc8b6-159">Avoid Excessive Buffer Allocation</span></span>  
 <span data-ttu-id="dc8b6-160">Los desarrolladores de aplicaciones deben tener en cuenta que orígenes de datos extremadamente grandes pueden provocar un agotamiento de los recursos y ataques de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-160">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>  
  
 <span data-ttu-id="dc8b6-161">Si un usuario malintencionado envía o carga un documento XML de gran tamaño, puede hacer que LINQ to XML consuma demasiados recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-161">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="dc8b6-162">Esto puede representar un ataque de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-162">This can constitute a denial of service attack.</span></span> <span data-ttu-id="dc8b6-163">Para evitarlo, puede ajustar la propiedad <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> y crear un lector con un límite en el tamaño del documento que puede cargar.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-163">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the size of document that it can load.</span></span> <span data-ttu-id="dc8b6-164">El lector se usa a continuación para crear el árbol XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-164">You then use the reader to create the XML tree.</span></span>  
  
 <span data-ttu-id="dc8b6-165">Por ejemplo, si sabe que el tamaño máximo previsto de los documentos XML que provienen de un origen que no es de confianza va a ser inferior a 50 KB, establezca <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> en 100.000.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-165">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="dc8b6-166">Esto no será un inconveniente para el procesamiento de sus documentos XML y a la vez contrarrestará amenazas de denegación de servicio en las que se podrían cargar documentos que consumirían grandes cantidades de memoria.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-166">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>  
  
### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="dc8b6-167">Evitar la expansión excesiva de entidades</span><span class="sxs-lookup"><span data-stu-id="dc8b6-167">Avoid Excess Entity Expansion</span></span>  
 <span data-ttu-id="dc8b6-168">Uno de los ataques de denegación de servicio conocidos cuando se usa una DTD es un documento que provoca una expansión excesiva de entidades.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-168">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="dc8b6-169">Para evitar que esto se produzca, puede establecer la propiedad <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> y crear un lector que tenga un límite en el número de caracteres producidos por la expansión de la entidad.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-169">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="dc8b6-170">El lector se usa a continuación para crear el árbol XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-170">You then use the reader to create the XML tree.</span></span>  
  
### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="dc8b6-171">Limitar la profundidad de la jerarquía XML</span><span class="sxs-lookup"><span data-stu-id="dc8b6-171">Limit the Depth of the XML Hierarchy</span></span>  
 <span data-ttu-id="dc8b6-172">Un posible ataque de denegación de servicio consiste en enviar un documento que tiene una profundidad de jerarquía excesiva.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-172">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="dc8b6-173">Para evitarlo, puede encapsular <xref:System.Xml.XmlReader> en su propia clase que cuenta la profundidad de los elementos.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-173">To prevent this, you can wrap a <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="dc8b6-174">Si la profundidad supera un nivel razonable predeterminado, puede finalizar el procesamiento del documento malintencionado.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-174">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>  
  
### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="dc8b6-175">Protegerse frente a implementaciones de XmlReader o XmlWriter que no son de confianza</span><span class="sxs-lookup"><span data-stu-id="dc8b6-175">Protect Against Untrusted XmlReader or XmlWriter Implementations</span></span>  
 <span data-ttu-id="dc8b6-176">Los administradores deben comprobar que las implementaciones de <xref:System.Xml.XmlReader> o <xref:System.Xml.XmlWriter> proporcionadas de forma externa tienen nombres seguros y se han registrado en la configuración del equipo.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-176">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="dc8b6-177">Esto evita que se cargue un código malintencionado que simula ser un lector o escritor.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-177">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>  
  
### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="dc8b6-178">Liberar periódicamente objetos que hacen referencia a XName</span><span class="sxs-lookup"><span data-stu-id="dc8b6-178">Periodically Free Objects that Reference XName</span></span>  
 <span data-ttu-id="dc8b6-179">Para protegerse frente a cierto tipo de ataques, los programadores de aplicaciones deben liberar todos los objetos que hacen referencia a un objeto <xref:System.Xml.Linq.XName> en el dominio de la aplicación de forma periódica.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-179">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>  
  
### <a name="protect-against-random-xml-names"></a><span data-ttu-id="dc8b6-180">Protegerse frente a nombres XML aleatorios</span><span class="sxs-lookup"><span data-stu-id="dc8b6-180">Protect Against Random XML Names</span></span>  
 <span data-ttu-id="dc8b6-181">Las aplicaciones que toman datos de orígenes que no son de confianza deben plantearse el uso de <xref:System.Xml.XmlReader>, que se incluye en el código personalizado para inspeccionar la posibilidad de nombres y espacios de nombres XML aleatorios.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-181">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that is wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="dc8b6-182">Si se detectan nombres y espacios de nombres XML aleatorios, la aplicación puede finalizar el procesamiento del documento malintencionado.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-182">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>  
  
 <span data-ttu-id="dc8b6-183">Es posible que desee limitar los nombres incluidos en cualquier espacio de nombres dado (incluyendo nombres que no están en ningún espacio de nombres) a una cantidad razonable.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-183">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>  
  
### <a name="annotations-are-accessible-by-software-components-that-share-a-linq-to-xml-tree"></a><span data-ttu-id="dc8b6-184">Los componentes de software que comparten un árbol de LINQ to XML pueden tener acceso a las anotaciones</span><span class="sxs-lookup"><span data-stu-id="dc8b6-184">Annotations Are Accessible by Software Components that Share a LINQ to XML Tree</span></span>  
 <span data-ttu-id="dc8b6-185">LINQ to XML se puede usar para compilar canalizaciones de procesamiento en las que diferentes componentes de la aplicación cargan, validan, consultan, transforman, actualizan y guardan datos XML que se pasan entre componentes como árboles XML.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-185">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that is passed between components as XML trees.</span></span> <span data-ttu-id="dc8b6-186">Esto puede ayudarle a optimizar el rendimiento, porque la sobrecarga de carga y serialización de objetos a texto XML se realiza únicamente en los extremos de la canalización.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-186">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="dc8b6-187">Sin embargo, los desarrolladores deben tener en cuenta que otros componentes puedes tener acceso a todas las anotaciones y controladores de eventos creados por un componente.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-187">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="dc8b6-188">Esto puede crear varias vulnerabilidades cuando los componentes tienen diferentes niveles de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-188">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="dc8b6-189">Para compilar canalizaciones seguras en componentes con un nivel de confianza inferior, debe serializar los objetos LINQ to XML a texto XML antes de pasar los datos a un componente que no es de confianza.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-189">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>  
  
 <span data-ttu-id="dc8b6-190">Common Language Runtime (CLR) proporciona cierta seguridad.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-190">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="dc8b6-191">Por ejemplo, un componente que no incluye una clase privada no puede tener acceso a anotaciones con claves creadas por esa clase.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-191">For example, a component that does not include a private class cannot access annotations keyed by that class.</span></span> <span data-ttu-id="dc8b6-192">No obstante, las anotaciones pueden ser eliminadas por componentes que no las leen.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-192">However, annotations can be deleted by components that cannot read them.</span></span> <span data-ttu-id="dc8b6-193">Esto se podría usar como ataque de manipulación.</span><span class="sxs-lookup"><span data-stu-id="dc8b6-193">This could be used as a tampering attack.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dc8b6-194">Consulte también</span><span class="sxs-lookup"><span data-stu-id="dc8b6-194">See also</span></span>

- [<span data-ttu-id="dc8b6-195">Guía de programación (LINQ to XML) (C#)</span><span class="sxs-lookup"><span data-stu-id="dc8b6-195">Programming Guide (LINQ to XML) (C#)</span></span>](linq-to-xml-overview.md)
