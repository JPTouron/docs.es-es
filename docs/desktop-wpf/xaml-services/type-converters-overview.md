---
title: Información general sobre los convertidores de tipos para XAML
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converters
- XAML [XAML Services], TypeConverter
- type conversion for XAML [XAML Services]
ms.assetid: 51a65860-efcb-4fe0-95a0-1c679cde66b7
ms.openlocfilehash: 6e78210178fda65bb3baad0d24eb3a20cd6f2a3e
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "90540118"
---
# <a name="overview-of-type-converters-for-xaml"></a><span data-ttu-id="20eac-102">Información general sobre los convertidores de tipos para XAML</span><span class="sxs-lookup"><span data-stu-id="20eac-102">Overview of type converters for XAML</span></span>

<span data-ttu-id="20eac-103">Los convertidores de tipos proporcionan la lógica de un sistema de escritura de objetos que convierte una cadena de marcado XAML en objetos concretos en un gráfico de objetos.</span><span class="sxs-lookup"><span data-stu-id="20eac-103">Type converters supply logic for an object writer that converts from a string in XAML markup into particular objects in an object graph.</span></span> <span data-ttu-id="20eac-104">En los servicios XAML de .NET, el convertidor de tipos debe ser una clase que deriva de <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="20eac-104">In .NET XAML Services, the type converter must be a class that derives from <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="20eac-105">Algunos convertidores también admiten la ruta de acceso de guardado de XAML y se pueden usar para serializar un objeto en forma de cadena en el marcado de serialización.</span><span class="sxs-lookup"><span data-stu-id="20eac-105">Some converters also support the XAML save path and can be used to serialize an object into a string form in serialization markup.</span></span> <span data-ttu-id="20eac-106">En este tema se describe cómo y cuándo se invocan convertidores de tipos en XAML y se incluyen consejos de implementación para los reemplazos de método de <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="20eac-106">This topic describes how and when type converters in XAML are invoked, and provides implementation advice for the method overrides of <xref:System.ComponentModel.TypeConverter>.</span></span>

## <a name="type-conversion-concepts"></a><span data-ttu-id="20eac-107">Conceptos de la conversión de tipos</span><span class="sxs-lookup"><span data-stu-id="20eac-107">Type Conversion Concepts</span></span>

<span data-ttu-id="20eac-108">En las siguientes secciones se explican los conceptos básicos sobre cómo usa XAML las cadenas y cómo los escritores de objetos en los servicios XAML de .NET usan convertidores de tipos para procesar algunos de los valores de cadena que se encuentran en un origen XAML.</span><span class="sxs-lookup"><span data-stu-id="20eac-108">The following sections explain basic concepts about how XAML uses strings, and how object writers in .NET XAML Services use type converters to process some of the string values that are encountered in a XAML source.</span></span>

### <a name="xaml-and-string-values"></a><span data-ttu-id="20eac-109">Valores de cadena y XAML</span><span class="sxs-lookup"><span data-stu-id="20eac-109">XAML and String Values</span></span>

<span data-ttu-id="20eac-110">Cuando se establece un valor de atributo en un archivo XAML, el tipo inicial de ese valor es una cadena en sentido general y un valor de atributo de cadena desde el punto de vista de XML.</span><span class="sxs-lookup"><span data-stu-id="20eac-110">When you set an attribute value in a XAML file, the initial type of that value is a string in a general sense, and a string attribute value in an XML sense.</span></span> <span data-ttu-id="20eac-111">Incluso otros primitivos, como <xref:System.Double> son cadenas inicialmente para un procesador XAML.</span><span class="sxs-lookup"><span data-stu-id="20eac-111">Even other primitives such as <xref:System.Double> are initially strings to a XAML processor.</span></span>

<span data-ttu-id="20eac-112">En la mayoría de los casos, un procesador XAML necesita dos fragmentos de información para procesar un valor de atributo.</span><span class="sxs-lookup"><span data-stu-id="20eac-112">In most cases, a XAML processor needs two pieces of information to process an attribute value.</span></span> <span data-ttu-id="20eac-113">El primer fragmento de información es el tipo de valor de la propiedad que se va a establecer.</span><span class="sxs-lookup"><span data-stu-id="20eac-113">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="20eac-114">Cualquier cadena que defina un valor de atributo y que se procese en XAML se tiene que convertir o resolver en última instancia en un valor de ese tipo.</span><span class="sxs-lookup"><span data-stu-id="20eac-114">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="20eac-115">Si el valor es un primitivo que el analizador XAML entiende (por ejemplo, un valor numérico), se tratará de convertir la cadena directamente.</span><span class="sxs-lookup"><span data-stu-id="20eac-115">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="20eac-116">Si el valor del atributo hace referencia a una enumeración, se buscará un nombre en la cadena proporcionada que coincida con una constante con nombre en esa enumeración.</span><span class="sxs-lookup"><span data-stu-id="20eac-116">If the value for the attribute references an enumeration, the supplied string is checked for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="20eac-117">Si el valor no es un primitivo comprensible para el analizador o un nombre de constante de una enumeración, el tipo aplicable debe ser capaz de proporcionar un valor o una referencia que se base en una cadena convertida.</span><span class="sxs-lookup"><span data-stu-id="20eac-117">If the value is not a parser-understood primitive or a constant name from an enumeration, the applicable type must be able to provide a value or reference that is based on a converted string.</span></span>

> [!NOTE]
> <span data-ttu-id="20eac-118">Las directivas de lenguaje XAML no usan convertidores de tipos.</span><span class="sxs-lookup"><span data-stu-id="20eac-118">XAML language directives do not use type converters.</span></span>

### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="20eac-119">Convertidores de tipos y extensiones de marcado</span><span class="sxs-lookup"><span data-stu-id="20eac-119">Type Converters and Markup Extensions</span></span>

<span data-ttu-id="20eac-120">Los usos de extensiones de marcado han de controlarse con un procesador XAML antes de buscar tipos de propiedades y otras consideraciones.</span><span class="sxs-lookup"><span data-stu-id="20eac-120">Markup extension usages must be handled by a XAML processor before it checks for property type and other considerations.</span></span> <span data-ttu-id="20eac-121">Por ejemplo, si una propiedad que se establece como un atributo tiene normalmente una conversión de tipos, pero en un caso determinado se establece por medio de un uso de extensión de marcado, el comportamiento de la extensión de marcado se procesa primero.</span><span class="sxs-lookup"><span data-stu-id="20eac-121">For example, if a property being set as an attribute normally has a type conversion, but in a particular case is set by a markup extension usage, then the markup extension behavior processes first.</span></span> <span data-ttu-id="20eac-122">Una situación común donde una extensión de marcado es necesaria es a la hora de hacer referencia a un objeto que ya existe.</span><span class="sxs-lookup"><span data-stu-id="20eac-122">One common situation where a markup extension is necessary is to make a reference to an object that already exists.</span></span> <span data-ttu-id="20eac-123">En este escenario, un convertidor de tipos sin estado solamente puede generar una nueva instancia, algo que puede no ser deseable.</span><span class="sxs-lookup"><span data-stu-id="20eac-123">For this scenario, a stateless type converter can only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="20eac-124">Para más información sobre las extensiones de marcado, vea [Markup Extensions for XAML Overview](markup-extensions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="20eac-124">For more information about markup extensions, see [Markup Extensions for XAML Overview](markup-extensions-overview.md).</span></span>

### <a name="native-type-converters"></a><span data-ttu-id="20eac-125">Convertidores de tipos nativos</span><span class="sxs-lookup"><span data-stu-id="20eac-125">Native Type Converters</span></span>

<span data-ttu-id="20eac-126">En las implementaciones de servicios de Windows Presentation Foundation (WPF) y .NET XAML, existen ciertos tipos CLR que tienen un control nativo de la conversión de tipos.</span><span class="sxs-lookup"><span data-stu-id="20eac-126">In the Windows Presentation Foundation (WPF) and .NET XAML services implementations, there are certain CLR types that have native type conversion handling.</span></span> <span data-ttu-id="20eac-127">Sin embargo, esos tipos CLR no se consideran convencionalmente como primitivos.</span><span class="sxs-lookup"><span data-stu-id="20eac-127">However, those CLR types are not conventionally thought of as primitives.</span></span> <span data-ttu-id="20eac-128">Un ejemplo de este tipo es <xref:System.DateTime>.</span><span class="sxs-lookup"><span data-stu-id="20eac-128">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="20eac-129">Una razón para esto es el modo en que la arquitectura de .NET Framework funciona: el tipo <xref:System.DateTime> se define en mscorlib, la biblioteca más básica de .NET.</span><span class="sxs-lookup"><span data-stu-id="20eac-129">One reason for this is how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="20eac-130"><xref:System.DateTime> no se puede atribuir con un atributo que proceda de otro ensamblado que introduzca una dependencia (proviene <xref:System.ComponentModel.TypeConverterAttribute> del sistema).</span><span class="sxs-lookup"><span data-stu-id="20eac-130"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System).</span></span> <span data-ttu-id="20eac-131">Por lo tanto, no se admite el mecanismo de detección de convertidores de tipos habitual mediante atribución.</span><span class="sxs-lookup"><span data-stu-id="20eac-131">Therefore, the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="20eac-132">En su lugar, el analizador XAML tiene una lista de tipos que necesitan procesamiento nativo y los procesa de manera similar a como lo hacen los primitivos genuinos.</span><span class="sxs-lookup"><span data-stu-id="20eac-132">Instead, the XAML parser has a list of types that need native processing, and it processes these types similar to how the true primitives are processed.</span></span> <span data-ttu-id="20eac-133">En el caso de <xref:System.DateTime>, este procesamiento conlleva llamar a <xref:System.DateTime.Parse%2A>.</span><span class="sxs-lookup"><span data-stu-id="20eac-133">In the case of <xref:System.DateTime>, this processing involves a call to <xref:System.DateTime.Parse%2A>.</span></span>

## <a name="implementing-a-type-converter"></a><span data-ttu-id="20eac-134">Implementación de un convertidor de tipos</span><span class="sxs-lookup"><span data-stu-id="20eac-134">Implementing a Type Converter</span></span>

<span data-ttu-id="20eac-135">En las siguientes secciones se describe la API de la clase <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="20eac-135">The following sections discuss the API of the <xref:System.ComponentModel.TypeConverter> class.</span></span>

### <a name="typeconverter"></a><span data-ttu-id="20eac-136">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="20eac-136">TypeConverter</span></span>

<span data-ttu-id="20eac-137">En los servicios XAML de .NET, todos los convertidores de tipos que se usan para los propósitos de XAML son clases que derivan de la clase base <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="20eac-137">Under .NET XAML Services, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="20eac-138">La clase <xref:System.ComponentModel.TypeConverter> ya estaba en versiones de .NET Framework previas a la existencia de XAML; uno de los escenarios de <xref:System.ComponentModel.TypeConverter> originales era proporcionar la conversión de cadenas a los editores de propiedades de los diseñadores visuales.</span><span class="sxs-lookup"><span data-stu-id="20eac-138">The <xref:System.ComponentModel.TypeConverter> class existed in versions of the .NET Framework before XAML existed; one of the original <xref:System.ComponentModel.TypeConverter> scenarios was to provide string conversion for property editors in visual designers.</span></span>

<span data-ttu-id="20eac-139">Para XAML, el rol de <xref:System.ComponentModel.TypeConverter> se amplía.</span><span class="sxs-lookup"><span data-stu-id="20eac-139">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded.</span></span> <span data-ttu-id="20eac-140">Para los propósitos de XAML, <xref:System.ComponentModel.TypeConverter> es la clase base que proporciona compatibilidad con determinadas conversiones a cadena y desde cadena.</span><span class="sxs-lookup"><span data-stu-id="20eac-140">For XAML purposes, <xref:System.ComponentModel.TypeConverter> is the base class for providing support for certain to-string and from-string conversions.</span></span> <span data-ttu-id="20eac-141">La conversión desde cadena permite analizar un valor de atributo de cadena desde XAML.</span><span class="sxs-lookup"><span data-stu-id="20eac-141">From-string enables parsing a string attribute value from XAML.</span></span> <span data-ttu-id="20eac-142">En cuanto a la conversión a cadena, puede permitir el procesamiento de un valor de tiempo de ejecución de una propiedad de objeto determinado de vuelta a un atributo en XAML para su serialización.</span><span class="sxs-lookup"><span data-stu-id="20eac-142">To-string might enable processing a run-time value of a particular object property back into an attribute in XAML for serialization.</span></span>

<span data-ttu-id="20eac-143"><xref:System.ComponentModel.TypeConverter> define a cuatro miembros que son importantes para convertir a cadena y desde cadena con fines de procesamiento de XAML:</span><span class="sxs-lookup"><span data-stu-id="20eac-143"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to-string and from-string for XAML processing purposes:</span></span>

- <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>

<span data-ttu-id="20eac-144">De estos miembros, el método más importante es <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, que convierte la cadena de entrada en el tipo de objeto necesario.</span><span class="sxs-lookup"><span data-stu-id="20eac-144">Of these members, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, which converts the input string to the required object type.</span></span> <span data-ttu-id="20eac-145">El método <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> se puede implementar para convertir una gama más amplia de tipos en el tipo de destino previsto del convertidor.</span><span class="sxs-lookup"><span data-stu-id="20eac-145">The <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method can be implemented to convert a wider range of types into the intended destination type of the converter.</span></span> <span data-ttu-id="20eac-146">Por lo tanto, se puede utilizar con fines que van más allá de XAML, como admitir conversiones en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="20eac-146">Therefore, it can serve purposes that extend beyond XAML, such as supporting run-time conversions.</span></span> <span data-ttu-id="20eac-147">Con todo, en el uso de XAML, solamente es importante la ruta de código que puede procesar una entrada <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="20eac-147">However, for XAML use, only the code path that can process a <xref:System.String> input is important.</span></span>

<span data-ttu-id="20eac-148">El segundo método más importante es <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> .</span><span class="sxs-lookup"><span data-stu-id="20eac-148">The second-most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="20eac-149">Si una aplicación se convierte en una representación de marcado (por ejemplo, si se guarda en XAML como un archivo), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> está implicado en el escenario más grande de un escritor de texto XAML para generar una representación de marcado.</span><span class="sxs-lookup"><span data-stu-id="20eac-149">If an application is converted to a markup representation (for example, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is involved in the larger scenario of a XAML text writer to produce a markup representation.</span></span> <span data-ttu-id="20eac-150">En tal caso, la ruta de acceso de código importante para XAML es cuando el autor de la llamada pasa un `destinationType` de <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="20eac-150">In this case, the important code path for XAML is when the caller passes a `destinationType` of <xref:System.String>.</span></span>

<span data-ttu-id="20eac-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> y <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> son métodos de compatibilidad que se usan cuando un servicio consulta las capacidades de la implementación de <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="20eac-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="20eac-152">Estos métodos se tienen que implementar para obtener `true` en los casos específicos de tipo que los métodos de conversión equivalentes de su convertidor admiten.</span><span class="sxs-lookup"><span data-stu-id="20eac-152">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="20eac-153">Para los propósitos de XAML, esto suele traducirse en el tipo <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="20eac-153">For XAML purposes, this generally means the <xref:System.String> type.</span></span>

### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="20eac-154">Información de referencia cultural y convertidores de tipos para XAML</span><span class="sxs-lookup"><span data-stu-id="20eac-154">Culture Information and Type Converters for XAML</span></span>

<span data-ttu-id="20eac-155">Cada implementación de <xref:System.ComponentModel.TypeConverter> puede interpretar de manera única lo que es una cadena válida para una conversión y, también, puede usar o ignorar la descripción del tipo pasado como parámetros.</span><span class="sxs-lookup"><span data-stu-id="20eac-155">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what is a valid string for a conversion, and it can also use or ignore the type description that is passed as parameters.</span></span> <span data-ttu-id="20eac-156">Una consideración importante para la conversión de tipos de referencia cultural y XAML es la siguiente: aunque XAML admite el uso de cadenas localizables como valores de atributo, estas cadenas localizables no se pueden usar como entrada del convertidor de tipos con determinados requisitos de referencia cultural.</span><span class="sxs-lookup"><span data-stu-id="20eac-156">An important consideration for culture and XAML type conversion is the following: although using localizable strings as attribute values is supported by XAML, you cannot use these localizable strings as type converter input with specific culture requirements.</span></span> <span data-ttu-id="20eac-157">Esta limitación obedece a que los convertidores de tipos de los valores de atributo XAML conllevan un comportamiento de procesamiento XAML de lenguaje obligatoriamente fijo que usa la referencia cultural `en-US` .</span><span class="sxs-lookup"><span data-stu-id="20eac-157">This limitation is because type converters for XAML attribute values involve a necessarily fixed-language XAML-processing behavior that uses `en-US` culture.</span></span> <span data-ttu-id="20eac-158">Para obtener más información sobre los motivos de diseño de esta restricción, vea la especificación del lenguaje XAML ([ \[ MS-XAML \] ](/previous-versions/msp-n-p/ff650760(v=pandp.10))) o [información general sobre la globalización y la localización de WPF](/dotnet/desktop/wpf/advanced/wpf-globalization-and-localization-overview).</span><span class="sxs-lookup"><span data-stu-id="20eac-158">For more information about the design reasons for this restriction, see the XAML language specification ([\[MS-XAML\]](/previous-versions/msp-n-p/ff650760(v=pandp.10))) or [WPF Globalization and Localization Overview](/dotnet/desktop/wpf/advanced/wpf-globalization-and-localization-overview).</span></span>

<span data-ttu-id="20eac-159">Un ejemplo donde la referencia cultural puede ser un problema son algunas referencias culturales que usan una coma en lugar de un punto como delimitador de separador decimal para los números en forma de cadena.</span><span class="sxs-lookup"><span data-stu-id="20eac-159">As an example where culture can be an issue, some cultures use a comma instead of a period as the decimal point delimiter for numbers in string form.</span></span> <span data-ttu-id="20eac-160">Este uso entra en conflicto con el comportamiento de muchos convertidores de tipos existentes, que consiste en usar una coma como delimitador.</span><span class="sxs-lookup"><span data-stu-id="20eac-160">This use collides with the behavior that many existing type converters have, which is to use a comma as a delimiter.</span></span> <span data-ttu-id="20eac-161">Pasar una referencia cultural por `xml:lang` en el XAML adyacente no soluciona el problema.</span><span class="sxs-lookup"><span data-stu-id="20eac-161">Passing a culture through `xml:lang` in the surrounding XAML does not solve the issue.</span></span>

### <a name="implementing-convertfrom"></a><span data-ttu-id="20eac-162">Implementación de ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="20eac-162">Implementing ConvertFrom</span></span>

<span data-ttu-id="20eac-163">Para ser igual de utilizable que una implementación de <xref:System.ComponentModel.TypeConverter> que admite XAML, el método <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> para ese convertidor tiene que aceptar una cadena como parámetro `value` .</span><span class="sxs-lookup"><span data-stu-id="20eac-163">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="20eac-164">Si la cadena tiene un formato válido y la implementación de <xref:System.ComponentModel.TypeConverter> puede convertirla, el objeto devuelto debe admitir una conversión al tipo que la propiedad espera.</span><span class="sxs-lookup"><span data-stu-id="20eac-164">If the string is in a valid format and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, the returned object must support a cast to the type that is expected by the property.</span></span> <span data-ttu-id="20eac-165">De lo contrario, la implementación de <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> debe devolver `null`.</span><span class="sxs-lookup"><span data-stu-id="20eac-165">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>

<span data-ttu-id="20eac-166">Cada implementación de <xref:System.ComponentModel.TypeConverter> puede interpretar de manera única qué constituye una cadena válida para una conversión y, también, puede usar o ignorar la descripción del tipo o los contextos de referencia cultural pasados como parámetros.</span><span class="sxs-lookup"><span data-stu-id="20eac-166">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what constitutes a valid string for a conversion, and it can also use or ignore the type description or culture contexts that are passed as parameters.</span></span> <span data-ttu-id="20eac-167">Sin embargo, el procesamiento de XAML de WPF podría no pasar valores al contexto de descripción del tipo en todos los casos y, asimismo, no pasar referencias culturales basadas en `xml:lang`.</span><span class="sxs-lookup"><span data-stu-id="20eac-167">However, the WPF XAML processing might not pass values to the type description context in all cases and also might not pass culture based on `xml:lang`.</span></span>

> [!NOTE]
> <span data-ttu-id="20eac-168">No use llaves ( {} ), en concreto la llave de apertura ({), como un elemento de su formato de cadena.</span><span class="sxs-lookup"><span data-stu-id="20eac-168">Do not use the braces ({}), specifically the opening brace ({), as an element of your string format.</span></span> <span data-ttu-id="20eac-169">Estos caracteres están reservados como entrada y salida de una secuencia de extensión de marcado.</span><span class="sxs-lookup"><span data-stu-id="20eac-169">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>

<span data-ttu-id="20eac-170">Es adecuado iniciar una excepción cuando el convertidor de tipos debe tener acceso a un servicio XAML desde el escritor de objetos de servicios XAML de .NET, pero la <xref:System.IServiceProvider.GetService%2A> llamada que se realiza en el contexto no devuelve ese servicio.</span><span class="sxs-lookup"><span data-stu-id="20eac-170">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-convertto"></a><span data-ttu-id="20eac-171">Implementación de ConvertTo</span><span class="sxs-lookup"><span data-stu-id="20eac-171">Implementing ConvertTo</span></span>

<span data-ttu-id="20eac-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> se usa en teoría para admitir la serialización.</span><span class="sxs-lookup"><span data-stu-id="20eac-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="20eac-173">La compatibilidad con la serialización a través de <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> para el tipo personalizado y su convertidor de tipos no es un requisito imprescindible.</span><span class="sxs-lookup"><span data-stu-id="20eac-173">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="20eac-174">Pero, si implementa un control, o usa la serialización como parte de las características o del diseño de la clase, conviene implementar <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="20eac-174">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>

<span data-ttu-id="20eac-175">Para ser igual de utilizable que una implementación de <xref:System.ComponentModel.TypeConverter> que admite XAML, el método <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> para ese convertidor tiene que aceptar una instancia del tipo (o un valor) que se pueda usar como parámetro `value` .</span><span class="sxs-lookup"><span data-stu-id="20eac-175">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) that is supported as the `value` parameter.</span></span> <span data-ttu-id="20eac-176">Cuando el parámetro `destinationType` es de tipo <xref:System.String>, el objeto devuelto debe poder convertirse en <xref:System.String>.</span><span class="sxs-lookup"><span data-stu-id="20eac-176">When the `destinationType` parameter is of type <xref:System.String>, the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="20eac-177">La cadena devuelta debe representar un valor serializado de `value`.</span><span class="sxs-lookup"><span data-stu-id="20eac-177">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="20eac-178">Lo ideal sería que el formato de serialización elegido sea capaz de generar el mismo valor que si esa cadena se pasara a la implementación de <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> del mismo convertidor sin incurrir en una pérdida significativa de información.</span><span class="sxs-lookup"><span data-stu-id="20eac-178">Ideally, the serialization format that you choose should be able to generate the same value as if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>

<span data-ttu-id="20eac-179">Si el valor no se puede serializar o el convertidor no admite la serialización, la implementación de <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> debe devolver `null` y puede producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="20eac-179">If the value cannot be serialized or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null` and can throw an exception.</span></span> <span data-ttu-id="20eac-180">Pero, si se producen excepciones, será necesario dejar constancia de la imposibilidad de usar esa conversión como parte de su implementación de <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> para, así, poder dar cabida al procedimiento recomendado de comprobar primero con <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> para evitar excepciones.</span><span class="sxs-lookup"><span data-stu-id="20eac-180">However, if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>

<span data-ttu-id="20eac-181">Si el parámetro `destinationType` no es de tipo <xref:System.String>, puede elegir su propio control de convertidor.</span><span class="sxs-lookup"><span data-stu-id="20eac-181">If the `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="20eac-182">Normalmente, se vuelve al control de implementación base, que en el <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> base genera una excepción específica.</span><span class="sxs-lookup"><span data-stu-id="20eac-182">Typically, you revert to base implementation handling, which in the base <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>

<span data-ttu-id="20eac-183">Es adecuado iniciar una excepción cuando el convertidor de tipos debe tener acceso a un servicio XAML desde el escritor de objetos de servicios XAML de .NET, pero la <xref:System.IServiceProvider.GetService%2A> llamada que se realiza en el contexto no devuelve ese servicio.</span><span class="sxs-lookup"><span data-stu-id="20eac-183">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-canconvertfrom"></a><span data-ttu-id="20eac-184">Implementación de CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="20eac-184">Implementing CanConvertFrom</span></span>

<span data-ttu-id="20eac-185">Su implementación de <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> debe devolver `true` para `sourceType` de tipo <xref:System.String> o, si no, respetar la implementación base.</span><span class="sxs-lookup"><span data-stu-id="20eac-185">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String> and otherwise, defer to the base implementation.</span></span> <span data-ttu-id="20eac-186">No genere excepciones desde <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span><span class="sxs-lookup"><span data-stu-id="20eac-186">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span></span>

### <a name="implementing-canconvertto"></a><span data-ttu-id="20eac-187">Implementación de CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="20eac-187">Implementing CanConvertTo</span></span>

<span data-ttu-id="20eac-188">Su implementación de <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> debe devolver `true` para `destinationType` de tipo <xref:System.String>o, si no, respetar la implementación base.</span><span class="sxs-lookup"><span data-stu-id="20eac-188">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span> <span data-ttu-id="20eac-189">No genere excepciones desde <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span><span class="sxs-lookup"><span data-stu-id="20eac-189">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span></span>

## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="20eac-190">Aplicación de TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="20eac-190">Applying the TypeConverterAttribute</span></span>

<span data-ttu-id="20eac-191">Para que los servicios XAML de .NET puedan usar el convertidor de tipos personalizado como convertidor de tipos que actúa para una clase personalizada, debe aplicar <xref:System.ComponentModel.TypeConverterAttribute> a la definición de clase.</span><span class="sxs-lookup"><span data-stu-id="20eac-191">For your custom type converter to be used as the acting type converter for a custom class by .NET XAML Services, you must apply the <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="20eac-192">El <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> que se especifica a través del atributo debe ser el nombre de tipo del convertidor de tipos personalizado.</span><span class="sxs-lookup"><span data-stu-id="20eac-192">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="20eac-193">Si aplica este atributo, cuando un procesador XAML controla valores donde el tipo de propiedad usa el tipo de la clase personalizada, puede especificar cadenas y devolver instancias de objeto.</span><span class="sxs-lookup"><span data-stu-id="20eac-193">If you apply this attribute, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>

<span data-ttu-id="20eac-194">También puede proporcionar un convertidor de tipos por cada propiedad.</span><span class="sxs-lookup"><span data-stu-id="20eac-194">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="20eac-195">En lugar de aplicar un <xref:System.ComponentModel.TypeConverterAttribute> a la definición de clase, aplíquelo a una definición de propiedad (la definición principal, no las `get` / `set` implementaciones que contiene).</span><span class="sxs-lookup"><span data-stu-id="20eac-195">Instead of applying a <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="20eac-196">El tipo de la propiedad tiene que coincidir con el tipo que el convertidor de tipos personalizado procesa.</span><span class="sxs-lookup"><span data-stu-id="20eac-196">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="20eac-197">Con este atributo aplicado, cuando un procesador XAML controla valores de esa propiedad, puede procesar cadenas de entrada y devolver instancias de objeto.</span><span class="sxs-lookup"><span data-stu-id="20eac-197">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="20eac-198">La técnica de convertidor de tipos por propiedad resulta útil si se decide usar un tipo de propiedad de Microsoft .NET Framework o de otra biblioteca donde no se puede controlar la definición de clase y no se puede aplicar <xref:System.ComponentModel.TypeConverterAttribute> allí.</span><span class="sxs-lookup"><span data-stu-id="20eac-198">The per-property type converter technique is useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>

<span data-ttu-id="20eac-199">Para proporcionar un comportamiento de conversión de tipos para un miembro asociado personalizado, aplique <xref:System.ComponentModel.TypeConverterAttribute> al método de descriptor de acceso `Get` del patrón de implementación del miembro asociado.</span><span class="sxs-lookup"><span data-stu-id="20eac-199">To supply a type conversion behavior for a custom attached member, apply <xref:System.ComponentModel.TypeConverterAttribute> to the `Get` accessor method of the implementation pattern for the attached member.</span></span>

## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="20eac-200">Acceder al contexto del proveedor de servicios desde una implementación de la extensión de marcado</span><span class="sxs-lookup"><span data-stu-id="20eac-200">Accessing Service Provider Context from a Markup Extension Implementation</span></span>

<span data-ttu-id="20eac-201">Los servicios disponibles son los mismos para todos los convertidores de valores.</span><span class="sxs-lookup"><span data-stu-id="20eac-201">The available services are the same for any value converter.</span></span> <span data-ttu-id="20eac-202">La diferencia radica en la manera en que cada convertidor de valores recibe el contexto de servicio.</span><span class="sxs-lookup"><span data-stu-id="20eac-202">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="20eac-203">El acceso a los servicios y los servicios disponibles se documentan en el tema [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="20eac-203">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span></span>

## <a name="type-converters-in-the-xaml-node-stream"></a><span data-ttu-id="20eac-204">Convertidores de tipos en el flujo de nodo XAML</span><span class="sxs-lookup"><span data-stu-id="20eac-204">Type Converters in the XAML Node Stream</span></span>

<span data-ttu-id="20eac-205">Si está trabajando con un flujo de nodo XAML, la acción o el resultado final de un convertidor de tipos no se ejecuta todavía.</span><span class="sxs-lookup"><span data-stu-id="20eac-205">If you are working with a XAML node stream, the action or end result of a type converter is not yet executed.</span></span> <span data-ttu-id="20eac-206">En una ruta de acceso de carga, la cadena de atributo que finalmente se debe convertir en tipo para poder cargarse permanece como un valor de texto dentro de un miembro de inicio y un miembro de finalización.</span><span class="sxs-lookup"><span data-stu-id="20eac-206">In a load path, the attribute string that eventually needs to be type-converted in order to load remains as a text value within a start member and end member.</span></span> <span data-ttu-id="20eac-207">El convertidor de tipos necesario en última instancia para esta operación se puede averiguar con la propiedad <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="20eac-207">The type converter that is eventually needed for this operation can be determined by using the <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="20eac-208">Sin embargo, para obtener un valor válido de <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> hay que tener un contexto de esquema XAML, que puede tener acceso a dicha información a través del miembro subyacente, o el tipo del valor del objeto que el miembro usa.</span><span class="sxs-lookup"><span data-stu-id="20eac-208">However, obtaining a valid value from <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> relies on having a XAML schema context, which can access such information through the underlying member, or the type of the object value that the member uses.</span></span> <span data-ttu-id="20eac-209">Invocar el comportamiento de conversión de tipos también precisa del contexto de esquema XAML, porque requiere la asignación de tipos y crear una instancia del convertidor.</span><span class="sxs-lookup"><span data-stu-id="20eac-209">Invoking the type conversion behavior also requires the XAML schema context because that requires type-mapping and creating a converter instance.</span></span>

## <a name="see-also"></a><span data-ttu-id="20eac-210">Vea también</span><span class="sxs-lookup"><span data-stu-id="20eac-210">See also</span></span>

- <xref:System.ComponentModel.TypeConverterAttribute>
- [<span data-ttu-id="20eac-211">Convertidores de tipos y extensiones de marcado para XAML</span><span class="sxs-lookup"><span data-stu-id="20eac-211">Type Converters and Markup Extensions for XAML</span></span>](type-converters-and-markup-extensions.md)
- [<span data-ttu-id="20eac-212">Información general sobre XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="20eac-212">XAML Overview (WPF)</span></span>](../fundamentals/xaml.md)
