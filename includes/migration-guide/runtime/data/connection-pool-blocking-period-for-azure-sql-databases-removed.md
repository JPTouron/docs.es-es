---
ms.openlocfilehash: d7a18a0b457c2a38f40c1da3b2f0bfc578259475
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 07/01/2020
ms.locfileid: "85621370"
---
### <a name="connection-pool-blocking-period-for-azure-sql-databases-is-removed"></a><span data-ttu-id="c9770-101">Se ha quitado el período de bloqueo del grupo de conexiones para Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="c9770-101">Connection pool blocking period for Azure SQL databases is removed</span></span>

#### <a name="details"></a><span data-ttu-id="c9770-102">Detalles</span><span class="sxs-lookup"><span data-stu-id="c9770-102">Details</span></span>

<span data-ttu-id="c9770-103">A partir de .NET Framework 4.6.2, para las solicitudes de apertura de conexión a instancias de Azure SQL Database conocidas (\*.database.windows.net, \*.database.chinacloudapi.cn, \*.database.usgovcloudapi.net, \*.database.cloudapi.de), se ha quitado el período de bloqueo del grupo de conexiones y los errores de apertura de conexiones no se almacenan en caché.</span><span class="sxs-lookup"><span data-stu-id="c9770-103">Starting with the .NET Framework 4.6.2, for connection open requests to known Azure SQL databases (\*.database.windows.net, \*.database.chinacloudapi.cn, \*.database.usgovcloudapi.net, \*.database.cloudapi.de), the connection pool blocking period is removed, and connection open errors are not cached.</span></span> <span data-ttu-id="c9770-104">Se llevarán a cabo intentos por recuperar solicitudes abiertas de conexión casi inmediatamente después de los errores de conexión transitorios.</span><span class="sxs-lookup"><span data-stu-id="c9770-104">Attempts to retry connection open requests will occur almost immediately after transient connection errors.</span></span> <span data-ttu-id="c9770-105">Este cambio permite que el intento de apertura de conexión a instancias de Azure SQL Database se reintente de inmediato, lo que mejora el rendimiento de las aplicaciones habilitadas para la nube.</span><span class="sxs-lookup"><span data-stu-id="c9770-105">This change allows the connection open attempt to be retried immediately for Azure SQL databases, thereby improving the performance of cloud- enabled apps.</span></span> <span data-ttu-id="c9770-106">Para todos los otros intentos de conexión, se sigue aplicando el período de bloqueo del grupo de conexiones.</span><span class="sxs-lookup"><span data-stu-id="c9770-106">For all other connection attempts, the connection pool blocking period continues to be enforced.</span></span><p/><span data-ttu-id="c9770-107">En .NET Framework 4.6.1 y versiones anteriores, cuando una aplicación encuentra un error de conexión transitorio al conectarse a una base de datos, no es posible reintentar rápidamente la conexión, porque el grupo de conexiones almacena el error en caché y vuelve a generarlo entre cinco segundos y un minuto.</span><span class="sxs-lookup"><span data-stu-id="c9770-107">In the .NET Framework 4.6.1 and earlier versions, when an app encounters a transient connection failure when connecting to a database, the connection attempt cannot be retried quickly, because the connection pool caches the error and re-throws it for 5 seconds to 1 minute.</span></span> <span data-ttu-id="c9770-108">Para obtener más información, vea [Agrupación de conexiones de SQL Server (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span><span class="sxs-lookup"><span data-stu-id="c9770-108">For more information, see [SQL Server Connection Pooling (ADO.NET)](~/docs/framework/data/adonet/sql-server-connection-pooling.md).</span></span> <span data-ttu-id="c9770-109">Este comportamiento causa problemas en las conexiones a bases de datos SQL de Azure, las que habitualmente presentan errores transitorios de los que se recuperan dentro de unos pocos segundos.</span><span class="sxs-lookup"><span data-stu-id="c9770-109">This behavior is problematic for connections to Azure SQL databases, which often fail with transient errors that are typically recovered from within a few seconds.</span></span> <span data-ttu-id="c9770-110">La característica de bloqueo del grupo de conexiones significa que la aplicación no se puede conectar a la base de datos durante un período prolongado, incluso si la base de datos está disponible y la aplicación tiene que representarse en cuestión de segundos.</span><span class="sxs-lookup"><span data-stu-id="c9770-110">The connection pool blocking feature means that the app cannot connect to the database for an extensive period, even though the database is available and the app needs to render within a few seconds.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="c9770-111">Sugerencia</span><span class="sxs-lookup"><span data-stu-id="c9770-111">Suggestion</span></span>

<span data-ttu-id="c9770-112">Si no quiere este comportamiento, se puede configurar el período de bloqueo del grupo de conexiones si se establece la propiedad <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=fullName> introducida en .NET Framework 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="c9770-112">If this behavior is undesirable, the connection pool blocking period can be configured by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=fullName> property introduced in the .NET Framework 4.6.2.</span></span> <span data-ttu-id="c9770-113">El valor de la propiedad es un miembro de la enumeración <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=fullName> que puede tener cualquiera de los tres valores:</span><span class="sxs-lookup"><span data-stu-id="c9770-113">The value of the property is a member of the <xref:System.Data.SqlClient.PoolBlockingPeriod?displayProperty=fullName> enumeration that can take either of three values:</span></span><ul><li><xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.Auto></li><li><xref:System.Data.SqlClient.PoolBlockingPeriod.NeverBlock></li></ul><span data-ttu-id="c9770-114">El comportamiento anterior se puede restaurar al establecer la propiedad <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=fullName> en <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span><span class="sxs-lookup"><span data-stu-id="c9770-114">The previous behavior can be restored by setting the <xref:System.Data.SqlClient.SqlConnectionStringBuilder.PoolBlockingPeriod?displayProperty=fullName> property to <xref:System.Data.SqlClient.PoolBlockingPeriod.AlwaysBlock>.</span></span>

| <span data-ttu-id="c9770-115">Nombre</span><span class="sxs-lookup"><span data-stu-id="c9770-115">Name</span></span>    | <span data-ttu-id="c9770-116">Valor</span><span class="sxs-lookup"><span data-stu-id="c9770-116">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="c9770-117">Ámbito</span><span class="sxs-lookup"><span data-stu-id="c9770-117">Scope</span></span>   |<span data-ttu-id="c9770-118">Secundaria</span><span class="sxs-lookup"><span data-stu-id="c9770-118">Minor</span></span>|
|<span data-ttu-id="c9770-119">Versión</span><span class="sxs-lookup"><span data-stu-id="c9770-119">Version</span></span>|<span data-ttu-id="c9770-120">4.6.2</span><span class="sxs-lookup"><span data-stu-id="c9770-120">4.6.2</span></span>|
|<span data-ttu-id="c9770-121">Tipo</span><span class="sxs-lookup"><span data-stu-id="c9770-121">Type</span></span>|<span data-ttu-id="c9770-122">Tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="c9770-122">Runtime</span></span>

#### <a name="affected-apis"></a><span data-ttu-id="c9770-123">API afectadas</span><span class="sxs-lookup"><span data-stu-id="c9770-123">Affected APIs</span></span>

-<xref:System.Data.Common.DbConnection.OpenAsync?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.Open?displayProperty=nameWithType></li><li><xref:System.Data.SqlClient.SqlConnection.OpenAsync(System.Threading.CancellationToken)?displayProperty=nameWithType></li></ul>|
